<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>从零开始搭建个人博客 | ChenSoul</title>
<meta name=keywords content="hugo,github"><meta name=description content="从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。 域名 搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释： 域名（英语：Domain Name），又称网域，是由"><meta name=author content="chensoul"><link rel=canonical href=https://blog.chensoul.cc/posts/2021/09/09/build-personal-blog-from-zero/><meta name=google-site-verification content="nBXwg45SBRjTX78SA-mH0asrAbsdu9c1nk0ObSry7aQ"><link crossorigin=anonymous href=/assets/css/stylesheet.899d9a536396b9b03c9eae0c99cc6ec954a90da94036f5390d131eb8071bb417.css integrity="sha256-iZ2aU2OWubA8nq4MmcxuyVSpDalANvU5DRMeuAcbtBc=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.chensoul.cc/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chensoul.cc/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chensoul.cc/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chensoul.cc/apple-touch-icon.png><link rel=mask-icon href=https://blog.chensoul.cc/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.chensoul.cc/posts/2021/09/09/build-personal-blog-from-zero/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=baidu-site-verification content="codeva-FYpQY8JdLU"><meta property="og:title" content="从零开始搭建个人博客"><meta property="og:description" content="从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。 域名 搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释： 域名（英语：Domain Name），又称网域，是由"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.cc/posts/2021/09/09/build-personal-blog-from-zero/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-09T00:00:00+08:00"><meta property="article:modified_time" content="2021-09-09T00:00:00+08:00"><meta property="og:site_name" content="ChenSoul"><meta name=twitter:card content="summary"><meta name=twitter:title content="从零开始搭建个人博客"><meta name=twitter:description content="从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。 域名 搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释： 域名（英语：Domain Name），又称网域，是由"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chensoul.cc/posts/"},{"@type":"ListItem","position":2,"name":"从零开始搭建个人博客","item":"https://blog.chensoul.cc/posts/2021/09/09/build-personal-blog-from-zero/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"从零开始搭建个人博客","name":"从零开始搭建个人博客","description":"从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。 域名 搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释： 域名（英语：Domain Name），又称网域，是由","keywords":["hugo","github"],"articleBody":"从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。\n域名 搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释：\n域名（英语：Domain Name），又称网域，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。\n由于IP 地址具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过网域名称系统（DNS，Domain Name System）来将域名和IP 地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器直接读取的IP 地址数串。\n简单来说，IP 地址可以标识一台计算机，但是不容易记忆，所以，设计出了域名。而域名就是标识因特网上的一台计算机，由网域名称系统 DNS 来完成域名和 IP 之间的映射。\n如何注册域名？有很多网站提供域名注册服务，比如国内的：\n阿里云 腾讯云 华为云 国外的：\nGoDaddy Namecheap Amazon 注册域名的建议：\n1、建议在正规、出名的网站注册域名，防止网站跑路。我曾经在一个小网站注册了一个域名，使用了几年之后，续期的时候，联系不上对方，导致无法使用该域名，甚至该域名被别人抢注册了。 2、在国内网站注册域名，都需要备案。如果不想备案，请在国外网站注册域名。我的域名 chensoul.cc 就是在亚马逊上注册的。一是不想备案，二是对比了上面几个网站，发现亚马逊上的 com 域名价格相对便宜，所以一次性购买了 5 年。 3、建议优先注册 com 域名，域名尽可能的简短并且方便记忆。 我曾经注册过的域名：\njavachen.com、javachen.space、javachen.xyz huaiu.com 服务器 注册了域名之后，需要一台服务器运行程序。服务器可以是一台物理机，比如你可以使用自己的电脑作为服务器；也可以是一台虚拟的云服务器，比如在云服务提供商购买一台独立的服务器；也可以使用第三方提供的服务器空间，比如 Github 上可以部署静态程序。不管哪种方式，服务器都需要有一个公网 IP，这样才能在因特网上访问你服务器上部署的程序。有了服务器之后，就可以给服务器公网 IP 设置域名解析。\n我的服务器是在搬瓦工购买的，一年 49.99 美元。\n程序 安装 Hugo 在 Mac 下安装 Hugo：\n1 brew install hugo 新建站点 1 hugo new site chensoul.github.io -y yaml 上述命令会生成一个名为 chensoul.github.io 的文件夹，下面对文件夹结构做个说明：\n1 2 3 4 5 6 7 8 9 10 11 12 $ tree chensoul.github.io chensoul.github.io ├── archetypes │ └── default.md ├── config.yaml ├── content ├── data ├── layouts ├── static └── themes 6 directories, 2 files 新建的站点，还没有加入 Git 版本管理，进入到这个目录下，执行一下如下命令，完成 Git Repo 的初始化：\n1 2 cd chensoul.github.io git init . 新建站点后，我们开始添加主题。\n添加主题 在 Hugo 的官网上 Hugo Themes 有非常非常多的主题，可以根据自己的喜好选择一个主题。这里，我使用的是 hugo-theme-den 主题。\n使用 git submodule–helper 下载主题到 theme 目录下：\n1 2 3 4 git submodule--helper add https://github.com/shaform/hugo-theme-den themes/den --depth=1 git submodule--helper update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically) 以后，当主题有更新时，执行下面命令更新：\n1 git submodule update --remote --merge 如果遇到异常，可以参考文章解决。\n1 fatal: remote error: upload-pack: not our ref fc7223ca00124e8f5b5b354457379071e2fd091b 启动 启动预览：\n1 hugo server 默认是 1313 端口号，在浏览器中直接访问 http://localhost:1313/ 就可以访问到新建的博客了。\n定制化 站点信息 配置网站的基本信息，将 config.yaml 修改如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 baseURL: https://blog.chensoul.cc/ title: ChenSoul theme: den enableRobotsTXT: true enableEmoji: true hasCJKLanguage: true preserveTaxonomyNames: true rssLimit: 100 page_view_conter: true enableRelated: true # Copyright, appears in the footer # copyright = \"\" # default: author.name # Pagination # number of entries per page for archives, tags and categories # since we don't have list view, recommend a large value paginate: 20 paginatePath: \"page\" # Syntax Hightlight PygmentsCodeFences: true PygmentsUseClasses: true # required for shhighlight shortcode # service plugins disqusShortname: \"\" # disqus_shortname googleAnalytics: \"\" # UA-XXXXXXXX-X # language support # en / zh / other... translations present in i18n/ defaultContentLanguage: \"zh\" # Default language to use defaultContentLanguageInSubdir: true permalinks: posts: /posts/:slug/ categories: /categories/:slug/ tags: /tags/:slug/ pages: /:slug/ author: name: chensoul sitemap: changefreq: weekly priority: 0.5 filename: sitemap.xml params: since: \"2020\" rssFullContent: true keywords: - devops - programming description: Programming | Devops logoTitle: ChenSoul siteLogoImage: images/fly.png # headerTitle = \"chensoul\" # default: title headerImage: images/background.webp showAuthorCard: true showMenuLanguages: true autoLoadComments: false paginateOriginalStyle: true # The date format to use; for a list of valid formats, see https://gohugo.io/functions/format/ dateFormatToUse: 2006-01-02 google_verification: \"D8XBzUhT4irNUQLKut79HFni0v3Xow4FY-oxUcsUlVk\" # Link custom CSS and JS assets # (relative to /static/css and /static/js respectively) customCSS: [] customJS: [] markup: goldmark: renderer: unsafe: true # ------------------------------------- # # ---- Related Articles --------------- # # ------------------------------------- # related: # Only include matches with rank \u003e= threshold. This is a normalized rank between 0 and 100. threshold: 50 # To get stable \"See also\" sections we, by default, exclude newer related pages. includeNewer: true # Will lower case keywords in both queries and in the indexes. toLower: true indices: - name: categories weight: 200 - name: keywords weight: 150 - name: tags weight: 100 languages: zh: languageCode: zh languageName: 中文 contentDir: content weight: 1 params: description: Devops | Programming menu: main: - name: 思考 weight: 10 identifier: idea url: categories/idea/ social: - name: Telegram weight: 10 identifier: telegram url: https://t.me/chensouls - name: Twitter weight: 20 identifier: twitter url: https://twitter.com/ichensoul - name: BiliBili weight: 40 identifier: bilibili url: https://space.bilibili.com/699805065/ links: - name: GitHub weight: 10 identifier: github url: https://github.com/chensoul - name: Services weight: 20 identifier: services-status url: https://uptime.chensoul.cc/status/services - name: Analytics weight: 30 identifier: chensoul-analytics url: https://data.chensoul.cc/share/8YKX7FUa/pseudoyu-blog 部署 GitHub Actions 部署 1、首先在 github 里创建一个仓库：chensoul.github.io\n2、将本地文件提交到 github\n1 2 3 4 cd chensoul.github.io git init . echo \"# chensoul.github.io\" \u003e\u003e README.md git remote add origin git@github.com:chensoul/chensoul.github.io.git 3、将本地代码推送到仓库\n1 2 git commit -m \"first commit\" git push -u origin main 4、创建 GitHub Actions 的 workflow\n1 2 mkdir -p .github/workflows touch .github/workflows/gh-page.yml gh-page.yml 内容如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 name: github pages on: workflow_dispatch: push: branches: - hugo jobs: deploy: runs-on: ubuntu-18.04 timeout-minutes: 3 steps: - name: Checkout uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: latest extended: true - name: Build web run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_branch: gh-pages publish_dir: ./public 上面的工作流是在 gh-pages 分支上触发，当有代码提交时候，会运行 hugo 命令生成静态文件（public 目录），并且将他们推送到 main 分支。\n所以，我们需要基于当前分支创建一个新分支 gh-pages ，并且推送到远程仓库：\n1 2 3 git branch gh-pages git checkout gh-pages git push origin gh-pages 5、修改代码，推送到仓库，触发工作流\n在本地修改某个文件，提交代码，然后在 github 网站 查看工作流\n1 git push origin gh-pages 7、设置自定义域名\n参考管理 GitHub Pages 站点的自定义域，添加一个自定义域名：blog.chensoul.cc：\n或者，在仓库的 static 目录创建一个 CNAME 文件，内容为：blog.chensoul.cc，然后，保存提交，Github Actions 会将该文件推送到 main 分支。\n然后，在亚马逊网站添加 CNAME 记录：\n8、部署到 CloudFlare Pages\n参考 从 GitHub Pages 迁移到 CloudFlare Pages 的体验与踩坑小记\n","wordCount":"2293","inLanguage":"en","datePublished":"2021-09-09T00:00:00+08:00","dateModified":"2021-09-09T00:00:00+08:00","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.cc/posts/2021/09/09/build-personal-blog-from-zero/"},"publisher":{"@type":"Organization","name":"ChenSoul","logo":{"@type":"ImageObject","url":"https://blog.chensoul.cc/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chensoul.cc/ accesskey=h title="ChenSoul (Alt + H)">ChenSoul</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.chensoul.cc/categories title=分类><span>分类</span></a></li><li><a href=https://blog.chensoul.cc/tags title=标签><span>标签</span></a></li><li><a href=https://blog.chensoul.cc/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.chensoul.cc/index.xml title=订阅><span>订阅</span></a></li><li><a href=https://github.com/chensoul title=关于><span>关于</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">从零开始搭建个人博客</h1><div class=post-meta><span title='2021-09-09 00:00:00 +0800 CST'>2021-09-09</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;2293 words&nbsp;·&nbsp;chensoul</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%9f%9f%e5%90%8d aria-label=域名>域名</a></li><li><a href=#%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=服务器>服务器</a></li><li><a href=#%e7%a8%8b%e5%ba%8f aria-label=程序>程序</a><ul><li><a href=#%e5%ae%89%e8%a3%85-hugo aria-label="安装 Hugo">安装 Hugo</a></li><li><a href=#%e6%96%b0%e5%bb%ba%e7%ab%99%e7%82%b9 aria-label=新建站点>新建站点</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e4%b8%bb%e9%a2%98 aria-label=添加主题>添加主题</a></li><li><a href=#%e5%90%af%e5%8a%a8 aria-label=启动>启动</a></li></ul></li><li><a href=#%e5%ae%9a%e5%88%b6%e5%8c%96 aria-label=定制化>定制化</a><ul><li><a href=#%e7%ab%99%e7%82%b9%e4%bf%a1%e6%81%af aria-label=站点信息>站点信息</a></li></ul></li><li><a href=#%e9%83%a8%e7%bd%b2 aria-label=部署>部署</a><ul><li><a href=#github-actions-%e9%83%a8%e7%bd%b2 aria-label="GitHub Actions 部署">GitHub Actions 部署</a></li></ul></li></ul></div></details></div><div class=post-content><p>从零开始搭建博客，包括注册域名、购买服务器、部署程序及网站配置和优化。</p><h2 id=域名>域名<a hidden class=anchor aria-hidden=true href=#域名>#</a></h2><p>搭建一个博客或者网站，需要有一个域名。那什么是域名呢？看看百度百科上的解释：</p><blockquote><p><strong>域名</strong>（英语：<strong>Domain Name</strong>），又称<strong>网域</strong>，是由一串用点分隔的名字组成的<a href=https://baike.baidu.com/item/Internet target=_blank>Internet</a>上某一台<a href=https://baike.baidu.com/item/%e8%ae%a1%e7%ae%97%e6%9c%ba/140338 target=_blank>计算机</a>或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。</p><p>由于<a href=https://baike.baidu.com/item/IP%e5%9c%b0%e5%9d%80/150859 target=_blank>IP 地址</a>具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过网域名称系统（<a href=https://baike.baidu.com/item/DNS target=_blank>DNS</a>，Domain Name System）来将域名和<a href=https://baike.baidu.com/item/IP%e5%9c%b0%e5%9d%80 target=_blank>IP 地址</a>相互<a href=https://baike.baidu.com/item/%e6%98%a0%e5%b0%84/20402621 target=_blank>映射</a>，使人更方便地访问<a href=https://baike.baidu.com/item/%e4%ba%92%e8%81%94%e7%bd%91/199186 target=_blank>互联网</a>，而不用去记住能够被机器直接读取的<a href=https://baike.baidu.com/item/IP%e5%9c%b0%e5%9d%80 target=_blank>IP 地址</a>数串。</p></blockquote><p>简单来说，IP 地址可以标识一台计算机，但是不容易记忆，所以，设计出了域名。而域名就是标识因特网上的一台计算机，由网域名称系统 DNS 来完成域名和 IP 之间的映射。</p><p>如何注册域名？有很多网站提供域名注册服务，比如国内的：</p><ul><li><a href=https://www.alibabacloud.com/zh/domain target=_blank>阿里云</a></li><li><a href=https://cloud.tencent.com/act/domainsales target=_blank>腾讯云</a></li><li><a href=https://www.huaweicloud.com/ target=_blank>华为云</a></li></ul><p>国外的：</p><ul><li><a href=https://sg.godaddy.com/zh/offers/domain target=_blank>GoDaddy</a></li><li><a href=https://www.namecheap.com/ target=_blank>Namecheap</a></li><li><a href=https://console.aws.amazon.com/route53/home?#DomainRegistration: target=_blank>Amazon</a></li></ul><p>注册域名的建议：</p><ul><li>1、建议在正规、出名的网站注册域名，防止网站跑路。我曾经在一个小网站注册了一个域名，使用了几年之后，续期的时候，联系不上对方，导致无法使用该域名，甚至该域名被别人抢注册了。</li><li>2、在国内网站注册域名，都需要备案。如果不想备案，请在国外网站注册域名。我的域名 chensoul.cc 就是在亚马逊上注册的。一是不想备案，二是对比了上面几个网站，发现亚马逊上的 com 域名价格相对便宜，所以一次性购买了 5 年。</li><li>3、建议优先注册 com 域名，域名尽可能的简短并且方便记忆。</li></ul><p>我曾经注册过的域名：</p><ul><li>javachen.com、javachen.space、javachen.xyz</li><li>huaiu.com</li></ul><h2 id=服务器>服务器<a hidden class=anchor aria-hidden=true href=#服务器>#</a></h2><p>注册了域名之后，需要一台服务器运行程序。服务器可以是一台物理机，比如你可以使用自己的电脑作为服务器；也可以是一台虚拟的云服务器，比如在云服务提供商购买一台独立的服务器；也可以使用第三方提供的服务器空间，比如 Github 上可以部署静态程序。不管哪种方式，服务器都需要有一个公网 IP，这样才能在因特网上访问你服务器上部署的程序。有了服务器之后，就可以给服务器公网 IP 设置域名解析。</p><p>我的服务器是在<a href="https://bandwagonhost.com/aff.php?aff=58710" target=_blank>搬瓦工</a>购买的，一年 49.99 美元。</p><p><img loading=lazy src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/bwg-plan.png alt=bwg-plan></p><h2 id=程序>程序<a hidden class=anchor aria-hidden=true href=#程序>#</a></h2><h3 id=安装-hugo>安装 Hugo<a hidden class=anchor aria-hidden=true href=#安装-hugo>#</a></h3><p><img loading=lazy src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/hugo-logo.svg alt="使用 Hugo 搭建博客"></p><p>在 Mac 下安装 Hugo：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install hugo
</span></span></code></pre></td></tr></table></div></div><h3 id=新建站点>新建站点<a hidden class=anchor aria-hidden=true href=#新建站点>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hugo new site chensoul.github.io -y yaml
</span></span></code></pre></td></tr></table></div></div><p>上述命令会生成一个名为 <code>chensoul.github.io</code> 的文件夹，下面对文件夹结构做个说明：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ tree chensoul.github.io
</span></span><span class=line><span class=cl>chensoul.github.io
</span></span><span class=line><span class=cl>├── archetypes
</span></span><span class=line><span class=cl>│   └── default.md
</span></span><span class=line><span class=cl>├── config.yaml
</span></span><span class=line><span class=cl>├── content
</span></span><span class=line><span class=cl>├── data
</span></span><span class=line><span class=cl>├── layouts
</span></span><span class=line><span class=cl>├── static
</span></span><span class=line><span class=cl>└── themes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=m>6</span> directories, <span class=m>2</span> files
</span></span></code></pre></td></tr></table></div></div><p>新建的站点，还没有加入 Git 版本管理，进入到这个目录下，执行一下如下命令，完成 Git Repo 的初始化：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> chensoul.github.io
</span></span><span class=line><span class=cl>git init .
</span></span></code></pre></td></tr></table></div></div><p>新建站点后，我们开始添加主题。</p><h3 id=添加主题>添加主题<a hidden class=anchor aria-hidden=true href=#添加主题>#</a></h3><p>在 Hugo 的官网上 <a href=https://themes.gohugo.io/ target=_blank>Hugo Themes</a> 有非常非常多的主题，可以根据自己的喜好选择一个主题。这里，我使用的是 hugo-theme-den 主题。</p><p>使用 git submodule&ndash;helper 下载主题到 theme 目录下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git submodule--helper add https://github.com/shaform/hugo-theme-den themes/den --depth<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git submodule--helper update --init --recursive <span class=c1># needed when you reclone your repo (submodules may not get cloned automatically)</span>
</span></span></code></pre></td></tr></table></div></div><p>以后，当主题有更新时，执行下面命令更新：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --remote --merge
</span></span></code></pre></td></tr></table></div></div><p>如果遇到异常，可以参考<a href=https://xuzhijvn.github.io/zh-cn/posts/other/git-submodule-update-init-recursive/ target=_blank>文章</a>解决。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>fatal: remote error: upload-pack: not our ref fc7223ca00124e8f5b5b354457379071e2fd091b
</span></span></code></pre></td></tr></table></div></div><h3 id=启动>启动<a hidden class=anchor aria-hidden=true href=#启动>#</a></h3><p>启动预览：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hugo server
</span></span></code></pre></td></tr></table></div></div><p>默认是 <code>1313</code> 端口号，在浏览器中直接访问 http://localhost:1313/ 就可以访问到新建的博客了。</p><h2 id=定制化>定制化<a hidden class=anchor aria-hidden=true href=#定制化>#</a></h2><h3 id=站点信息>站点信息<a hidden class=anchor aria-hidden=true href=#站点信息>#</a></h3><p>配置网站的基本信息，将 config.yaml 修改如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>baseURL: https://blog.chensoul.cc/
</span></span><span class=line><span class=cl>title: ChenSoul
</span></span><span class=line><span class=cl>theme: den
</span></span><span class=line><span class=cl>enableRobotsTXT: <span class=nb>true</span>
</span></span><span class=line><span class=cl>enableEmoji: <span class=nb>true</span>
</span></span><span class=line><span class=cl>hasCJKLanguage: <span class=nb>true</span>
</span></span><span class=line><span class=cl>preserveTaxonomyNames: <span class=nb>true</span>
</span></span><span class=line><span class=cl>rssLimit: <span class=m>100</span>
</span></span><span class=line><span class=cl>page_view_conter: <span class=nb>true</span>
</span></span><span class=line><span class=cl>enableRelated: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Copyright, appears in the footer</span>
</span></span><span class=line><span class=cl><span class=c1># copyright = &#34;&#34;             # default: author.name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Pagination</span>
</span></span><span class=line><span class=cl><span class=c1># number of entries per page for archives, tags and categories</span>
</span></span><span class=line><span class=cl><span class=c1># since we don&#39;t have list view, recommend a large value</span>
</span></span><span class=line><span class=cl>paginate: <span class=m>20</span>
</span></span><span class=line><span class=cl>paginatePath: <span class=s2>&#34;page&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Syntax Hightlight</span>
</span></span><span class=line><span class=cl>PygmentsCodeFences: <span class=nb>true</span>
</span></span><span class=line><span class=cl>PygmentsUseClasses: <span class=nb>true</span>    <span class=c1># required for shhighlight shortcode</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># service plugins</span>
</span></span><span class=line><span class=cl>disqusShortname: <span class=s2>&#34;&#34;</span>         <span class=c1># disqus_shortname</span>
</span></span><span class=line><span class=cl>googleAnalytics: <span class=s2>&#34;&#34;</span>         <span class=c1># UA-XXXXXXXX-X</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># language support # en / zh / other... translations present in i18n/</span>
</span></span><span class=line><span class=cl>defaultContentLanguage: <span class=s2>&#34;zh&#34;</span>           <span class=c1># Default language to use</span>
</span></span><span class=line><span class=cl>defaultContentLanguageInSubdir: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>permalinks:
</span></span><span class=line><span class=cl>  posts: /posts/:slug/
</span></span><span class=line><span class=cl>  categories: /categories/:slug/
</span></span><span class=line><span class=cl>  tags: /tags/:slug/
</span></span><span class=line><span class=cl>  pages: /:slug/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>author:
</span></span><span class=line><span class=cl>  name: chensoul
</span></span><span class=line><span class=cl>sitemap:
</span></span><span class=line><span class=cl>  changefreq: weekly
</span></span><span class=line><span class=cl>  priority: 0.5
</span></span><span class=line><span class=cl>  filename: sitemap.xml
</span></span><span class=line><span class=cl>params:
</span></span><span class=line><span class=cl>  since: <span class=s2>&#34;2020&#34;</span>
</span></span><span class=line><span class=cl>  rssFullContent: <span class=nb>true</span>
</span></span><span class=line><span class=cl>  keywords:
</span></span><span class=line><span class=cl>    - devops
</span></span><span class=line><span class=cl>    - programming
</span></span><span class=line><span class=cl>  description: Programming <span class=p>|</span> Devops
</span></span><span class=line><span class=cl>  logoTitle: ChenSoul
</span></span><span class=line><span class=cl>  siteLogoImage: images/fly.png
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># headerTitle = &#34;chensoul&#34;                   # default: title</span>
</span></span><span class=line><span class=cl>  headerImage: images/background.webp
</span></span><span class=line><span class=cl>  showAuthorCard: <span class=nb>true</span>
</span></span><span class=line><span class=cl>  showMenuLanguages: <span class=nb>true</span>
</span></span><span class=line><span class=cl>  autoLoadComments: <span class=nb>false</span>
</span></span><span class=line><span class=cl>  paginateOriginalStyle: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># The date format to use; for a list of valid formats, see https://gohugo.io/functions/format/</span>
</span></span><span class=line><span class=cl>  dateFormatToUse: 2006-01-02
</span></span><span class=line><span class=cl>  google_verification: <span class=s2>&#34;D8XBzUhT4irNUQLKut79HFni0v3Xow4FY-oxUcsUlVk&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># Link custom CSS and JS assets</span>
</span></span><span class=line><span class=cl>  <span class=c1>#   (relative to /static/css and /static/js respectively)</span>
</span></span><span class=line><span class=cl>  customCSS: <span class=o>[]</span>
</span></span><span class=line><span class=cl>  customJS: <span class=o>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>markup:
</span></span><span class=line><span class=cl>  goldmark:
</span></span><span class=line><span class=cl>    renderer:
</span></span><span class=line><span class=cl>      unsafe: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ------------------------------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># ---- Related Articles --------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># ------------------------------------- #</span>
</span></span><span class=line><span class=cl>related:
</span></span><span class=line><span class=cl>  <span class=c1># Only include matches with rank &gt;= threshold. This is a normalized rank between 0 and 100.</span>
</span></span><span class=line><span class=cl>  threshold: <span class=m>50</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># To get stable &#34;See also&#34; sections we, by default, exclude newer related pages.</span>
</span></span><span class=line><span class=cl>  includeNewer: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># Will lower case keywords in both queries and in the indexes.</span>
</span></span><span class=line><span class=cl>  toLower: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  indices:
</span></span><span class=line><span class=cl>    - name: categories
</span></span><span class=line><span class=cl>      weight: <span class=m>200</span>
</span></span><span class=line><span class=cl>    - name: keywords
</span></span><span class=line><span class=cl>      weight: <span class=m>150</span>
</span></span><span class=line><span class=cl>    - name: tags
</span></span><span class=line><span class=cl>      weight: <span class=m>100</span>
</span></span><span class=line><span class=cl>languages:
</span></span><span class=line><span class=cl>  zh:
</span></span><span class=line><span class=cl>    languageCode: zh
</span></span><span class=line><span class=cl>    languageName: 中文
</span></span><span class=line><span class=cl>    contentDir: content
</span></span><span class=line><span class=cl>    weight: <span class=m>1</span>
</span></span><span class=line><span class=cl>    params:
</span></span><span class=line><span class=cl>      description: Devops <span class=p>|</span> Programming
</span></span><span class=line><span class=cl>    menu:
</span></span><span class=line><span class=cl>      main:
</span></span><span class=line><span class=cl>        - name: 思考
</span></span><span class=line><span class=cl>          weight: <span class=m>10</span>
</span></span><span class=line><span class=cl>          identifier: idea
</span></span><span class=line><span class=cl>          url: categories/idea/
</span></span><span class=line><span class=cl>      social:
</span></span><span class=line><span class=cl>        - name: Telegram
</span></span><span class=line><span class=cl>          weight: <span class=m>10</span>
</span></span><span class=line><span class=cl>          identifier: telegram
</span></span><span class=line><span class=cl>          url: https://t.me/chensouls
</span></span><span class=line><span class=cl>        - name: Twitter
</span></span><span class=line><span class=cl>          weight: <span class=m>20</span>
</span></span><span class=line><span class=cl>          identifier: twitter
</span></span><span class=line><span class=cl>          url: https://twitter.com/ichensoul
</span></span><span class=line><span class=cl>        - name: BiliBili
</span></span><span class=line><span class=cl>          weight: <span class=m>40</span>
</span></span><span class=line><span class=cl>          identifier: bilibili
</span></span><span class=line><span class=cl>          url: https://space.bilibili.com/699805065/
</span></span><span class=line><span class=cl>      links:
</span></span><span class=line><span class=cl>        - name: GitHub
</span></span><span class=line><span class=cl>          weight: <span class=m>10</span>
</span></span><span class=line><span class=cl>          identifier: github
</span></span><span class=line><span class=cl>          url: https://github.com/chensoul
</span></span><span class=line><span class=cl>        - name: Services
</span></span><span class=line><span class=cl>          weight: <span class=m>20</span>
</span></span><span class=line><span class=cl>          identifier: services-status
</span></span><span class=line><span class=cl>          url: https://uptime.chensoul.cc/status/services
</span></span><span class=line><span class=cl>        - name: Analytics
</span></span><span class=line><span class=cl>          weight: <span class=m>30</span>
</span></span><span class=line><span class=cl>          identifier: chensoul-analytics
</span></span><span class=line><span class=cl>          url: https://data.chensoul.cc/share/8YKX7FUa/pseudoyu-blog
</span></span></code></pre></td></tr></table></div></div><h2 id=部署>部署<a hidden class=anchor aria-hidden=true href=#部署>#</a></h2><h3 id=github-actions-部署>GitHub Actions 部署<a hidden class=anchor aria-hidden=true href=#github-actions-部署>#</a></h3><p><strong>1、首先在 github 里创建一个仓库：chensoul.github.io</strong></p><p><strong>2、将本地文件提交到 github</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> chensoul.github.io
</span></span><span class=line><span class=cl>git init .
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;# chensoul.github.io&#34;</span> &gt;&gt; README.md
</span></span><span class=line><span class=cl>git remote add origin git@github.com:chensoul/chensoul.github.io.git
</span></span></code></pre></td></tr></table></div></div><p><strong>3、将本地代码推送到仓库</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git commit -m <span class=s2>&#34;first commit&#34;</span>
</span></span><span class=line><span class=cl>git push -u origin main
</span></span></code></pre></td></tr></table></div></div><p><strong>4、创建 GitHub Actions 的 workflow</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p .github/workflows
</span></span><span class=line><span class=cl>touch .github/workflows/gh-page.yml
</span></span></code></pre></td></tr></table></div></div><p>gh-page.yml 内容如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>github pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-18.04</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout-minutes</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=l>latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>上面的工作流是在 gh-pages 分支上触发，当有代码提交时候，会运行 hugo 命令生成静态文件（public 目录），并且将他们推送到 main 分支。</p><p>所以，我们需要基于当前分支创建一个新分支 gh-pages ，并且推送到远程仓库：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git branch gh-pages
</span></span><span class=line><span class=cl>git checkout gh-pages
</span></span><span class=line><span class=cl>git push origin gh-pages
</span></span></code></pre></td></tr></table></div></div><p><strong>5、修改代码，推送到仓库，触发工作流</strong></p><p>在本地修改某个文件，提交代码，然后在 github <a href=https://github.com/chensoul/chensoul.github.io/actions target=_blank>网站</a> 查看工作流</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git push origin gh-pages
</span></span></code></pre></td></tr></table></div></div><p><strong>7、设置自定义域名</strong></p><p>参考<a href=https://docs.github.com/cn/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain target=_blank>管理 GitHub Pages 站点的自定义域</a>，添加一个自定义域名：blog.chensoul.cc：</p><p><img loading=lazy src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/github-page-settings.png alt=github-page-settings></p><p>或者，在仓库的 static 目录创建一个 CNAME 文件，内容为：blog.chensoul.cc，然后，保存提交，Github Actions 会将该文件推送到 main 分支。</p><p>然后，在亚马逊网站添加 <a href=https://console.aws.amazon.com/route53/v2/hostedzones# target=_blank>CNAME 记录</a>：</p><p><img loading=lazy src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/amazon-dns-settings.png alt=amazon-dns-settings></p><p>8、部署到 CloudFlare Pages</p><p>参考 <a href=https://hee.ink/p/%E4%BB%8E-github-pages-%E8%BF%81%E7%A7%BB%E5%88%B0-cloudflare-pages-%E7%9A%84%E4%BD%93%E9%AA%8C%E4%B8%8E%E8%B8%A9%E5%9D%91%E5%B0%8F%E8%AE%B0/ target=_blank>从 GitHub Pages 迁移到 CloudFlare Pages 的体验与踩坑小记</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chensoul.cc/tags/hugo/>Hugo</a></li><li><a href=https://blog.chensoul.cc/tags/github/>Github</a></li></ul><nav class=paginav><a class=prev href=https://blog.chensoul.cc/posts/2021/09/09/mac-development-environment-setup/><span class=title>« Prev</span><br><span>Mac开发环境配置</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on x" href="https://x.com/intent/tweet/?text=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f&amp;hashtags=hugo%2cgithub"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f&amp;title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2&amp;summary=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2&amp;source=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f&title=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2%20-%20https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on telegram" href="https://telegram.me/share/url?text=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从零开始搭建个人博客 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2&u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2021%2f09%2f09%2fbuild-personal-blog-from-zero%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.chensoul.cc/>ChenSoul</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script async src=https://umami.chensoul.cc/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>