<!doctype html><html lang=zh itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.110.0"><meta charset=utf-8><title>å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“ Â· ChenSoul</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="å‰è¨€ æœ¬ç¯‡æ˜¯å¯¹ 2023-01-23 åˆ° 2023-01-29 è¿™å‘¨ç”Ÿæ´»çš„è®°å½•ä¸æ€è€ƒã€‚é¦–å‘åœ¨æˆ‘çš„ä¸ªäºº åšå®¢ï¼Œä½ å¯ä»¥ç§»æ­¥äº†è§£æ›´å¤šæˆ–è€…ç»™æˆ‘ç•™è¨€ã€‚ è¿‡å¹´ è¿™å‘¨å¤„äºè¿‡å¹´åƒå–æ‹œå¹´æ¨¡å¼ï¼Œé™¤äº†è…ŠæœˆäºŒåä¹å’Œæ­£"><meta name=keywords content="devops,programming"><meta name=google-site-verification content="D8XBzUhT4irNUQLKut79HFni0v3Xow4FY-oxUcsUlVk"><link rel=canonical href=https://blog.chensoul.com/posts/2023/01/30/weekly_review_4/><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://blog.chensoul.com/css/den.css><link rel=stylesheet href=https://blog.chensoul.com/css/custom.min.css><link rel=preload as=font type=font/woff2 href=/css/font/open-sans.css><link rel=stylesheet type=text/css href=/css/font/open-sans.css media=print onload='this.media="all"'><meta property="og:title" content="å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“"><meta property="og:description" content="å‰è¨€ æœ¬ç¯‡æ˜¯å¯¹ 2023-01-23 åˆ° 2023-01-29 è¿™å‘¨ç”Ÿæ´»çš„è®°å½•ä¸æ€è€ƒã€‚é¦–å‘åœ¨æˆ‘çš„ä¸ªäºº åšå®¢ï¼Œä½ å¯ä»¥ç§»æ­¥äº†è§£æ›´å¤šæˆ–è€…ç»™æˆ‘ç•™è¨€ã€‚ è¿‡å¹´ è¿™å‘¨å¤„äºè¿‡å¹´åƒå–æ‹œå¹´æ¨¡å¼ï¼Œé™¤äº†è…ŠæœˆäºŒåä¹å’Œæ­£"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.com/posts/2023/01/30/weekly_review_4/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-30T09:47:03+08:00"><meta property="article:modified_time" content="2023-01-30T09:47:03+08:00"><meta itemprop=name content="å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“"><meta itemprop=description content="å‰è¨€ æœ¬ç¯‡æ˜¯å¯¹ 2023-01-23 åˆ° 2023-01-29 è¿™å‘¨ç”Ÿæ´»çš„è®°å½•ä¸æ€è€ƒã€‚é¦–å‘åœ¨æˆ‘çš„ä¸ªäºº åšå®¢ï¼Œä½ å¯ä»¥ç§»æ­¥äº†è§£æ›´å¤šæˆ–è€…ç»™æˆ‘ç•™è¨€ã€‚ è¿‡å¹´ è¿™å‘¨å¤„äºè¿‡å¹´åƒå–æ‹œå¹´æ¨¡å¼ï¼Œé™¤äº†è…ŠæœˆäºŒåä¹å’Œæ­£"><meta itemprop=datePublished content="2023-01-30T09:47:03+08:00"><meta itemprop=dateModified content="2023-01-30T09:47:03+08:00"><meta itemprop=wordCount content="1133"><meta itemprop=keywords content="review,feign,sentry,micrometer,feishu,"><meta name=twitter:card content="summary"><meta name=twitter:title content="å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“"><meta name=twitter:description content="å‰è¨€ æœ¬ç¯‡æ˜¯å¯¹ 2023-01-23 åˆ° 2023-01-29 è¿™å‘¨ç”Ÿæ´»çš„è®°å½•ä¸æ€è€ƒã€‚é¦–å‘åœ¨æˆ‘çš„ä¸ªäºº åšå®¢ï¼Œä½ å¯ä»¥ç§»æ­¥äº†è§£æ›´å¤šæˆ–è€…ç»™æˆ‘ç•™è¨€ã€‚ è¿‡å¹´ è¿™å‘¨å¤„äºè¿‡å¹´åƒå–æ‹œå¹´æ¨¡å¼ï¼Œé™¤äº†è…ŠæœˆäºŒåä¹å’Œæ­£"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://blog.chensoul.com/images/background.webp);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://blog.chensoul.com/><img class="mr20 header-logo-image" src=https://blog.chensoul.com/images/fly.png alt=logo>
ChenSoul</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/categories/ideas/>æ€è€ƒ</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/memos/>å˜€å’•</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/links/>å‹é“¾</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/about/>å…³äº</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/search/>æœç´¢</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“</h1><p class=header-date>ä½œè€…:
chensoul
| <span>1133 å­—, 3 åˆ†é’Ÿ</span>
| 2023-01-30
| åˆ†ç±»:
<a href=https://blog.chensoul.com/categories/ideas/>Ideas</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://blog.chensoul.com/tags/feign/>feign</a>,
<a href=https://blog.chensoul.com/tags/feishu/>feishu</a>,
<a href=https://blog.chensoul.com/tags/micrometer/>micrometer</a>,
<a href=https://blog.chensoul.com/tags/review/>review</a>,
<a href=https://blog.chensoul.com/tags/sentry/>sentry</a></p></div></div></div></div></div><main><div class="container content"><article><h2 id=å‰è¨€>å‰è¨€</h2><p>æœ¬ç¯‡æ˜¯å¯¹ <code>2023-01-23</code> åˆ° <code>2023-01-29</code> è¿™å‘¨ç”Ÿæ´»çš„è®°å½•ä¸æ€è€ƒã€‚é¦–å‘åœ¨æˆ‘çš„ä¸ªäºº <a href=https://blog.chensoul.com/>åšå®¢</a>ï¼Œä½ å¯ä»¥ç§»æ­¥äº†è§£æ›´å¤šæˆ–è€…ç»™æˆ‘ç•™è¨€ã€‚</p><h2 id=è¿‡å¹´>è¿‡å¹´</h2><p>è¿™å‘¨å¤„äºè¿‡å¹´åƒå–æ‹œå¹´æ¨¡å¼ï¼Œé™¤äº†è…ŠæœˆäºŒåä¹å’Œæ­£æœˆåˆä¸€ï¼Œå…¶ä»–æ—¶é—´éƒ½æ˜¯å’Œè€å©†åœ¨è·¯ä¸Šã€‚å› ä¸ºæ˜¯ç»“å©šç¬¬ä¸€ä¸ªæ–°å¹´ï¼Œéœ€è¦å¸¦ç€è€å©†å»å„ä¸ªäº²æˆšå®¶æ‹œå¹´ã€‚å› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡åœ¨æ–°æˆ¿è¿‡å¹´ï¼Œå°±æŠŠè€çˆ¸ä»å†œæ‘æ¥è¿‡æ¥ä¸€èµ·è¿‡å¹´ã€‚å› ä¸ºå¹´å‰æ²¡æœ‰æ¥å¾—åŠä¹°è½¦ï¼Œå»å“ªé‡Œéƒ½ä¸æ–¹ä¾¿ï¼Œéƒ½è¦éœ€è¦æ»´æ»´æ‰“è½¦ã€‚ä¸ºæ­¤ï¼Œæ‰“è½¦èŠ±äº†ä¸å°‘é’±ï¼Œå½“ç„¶ï¼Œç»™çº¢åŒ…ä¹Ÿç»™äº†ä¸å°‘é’±ã€‚è¶åˆä¸€ä¸ç”¨æ‹œå¹´çš„ç¼éš™æ—¶é—´ï¼Œå¸¦è€å©†å’Œè€çˆ¸å»çœ‹äº†ä¸¤åœºç”µå½±ã€Šæ— åã€‹å’Œã€Šäº¤æ¢äººç”Ÿã€‹ã€‚è€çˆ¸å¾ˆå°‘å»çœ‹ç”µå½±é™¢çœ‹ç”µå½±ï¼Œå¬åˆ°è¦å»çœ‹ç”µå½±ï¼Œåƒä¸ªå°å­©ä¼¼çš„ï¼Œé¥­è¿˜åƒå®Œï¼Œå°±è·‘å»ç”µæ¢¯é—¨å£ç­‰ç”µæ¢¯ã€‚è¿™ä¸¤åœºç”µå½±ï¼Œçœ‹çš„æˆ‘çŒç¡æ¥äº†ï¼Œå€’æ˜¯åˆäºŒæ™šä¸Šçœ‹ã€Šæ»¡æ±Ÿçº¢ã€‹ç¡æ„å…¨æ— ã€‚</p><p>æ€»ç»“ä¸‹æ¥ï¼Œè¿™ä¸ªå¹´è¿‡çš„ä¸è½»æ¾ï¼Œèº«ä½“å¿™ç¢Œï¼Œå¿ƒé‡Œå¹¸ç¦ğŸ¥°ã€‚</p><h2 id=å‘ä¸Šç®¡ç†>å‘ä¸Šç®¡ç†</h2><p>å¹´å‰ï¼Œéƒ¨é—¨é¢†å¯¼æ‰¾æˆ‘è°ˆ 2022 å¹´ç»©æ•ˆç»“æœæ—¶å€™ï¼Œæåˆ°æˆ‘å¯ä»¥â€œå‘ä¸Šç®¡ç†â€ä»–ã€‚æœ€è¿‘ä» <a href=https://www.duyidong.com/>æœå±¹ä¸œ</a> çš„åšå®¢ <a href=https://www.duyidong.com/2020/01/01/2019-learn-from-alibaba/>è¿™ä¸€å¹´æˆ‘åœ¨é˜¿é‡Œå­¦åˆ°çš„</a> ä¹Ÿçœ‹åˆ°äº†ä»–åœ¨é˜¿é‡Œå·¥ä½œä¸€å¹´åæ‚Ÿåˆ°å¯¹å‘ä¸Šç®¡ç†çš„ç†è§£ã€‚</p><ul><li>åŠæ—¶å’Œè€æ¿è¡¨è¾¾æƒ³æ³•</li><li>è®©è€æ¿çŸ¥é“ä½ åœ¨å¿™ä»€ä¹ˆ</li><li>ä¸»åŠ¨å¸®è€æ¿åšä¸€äº›è„æ´»ç´¯æ´»</li></ul><p>å‰ä¸¤æ¡æ˜¯è€æ¿çŸ¥é“ä½ çš„æƒ³æ³•ï¼Œåé¢ä¸€æ¡æ˜¯å¸®è€æ¿è§£å†³é—®é¢˜ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥å¸®è€æ¿è§„é¿é£é™©ã€‚</p><h2 id=æœ¬å‘¨å·¥ä½œ>æœ¬å‘¨å·¥ä½œ</h2><p>è¿™æ˜¯å¹´åçš„ç¬¬ä¸€å‘¨ï¼Œä¸»è¦æ˜¯å¤„ç†å¹´å‰æ²¡æœ‰å®Œæˆçš„é¡¹ç›®è¿­ä»£ã€‚</p><h3 id=feign-é›†æˆ-micometer>Feign é›†æˆ Micometer</h3><p>OpenFeign å®˜æ–¹æä¾›äº† feign-micrometer æ¥æ”¯æŒ feign é›†æˆ micrometerã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>GitHub</span> <span class=n>github</span> <span class=o>=</span> <span class=n>Feign</span><span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>addCapability</span><span class=o>(</span><span class=k>new</span> <span class=n>MicrometerCapability</span><span class=o>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>target</span><span class=o>(</span><span class=n>GitHub</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=s>&#34;https://api.github.com&#34;</span><span class=o>);</span>
</span></span></code></pre></div><p>å…¶æœ¬è´¨æ˜¯å¯¹ feign æ‹¦æˆªå™¨ã€clientã€encoderã€decoder è¿›è¡Œå°è£…ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­åœ¨æ²¡æœ‰è·å–åˆ°æŒ‡æ ‡ã€‚æ•…ï¼Œæ”¹ä¸ºä½¿ç”¨zè‡ªå®šä¹‰æ‹¦æˆªå™¨å’Œ ErrorCoder æ¥è®°å½•è¯·æ±‚æ¬¡æ•°å’Œå¤±è´¥æ¬¡æ•°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Bean</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>GitHub</span> <span class=nf>gihhub</span><span class=o>(</span><span class=n>MetricsInterceptor</span> <span class=n>metricsInterceptor</span><span class=o>){</span>
</span></span><span class=line><span class=cl>  <span class=n>GitHub</span> <span class=n>github</span> <span class=o>=</span> <span class=n>Feign</span><span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>requestInterceptor</span><span class=o>(</span><span class=n>metricsInterceptor</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>errorDecoder</span><span class=o>(</span><span class=k>new</span> <span class=n>MetricsErrorDecoder</span><span class=o>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>target</span><span class=o>(</span><span class=n>GitHub</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=s>&#34;https://api.github.com&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>MetricsInterceptor ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MetricsInterceptor</span> <span class=kd>implements</span> <span class=n>RequestInterceptor</span><span class=o>,</span> <span class=n>MeterBinder</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>MeterRegistry</span> <span class=n>meterRegistry</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>FEIGN_REQUEST</span> <span class=o>=</span> <span class=s>&#34;feign.requests&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>FEIGN_REQUEST_ERROR</span> <span class=o>=</span> <span class=s>&#34;feign.requests.error&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>MetricsInterceptor</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>apply</span><span class=o>(</span><span class=n>RequestTemplate</span> <span class=n>template</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Micrometers</span><span class=o>.</span><span class=na>async</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>String</span> <span class=n>methodKey</span> <span class=o>=</span> <span class=n>template</span><span class=o>.</span><span class=na>methodMetadata</span><span class=o>().</span><span class=na>configKey</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>Counter</span> <span class=n>counter</span> <span class=o>=</span> <span class=n>Counter</span><span class=o>.</span><span class=na>builder</span><span class=o>(</span><span class=s>&#34;feign.requests&#34;</span><span class=o>).</span><span class=na>tags</span><span class=o>(</span><span class=k>new</span> <span class=n>String</span><span class=o>[]{</span><span class=s>&#34;method&#34;</span><span class=o>,</span> <span class=n>StringUtils</span><span class=o>.</span><span class=na>substringBefore</span><span class=o>(</span><span class=n>methodKey</span><span class=o>,</span> <span class=s>&#34;(&#34;</span><span class=o>)}).</span><span class=na>register</span><span class=o>(</span><span class=n>meterRegistry</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>counter</span><span class=o>.</span><span class=na>increment</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>bindTo</span><span class=o>(</span><span class=n>MeterRegistry</span> <span class=n>registry</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>meterRegistry</span> <span class=o>=</span> <span class=n>registry</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>MetricsErrorDecoder ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MetricsErrorDecoder</span> <span class=kd>implements</span> <span class=n>ErrorDecoder</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Logger</span> <span class=n>log</span> <span class=o>=</span> <span class=n>LoggerFactory</span><span class=o>.</span><span class=na>getLogger</span><span class=o>(</span><span class=n>MetricsErrorDecoder</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>MeterRegistry</span> <span class=n>registry</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SimpleMeterRegistry</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>MetricsErrorDecoder</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>metrics</span><span class=o>(</span><span class=n>String</span> <span class=n>methodKey</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Micrometers</span><span class=o>.</span><span class=na>async</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Metrics</span><span class=o>.</span><span class=na>counter</span><span class=o>(</span><span class=s>&#34;feign.requests.error&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>String</span><span class=o>[]{</span><span class=s>&#34;method&#34;</span><span class=o>,</span> <span class=n>StringUtils</span><span class=o>.</span><span class=na>substringBefore</span><span class=o>(</span><span class=n>methodKey</span><span class=o>,</span> <span class=s>&#34;(&#34;</span><span class=o>)}).</span><span class=na>increment</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Exception</span> <span class=nf>decode</span><span class=o>(</span><span class=n>String</span> <span class=n>methodKey</span><span class=o>,</span> <span class=n>Response</span> <span class=n>response</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>metrics</span><span class=o>(</span><span class=n>methodKey</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>FeignException</span> <span class=n>exception</span> <span class=o>=</span> <span class=n>FeignException</span><span class=o>.</span><span class=na>errorStatus</span><span class=o>(</span><span class=n>methodKey</span><span class=o>,</span> <span class=n>response</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>exception</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Counter</span><span class=o>.</span><span class=na>builder</span><span class=o>(</span><span class=s>&#34;feign.requests.error&#34;</span><span class=o>).</span><span class=na>register</span><span class=o>(</span><span class=n>registry</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=sentry-é›†æˆé£ä¹¦é€šçŸ¥>Sentry é›†æˆé£ä¹¦é€šçŸ¥</h3><p>å‚è€ƒ <a href=https://www.ytjia.xyz/blog/2022/05/20/sentry-webhook.html>é€šè¿‡Webhookå®ç°Sentryé”™è¯¯è‡ªåŠ¨åŒ–é£ä¹¦æœºå™¨äººæŠ¥è­¦</a> è¿™ç¯‡æ–‡ç« ï¼Œä½¿ç”¨ fastapi éƒ¨ç½²ä¸€ä¸ª http æœåŠ¡å°† sentry çš„å›è°ƒè½¬å‘åˆ°é£ä¹¦ç¾¤çš„æœºå™¨äººã€‚ç”±äºï¼Œfastapi éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… python3ï¼Œ ä¸ºäº†ä¸æ±¡æŸ“æˆ‘çš„ vpsï¼Œæˆ‘åˆ›å»ºä¸€ä¸ª docker é•œåƒ <a href=https://github.com/chensoul/dockerfiles/tree/master/sentry-feishu-hook>sentry-feishu-hook</a>ï¼Œä¿®æ”¹äº† python è„šæœ¬ä¸­çš„ç¼–è¯‘é”™è¯¯ï¼Œå¹¶åœ¨ vps ä¸Šé€šè¿‡ docker å¯åŠ¨è¯¥æœåŠ¡ã€‚</p><p>å…ˆç¼–è¯‘é•œåƒï¼Œå†è¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -t sentry-feishu-hook .
</span></span><span class=line><span class=cl>docker run -d --name sentry-feishu-hook -p 3080:3080 sentry-feishu-hook
</span></span></code></pre></div><p>æ¥ä¸‹æ¥åœ¨ sentry é¡¹ç›®çš„ WebHooks é‡Œæ·»åŠ  http://ip:3080/hook</p><p><img src=http://chensoul.oss-cn-hangzhou.aliyuncs.com/images/sentry-feishu-webhooks-test.png alt=sentry-feishu-webhooks-test></p><p>ç‚¹å‡» Test Plugin ï¼Œé£ä¹¦ç¾¤ç»„å¯ä»¥æ”¶åˆ°æ¶ˆæ¯ï¼š</p><img src=http://chensoul.oss-cn-hangzhou.aliyuncs.com/images/sentry-feishu-webhooks-test-message.png alt=sentry-feishu-webhooks-test-message style=width:60%><h2 id=å¥½ç‰©åˆ†äº«>å¥½ç‰©åˆ†äº«</h2><ul><li><a href=https://www.warp.dev/>https://www.warp.dev/</a>ï¼šä¸€ä¸ª Rust ç¼–å†™ï¼Œä½¿ç”¨ GPU æ¸²æŸ“çš„ç»ˆç«¯åº”ç”¨ã€‚ç›®æ ‡æ˜¯æå‡å¼€å‘è€…çš„æ•ˆç‡ã€‚</li><li><a href=https://strrl.dev/post/before-2022/restful-api-mock-%E5%B7%A5%E5%85%B7-jsonplaceholder/>Restful API Mock å·¥å…·: JSONPlaceholder</a></li><li><a href=https://netnewswire.com/>NetNewsWire</a>ã€‚Inoreader æœ€è¿‘æ€»æ˜¯æŠ½é£ï¼Œå°±æ”¹ä¸ºä½¿ç”¨ NetNewsWire äº†ã€‚ä½¿ç”¨èµ·æ¥ï¼Œè¿˜æ˜¯æ¯”è¾ƒé¡ºæ»‘ï¼Œé—æ†¾çš„æ˜¯æ²¡æœ‰å®‰å“ Appã€‚</li><li><a href=https://cubox.pro/>Cubox</a>ã€‚æœ€è¿‘çœ‹åˆ°è¿™ä¸ªæ”¶è—å·¥å…·ï¼Œä¸‹è½½äº†ä½¿ç”¨èµ·æ¥ã€‚</li></ul><img src=http://chensoul.oss-cn-hangzhou.aliyuncs.com/images/cubox-screen.png alt=cubox-screen style=width:60%></article><h2>ç›¸å…³æ–‡ç« </h2><dl class=row><dt class=col-md-3>2023-02-21</dt><dd class=col-md-9><a href=/posts/2023/02/21/weekly_review_7/>å‘¨æŠ¥-7ï½œç»ƒè½¦ã€åšå®¢ä¼˜åŒ–ã€æ³¨å†ŒChatGPTè´¦å·</a></dd><dt class=col-md-3>2023-02-13</dt><dd class=col-md-9><a href=/posts/2023/02/13/weekly_review_6/>å‘¨æŠ¥-6ï½œä¹°è½¦å’Œé€‰å·ã€ç²‰è‰²ç†è®º</a></dd><dt class=col-md-3>2023-02-07</dt><dd class=col-md-9><a href=/posts/2023/02/07/weekly_review_5/>å‘¨æŠ¥-5ï½œé¡¹ç›®äº‹æ•…ã€ç‰™ç–¼ã€Damus</a></dd><dt class=col-md-3>2023-01-25</dt><dd class=col-md-9><a href=/posts/2023/01/25/weekly_review_3/>å‘¨æŠ¥-3ï½œåšå®¢å®šåˆ¶ã€VPSéƒ¨ç½²æœåŠ¡</a></dd><dt class=col-md-3>2023-01-15</dt><dd class=col-md-9><a href=/posts/2023/01/15/weekly_review_2/>å‘¨æŠ¥-2ï½œåšå®¢é‡æ„</a></dd><dt class=col-md-3>2023-01-08</dt><dd class=col-md-9><a href=/posts/2023/01/08/weekly_review_1/>å‘¨æŠ¥-1ï½œå¼€å§‹å†™å‘¨æŠ¥ã€å†¥æƒ³</a></dd></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://blog.chensoul.com><img src=/images/author.webp alt=chensoul></a></div><div class=author-content><p class=author-title>ä½œè€…</p><p class=author-name>chensoul</p><p class=author-desc>Java å¼€å‘å·¥ç¨‹å¸ˆï¼Œå–œæ¬¢æ¢ç´¢æ–°æŠ€æœ¯ã€‚ å¯ä»¥åœ¨ <a href=https://github.com/chensoul>GitHub</a> äº†è§£æ›´å¤šå…³äºæˆ‘çš„ä¿¡æ¯ï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘çš„ <a href=https://t.me/chensoul_share>Telegram</a> é¢‘é“ã€‚</p></div></div></div><div align=center><div class=comment-underline></div></div><br><div id=cusdis_thread data-host=https://cusdis.chensoul.com data-app-id=3fce9b16-7416-4c74-9786-757bf28c1b8b data-page-id=b91118d84cdbdacbadd3ff836e1bd67c data-page-url=https://blog.chensoul.com/posts/2023/01/30/weekly_review_4/ data-page-title=å‘¨æŠ¥-4ï½œè¿‡å¹´ã€å‘ä¸Šç®¡ç†ã€å·¥ä½œå‘¨æ€»ç»“></div><script async defer src=/js/cusdis.min.js></script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>ç½‘ç«™åœ°å›¾</div><ul class=list-unstyled><li><a href=https://blog.chensoul.com/tags/>æ ‡ç­¾</a></li><li><a href=https://blog.chensoul.com/categories/>åˆ†ç±»</a></li><li><a rel=alternate type=application/rss+xml href=https://blog.chensoul.com/index.xml></i>RSS</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>ç¤¾äº¤</div><ul class=list-unstyled><li><a href=https://t.me/chensoul_share rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/chensoul_eth rel=noopener target=_blank>Twitter</a></li><li><a href=https://github.com/chensoul rel=noopener target=_blank>GitHub</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>å…³äº</div><ul class=list-unstyled><li><a href=https://blog.chensoul.com/memos rel=noopener target=_blank>å˜€å’•</a></li><li><a href=https://blog.chensoul.com/links rel=noopener target=_blank>å‹é“¾</a></li><li><a href=https://blog.chensoul.com/about rel=noopener target=_blank>å…³äº</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em>Blog <a href=https://umami.chensoul.com/share/zWO2pDuP/chenshou rel=noopener target=_blank>analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo</a></em></small><br><small><em>Theme - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>Den</a></em></small><br><small>&copy;
chensoul
2020 -
2023</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var topButton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(topButton.style.visibility="visible",topButton.style.opacity="1"):(topButton.style.visibility="hidden",topButton.style.opacity="0")}</script></div></div></div><script async defer data-website-id=f110cfa0-b737-4690-a032-2b9073a57fc3 src=https://umami.chensoul.com/umami.js></script></body></html>