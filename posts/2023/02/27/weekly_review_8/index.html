<!doctype html><html lang=zh itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.111.3"><meta charset=utf-8><title>周报-8｜内存泄漏、公司裁员、练车 · ChenSoul</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="前言 本篇是对 2023-02-20 到 2023-02-26 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。 这篇周报又是在地铁上完成编写的。回顾这一周的工作"><meta name=keywords content="devops,programming"><meta name=google-site-verification content="nBXwg45SBRjTX78SA-mH0asrAbsdu9c1nk0ObSry7aQ"><meta name=baidu-site-verification content="codeva-FYpQY8JdLU"><link rel=canonical href=https://blog.chensoul.com/posts/2023/02/27/weekly_review_8/><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://blog.chensoul.com/css/den.css><link rel=stylesheet href=https://blog.chensoul.com/css/custom.min.css><link rel=preload as=font type=font/woff2 href=/css/font/open-sans.css><link rel=stylesheet type=text/css href=/css/font/open-sans.css media=print onload='this.media="all"'><meta property="og:title" content="周报-8｜内存泄漏、公司裁员、练车"><meta property="og:description" content="前言 本篇是对 2023-02-20 到 2023-02-26 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。 这篇周报又是在地铁上完成编写的。回顾这一周的工作"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.com/posts/2023/02/27/weekly_review_8/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-27T08:00:00+08:00"><meta property="article:modified_time" content="2023-02-27T08:00:00+08:00"><meta itemprop=name content="周报-8｜内存泄漏、公司裁员、练车"><meta itemprop=description content="前言 本篇是对 2023-02-20 到 2023-02-26 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。 这篇周报又是在地铁上完成编写的。回顾这一周的工作"><meta itemprop=datePublished content="2023-02-27T08:00:00+08:00"><meta itemprop=dateModified content="2023-02-27T08:00:00+08:00"><meta itemprop=wordCount content="2570"><meta itemprop=keywords content="review,java,github,jvm,chatgpt,"><meta name=twitter:card content="summary"><meta name=twitter:title content="周报-8｜内存泄漏、公司裁员、练车"><meta name=twitter:description content="前言 本篇是对 2023-02-20 到 2023-02-26 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。 这篇周报又是在地铁上完成编写的。回顾这一周的工作"></head><body id=top><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://blog.chensoul.com/images/background.webp);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://blog.chensoul.com/><img class="mr20 header-logo-image" src=https://blog.chensoul.com/images/fly.png alt=logo>
ChenSoul</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/categories/ideas/>思考</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/categories/notes/>编程</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/search/>搜索</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/memos/>嘀咕</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/links/>友链</a></li><li class=nav-item><a class=nav-link href=https://blog.chensoul.com/about/>关于</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>周报-8｜内存泄漏、公司裁员、练车</h1><p class=header-date>作者:
chensoul
| <span>2570 字, 6 分钟</span>
| 2023-02-27
| 分类:
<a href=https://blog.chensoul.com/categories/ideas/>Ideas</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://blog.chensoul.com/tags/chatgpt/>chatgpt</a>,
<a href=https://blog.chensoul.com/tags/github/>github</a>,
<a href=https://blog.chensoul.com/tags/java/>java</a>,
<a href=https://blog.chensoul.com/tags/jvm/>jvm</a>,
<a href=https://blog.chensoul.com/tags/review/>review</a></p></div></div></div></div></div><main><div class="container content"><article><h2 id=前言>前言</h2><p>本篇是对 <code>2023-02-20</code> 到 <code>2023-02-26</code> 这周生活的记录与思考。首发在我的个人 <a href=https://blog.chensoul.com/>博客</a>，你可以移步了解更多或者给我留言。</p><p>这篇周报又是在地铁上完成编写的。回顾这一周的工作，还是项目测试、修复 bug 和准备上线发布。平静的工作节奏因为突如其来的裁员消息而变得内卷起来，大家下班的时间都纷纷往后移到了20 点左右。周末的时候，还是练车，从汉口开车到新洲。刚开始有点不敢，后来还是鼓起勇气，平安的到达。</p><h2 id=工作>工作</h2><h3 id=内存泄漏>内存泄漏</h3><p>这周线上环境，出现了告警，提示 jvm 出现了 full gc。于是赶紧 dump 内存进行分析查找原因。顺便整理了内存相关的知识。</p><p><strong>什么是内存泄漏？</strong></p><p>这个问题直接问 chatgpt：</p><p><img src=http://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-08-01.png alt=weekly-review-08-01></p><p>内存泄漏（Memory Leak）是指在程序中动态分配的内存由于某些原因程序未能释放或无法释放，导致系统内存的实际可用空间不断减少的现象。内存泄漏的发生会导致程序占用的内存越来越多，最终导致程序崩溃或系统变慢。</p><p>在Java中，程序员通常使用new运算符在堆上分配内存，这些内存不再使用时必须释放，否则就会出现内存泄漏。下面是一些常见的Java内存泄漏的情况：</p><ol><li>对象持有过多的引用</li></ol><p>当一个对象持有其他对象的引用时，这些对象就不能被垃圾收集器回收，导致内存泄漏。比如，一个静态集合（如Map、List）持有了大量对象的引用，但是这些对象已经不再需要了，却因为集合中仍然持有这些对象的引用，导致这些对象无法被回收，造成内存泄漏。</p><ol start=2><li>长时间持有对象锁</li></ol><p>在Java中，如果一个线程获取了一个对象的锁，但是在释放锁之前发生了异常，那么这个锁就不会被释放，从而导致内存泄漏。这种情况特别容易发生在synchronized块中。</p><ol start=3><li>不正确的缓存使用</li></ol><p>如果程序员不正确地使用缓存，就会导致内存泄漏。比如，如果使用一个静态Map来缓存对象，但是不从Map中删除对象，那么这些对象就会一直存在于内存中，造成内存泄漏。</p><ol start=4><li>大量创建临时对象</li></ol><p>如果程序频繁地创建临时对象，而这些对象又没有被及时清除，就会导致内存泄漏。比如，在循环中创建大量的字符串对象，但是没有及时清除，就会导致内存泄漏。</p><p>为了避免内存泄漏，Java程序员可以使用一些技术来优化程序，比如使用缓存池、避免使用不必要的静态变量、使用finalize()方法释放资源等等。</p><p><strong>如何排查内存泄漏？</strong></p><ul><li><p>内存分析工具：内存分析工具可以帮助您找到哪些对象占用了大量的内存。一些常用的内存分析工具包括：Eclipse MAT、VisualVM 和 YourKit。这些工具可以帮助您分析内存快照、查找内存泄漏并确定导致内存泄漏的代码位置。</p></li><li><p>堆转储文件：堆转储文件是一个包含了 JVM 堆中所有对象的快照。您可以使用以下命令生成一个堆转储文件：jmap -dump:format=b,file=heap.bin <pid>，其中<pid>是您的 Java 应用程序的进程 ID。然后，您可以使用内存分析工具来分析该文件。</p></li><li><p>代码审查：在编写代码时，您可以使用一些技巧来避免内存泄漏。例如，您应该确保正确地关闭流和数据库连接，避免在循环中创建对象，以及使用软引用或弱引用来存储缓存数据等。通过仔细审查代码并识别可能导致内存泄漏的部分，可以避免这些问题在运行时发生。</p></li><li><p>监视工具：JVM 提供了一些监视工具，例如 jstat 和 jconsole，可以用于监视 JVM 的内存使用情况。通过监视这些指标，您可以识别是否存在内存泄漏的迹象。</p></li><li><p>代码注入：在您的应用程序中，您可以注入一些代码，例如使用 JMX、AOP 等，以便您可以实时监视内存使用情况，并记录任何内存泄漏迹象。</p></li></ul><p>参考文章</p><ul><li><p><a href=https://www.cnblogs.com/rude3knife/p/13570423.html>一次完整的JVM堆外内存泄漏故障排查记录</a></p></li><li><p><a href=https://droidyue.com/blog/2015/11/28/article-java-8-lambdas-a-peek-under-the-hood>深入探索Java 8 Lambda表达式</a></p></li><li><p><a href=https://blog.csdn.net/weixin_34722015/article/details/114815917>java lambda表达式内存泄露_浅谈Java内存泄露</a></p></li></ul><h3 id=裁员>裁员</h3><p>去年公司就在裁员，陆陆续续裁了几次，每次都是裁两三个，动作都不大，但是很高效。因为部门人数就在五十左右，所以谁没来上班，都能很快察觉。</p><p>公司要在六月份上市，上市之前要使财报好看，就要开源节流、降本增效。节约成本的一个方式就是裁员，据说这次裁员动作比以前都大都迅速，今天提出裁员人数，明天就要给出名单，月底就要走人。</p><p>现在还只是二月份，离六月还有三个月。谁也不知道，后面还会有什么更大的裁员动作。说不定哪天就空出一个工位，说不定哪天领导就换了人，说不定哪天部门就被拆散了。</p><p>互联网公司最大的变化就是变化。之前在阿里工作，公司的价值观里有一条就是拥抱变化。</p><p>拥抱变化的最好方式就是积极面对，主动加班，提高工作效率，增加工作产出。</p><h2 id=生活>生活</h2><h3 id=练车>练车</h3><p>这是买车之后的第二周，还是没有开车去上班。一是因为开车不过熟练，胆子小，不敢开得太快；二是公司楼下的停车位还没有办好。</p><p>周六本想叫朋友过来给我当陪练，后来因为要回新洲，就算了，还是自己开车，带着老婆回新洲。</p><p>老婆科目一考过了，后面因为工作原因就没去练车和考试。她坐副驾驶，一边剥豆子一边提醒我注意交通规则。</p><p>在老婆的坐镇之下，顺利的从汉口开车六十公里到达新洲，路上没有违反交通规则。</p><p>周六下午去看了一下潘塘花朝节，有点失望，没有想象中的热闹。可能因为这不是正宗的花朝节，正宗的应该是在旧街。</p><p>逛了一圈，买了两百菜刀、一个砧板、两颗果树、一盆墨兰花。</p><p>周六从新洲开回阳逻，周日又从阳逻开回老家去看父亲。买车后第一次回家，放了鞭炮🧨。</p><p>中午包饺子，吃完饭就去菜园收割青菜。农村对于城市里上班族来说，一大好处是，每次回家，都可以装满青菜带回城市。</p><p>下午，从老家驱车回阳逻再到汉口。在开车的过程中，发现和总结了一些问题。</p><p>之前开车，总是盯着仪表盘，看车速达到了多少。车速一到 70 多就下意识地松油门和踩刹车。现在开始把眼睛注意力放到前方，不去可以在意车速，只是当导航提示我超速的时候，我白降低一点速度。</p><p>在红绿灯之前，如果不转弯，不要提前换道或者超车，保持中间道路行驶即可。</p><h2 id=好物分享>好物分享</h2><p>虽然大部分有意思的内容会分享在 『<a href=https://t.me/chensoul_share>ChenSoul Share</a>』Telegram 频道，不过还是挑选一部分在这里列举一下，感觉更像一个 newsletter 了。</p><h3 id=一些文章>一些文章</h3><ul><li><p><a href=https://blog.baoshuo.ren/post/actions-ssl-cert/>使用 GitHub Actions 自动申请与部署 SSL 证书</a></p></li><li><p><a href=https://phind.com/>The AI search engine for developers</a></p></li><li><p><a href=https://magickpen.com/>用 AI 写文章</a></p></li><li><p><a href=https://blog.csdn.net/weixin_34722015/article/details/114815917>java lambda表达式内存泄露_浅谈Java内存泄露</a></p></li><li><p><a href=https://kenengba.com/post/3769.html>在家躺着拿工资，是挺过意不去的</a></p></li><li><p><a href=https://blog.mikeoperfect.com/posts/11517/>车辆违章和交通事故处理流程</a></p></li><li><p><a href=https://blog.alswl.com/2020/03/before-code-review/>浅谈 Code Review 之事前准备</a></p></li></ul><h3 id=一些工具>一些工具</h3><h4 id=1raycasthttpswwwraycastcom>1、<a href=https://www.raycast.com/>Raycast</a></h4><p>Raycast是一款想要取代 Spotlight 的快捷启动器，通过 Mac 上面的一些组合键来为让你完成在 Mac 上面的快捷启动，提高你日常当中在 Mac 上面的操作效率，如果以 macOS 系统版本风格来比喻的话，Alfred 的 UI 风格应该能匹配几年前的 macOS 吧，而 Raycast 却是能够驾驭 macOS Big Sur 全新的视觉风格。</p><p><img src=http://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-08-02.png alt=weekly-review-08-02></p><p>以上。</p></article><h2>相关文章</h2><dl class=row><dt class=col-md-3>2023-04-13</dt><dd class=col-md-9><a href=/posts/2023/04/13/weekly_review_14/>周报-14｜如何学习一门编程语言</a></dd><dt class=col-md-3>2023-04-11</dt><dd class=col-md-9><a href=/posts/2023/04/11/enforce-the-singleton-property-with-a-private-constructor-or-an-enum-type/>《Effective Java 3》笔记：使用私有构造函数或枚举类型创建单例</a></dd><dt class=col-md-3>2023-04-03</dt><dd class=col-md-9><a href=/posts/2023/04/03/builder-instead-of-constructors/>《Effective Java 3》笔记：使用构造器代替构造方法</a></dd><dt class=col-md-3>2023-04-03</dt><dd class=col-md-9><a href=/posts/2023/04/03/static-factory-methods-instead-of-constructors/>《Effective Java 3》笔记：静态工厂方法代替构造函数</a></dd><dt class=col-md-3>2023-03-28</dt><dd class=col-md-9><a href=/posts/2023/03/28/weekly_review_12/>周报-12｜车辆被堵、开车总结、Effective Java3笔记</a></dd><dt class=col-md-3>2023-03-20</dt><dd class=col-md-9><a href=/posts/2023/03/20/weekly_review_11/>周报-11｜从语雀迁移到Obsidian</a></dd><dt class=col-md-3>2023-03-13</dt><dd class=col-md-9><a href=/posts/2023/03/13/weekly_review_10/>周报-10｜通过Cloudflare Tunnel访问服务、Vercel部署Cusdis和Umami</a></dd><dt class=col-md-3>2023-03-07</dt><dd class=col-md-9><a href=/posts/2023/03/07/weekly_review_9/>周报-9｜开车总结、博客该写什么、Web3批量空投</a></dd></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://blog.chensoul.com><img src=/images/author.webp alt=chensoul></a></div><div class=author-content><p class=author-title>作者</p><p class=author-name>chensoul</p><p class=author-desc>Java 开发工程师，喜欢探索新技术。 可以在 <a href=https://github.com/chensoul>GitHub</a> 了解更多关于我的信息，也欢迎加入我的 <a href=https://t.me/chensoul_share>Telegram</a> 频道。</p></div></div></div><div align=center><div class=comment-underline></div></div><br><div id=cusdis_thread data-host=https://cusdis.chensoul.com data-app-id=3fce9b16-7416-4c74-9786-757bf28c1b8b data-page-id=8fa549b126ae15c125b9e915e449cd9a data-page-url=https://blog.chensoul.com/posts/2023/02/27/weekly_review_8/ data-page-title=周报-8｜内存泄漏、公司裁员、练车></div><script async defer src=https://cusdis.chensoul.com/js/cusdis.es.js></script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>网站地图</div><ul class=list-unstyled><li><a href=https://blog.chensoul.com/tags/>标签</a></li><li><a href=https://blog.chensoul.com/categories/>分类</a></li><li><a rel=alternate type=application/rss+xml href=https://blog.chensoul.com/index.xml></i>RSS</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>社交</div><ul class=list-unstyled><li><a href=https://t.me/chensoul_share rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/chensoul_eth rel=noopener target=_blank>Twitter</a></li><li><a href=https://github.com/chensoul rel=noopener target=_blank>GitHub</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>关于</div><ul class=list-unstyled><li><a href=https://blog.chensoul.com/memos rel=noopener target=_blank>嘀咕</a></li><li><a href=https://blog.chensoul.com/links rel=noopener target=_blank>友链</a></li><li><a href=https://blog.chensoul.com/about rel=noopener target=_blank>关于</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em>Blog <a href=https://umami.chensoul.com/share/zWO2pDuP/chenshou rel=noopener target=_blank>analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo</a></em></small><br><small><em>Theme - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>Den</a></em></small><br><small>&copy;
chensoul
2020 -
2023</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g style=visibility:visible;opacity:1><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script async defer data-website-id=f110cfa0-b737-4690-a032-2b9073a57fc3 src=https://umami.chensoul.com/umami.js></script></body></html>