<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>周报-11｜从语雀迁移到Obsidian | ChenSoul</title>
<meta name=keywords content="review,yuque,obsidian,nodejs"><meta name=description content="前言 图片：涨渡湖湿地水上森林公园
本篇是对 2023-03-13 到 2023-03-19 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。
这周的工作主要是重构、优化系统，工作节奏比之前轻缓了很多。这周也开始了开车上下班，除去周五去医院做检查，一共开了 4 天车。从汉口到光谷，一共 29 公里，如果早上 6:30 出发，就只需要 50 分钟；如果 6:45 出发，竟然需要两个小时，真是无语了。无奈之下，只能每天早点出门早点到公司，然后，打完卡之后，在公司楼下走路。
这周开始心里默默定了一个 flag，就是每天走路 10000 步。看了一下微信运动，基本上达成了，除了周五晚上因为加班，而少走了 64 步。
从语雀迁移到 Obsidian 上周提到开始使用格志 APP 来写日志，使用了一段时间之后，发现了一些缺点：
部分功能收费 导出的 markdown 不支持图片显示 不支持本地存储 于是，放弃了使用格志 APP，继而在使用了一段时间 Obsidian 之后，改为使用 Obsidian 来写日志和周报。
为了不给自己太大压力，日报每天复盘内容包括以下几方面：
今日待办
学习
工作
生活
健身
导出语雀文档为 markdown 参考 yuque/yuque-exporter 文档，下载 yuque-exporter 之后进行导出操作，发现以下问题：
该项目需要使用的 nodejs 版本为 18.0.4 nodejs 使用正确的版本还是导出失败 于是，改为使用源码编译和运行导出。
1、先下载代码：
git clone https://github.com/yuque/yuque-exporter.git 2、修改 main.ts 中需要导出的语雀知识库地址为自己的仓库地址：
// Determining if an ESM module is main then run the code if (import.meta.url.startsWith(&#34;file:&#34;)) { const modulePath = fileURLToPath(import.meta.url); if (process.argv[1] === modulePath) { const urlPaths = [&#34;chensoul/rose&#34;, &#34;chensoul/growup&#34;, &#34;chensoul/tech&#34;]; await start({ urlPaths }); } } 3、参考 文档 申请语雀 TOKEN。"><meta name=author content="chensoul"><link rel=canonical href=https://blog.chensoul.com/posts/2023/03/20/weekly_review_11/><link crossorigin=anonymous href=/assets/css/stylesheet.min.d6db7ab468e55ea6647d68be426a17bae21ff1cddbf1741e547ed2086d010444.css integrity="sha256-1tt6tGjlXqZkfWi+QmoXuuIf8c3b8XQeVH7SCG0BBEQ=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.chensoul.com/favicon.ico><link rel=apple-touch-icon href=https://blog.chensoul.com/apple-touch-icon.png><meta name=twitter:title content="周报-11｜从语雀迁移到Obsidian | ChenSoul"><meta name=twitter:description content="前言 图片：涨渡湖湿地水上森林公园
本篇是对 2023-03-13 到 2023-03-19 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。
这周的工作主要是重构、优化系统，工作节奏比之前轻缓了很多。这周也开始了开车上下班，除去周五去医院做检查，一共开了 4 天车。从汉口到光谷，一共 29 公里，如果早上 6:30 出发，就只需要 50 分钟；如果 6:45 出发，竟然需要两个小时，真是无语了。无奈之下，只能每天早点出门早点到公司，然后，打完卡之后，在公司楼下走路。
这周开始心里默默定了一个 flag，就是每天走路 10000 步。看了一下微信运动，基本上达成了，除了周五晚上因为加班，而少走了 64 步。
从语雀迁移到 Obsidian 上周提到开始使用格志 APP 来写日志，使用了一段时间之后，发现了一些缺点：
部分功能收费 导出的 markdown 不支持图片显示 不支持本地存储 于是，放弃了使用格志 APP，继而在使用了一段时间 Obsidian 之后，改为使用 Obsidian 来写日志和周报。
为了不给自己太大压力，日报每天复盘内容包括以下几方面：
今日待办
学习
工作
生活
健身
导出语雀文档为 markdown 参考 yuque/yuque-exporter 文档，下载 yuque-exporter 之后进行导出操作，发现以下问题：
该项目需要使用的 nodejs 版本为 18.0.4 nodejs 使用正确的版本还是导出失败 于是，改为使用源码编译和运行导出。
1、先下载代码：
git clone https://github.com/yuque/yuque-exporter.git 2、修改 main.ts 中需要导出的语雀知识库地址为自己的仓库地址：
// Determining if an ESM module is main then run the code if (import.meta.url.startsWith(&#34;file:&#34;)) { const modulePath = fileURLToPath(import.meta.url); if (process.argv[1] === modulePath) { const urlPaths = [&#34;chensoul/rose&#34;, &#34;chensoul/growup&#34;, &#34;chensoul/tech&#34;]; await start({ urlPaths }); } } 3、参考 文档 申请语雀 TOKEN。"><meta property="og:title" content="周报-11｜从语雀迁移到Obsidian | ChenSoul"><meta property="og:description" content="前言 图片：涨渡湖湿地水上森林公园
本篇是对 2023-03-13 到 2023-03-19 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。
这周的工作主要是重构、优化系统，工作节奏比之前轻缓了很多。这周也开始了开车上下班，除去周五去医院做检查，一共开了 4 天车。从汉口到光谷，一共 29 公里，如果早上 6:30 出发，就只需要 50 分钟；如果 6:45 出发，竟然需要两个小时，真是无语了。无奈之下，只能每天早点出门早点到公司，然后，打完卡之后，在公司楼下走路。
这周开始心里默默定了一个 flag，就是每天走路 10000 步。看了一下微信运动，基本上达成了，除了周五晚上因为加班，而少走了 64 步。
从语雀迁移到 Obsidian 上周提到开始使用格志 APP 来写日志，使用了一段时间之后，发现了一些缺点：
部分功能收费 导出的 markdown 不支持图片显示 不支持本地存储 于是，放弃了使用格志 APP，继而在使用了一段时间 Obsidian 之后，改为使用 Obsidian 来写日志和周报。
为了不给自己太大压力，日报每天复盘内容包括以下几方面：
今日待办
学习
工作
生活
健身
导出语雀文档为 markdown 参考 yuque/yuque-exporter 文档，下载 yuque-exporter 之后进行导出操作，发现以下问题：
该项目需要使用的 nodejs 版本为 18.0.4 nodejs 使用正确的版本还是导出失败 于是，改为使用源码编译和运行导出。
1、先下载代码：
git clone https://github.com/yuque/yuque-exporter.git 2、修改 main.ts 中需要导出的语雀知识库地址为自己的仓库地址：
// Determining if an ESM module is main then run the code if (import.meta.url.startsWith(&#34;file:&#34;)) { const modulePath = fileURLToPath(import.meta.url); if (process.argv[1] === modulePath) { const urlPaths = [&#34;chensoul/rose&#34;, &#34;chensoul/growup&#34;, &#34;chensoul/tech&#34;]; await start({ urlPaths }); } } 3、参考 文档 申请语雀 TOKEN。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.com/posts/2023/03/20/weekly_review_11/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-20T11:00:00+08:00"><meta property="article:modified_time" content="2023-03-20T11:00:00+08:00"><meta property="og:site_name" content="ChenSoul"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chensoul.com/posts/"},{"@type":"ListItem","position":2,"name":"周报-11｜从语雀迁移到Obsidian","item":"https://blog.chensoul.com/posts/2023/03/20/weekly_review_11/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"周报-11｜从语雀迁移到Obsidian | ChenSoul","name":"周报-11｜从语雀迁移到Obsidian","description":"前言 图片：涨渡湖湿地水上森林公园\n本篇是对 2023-03-13 到 2023-03-19 这周生活的记录与思考。首发在我的个人 博客，你可以移步了解更多或者给我留言。\n这周的工作主要是重构、优化系统，工作节奏比之前轻缓了很多。这周也开始了开车上下班，除去周五去医院做检查，一共开了 4 天车。从汉口到光谷，一共 29 公里，如果早上 6:30 出发，就只需要 50 分钟；如果 6:45 出发，竟然需要两个小时，真是无语了。无奈之下，只能每天早点出门早点到公司，然后，打完卡之后，在公司楼下走路。\n这周开始心里默默定了一个 flag，就是每天走路 10000 步。看了一下微信运动，基本上达成了，除了周五晚上因为加班，而少走了 64 步。\n从语雀迁移到 Obsidian 上周提到开始使用格志 APP 来写日志，使用了一段时间之后，发现了一些缺点：\n部分功能收费 导出的 markdown 不支持图片显示 不支持本地存储 于是，放弃了使用格志 APP，继而在使用了一段时间 Obsidian 之后，改为使用 Obsidian 来写日志和周报。\n为了不给自己太大压力，日报每天复盘内容包括以下几方面：\n今日待办\n学习\n工作\n生活\n健身\n导出语雀文档为 markdown 参考 yuque/yuque-exporter 文档，下载 yuque-exporter 之后进行导出操作，发现以下问题：\n该项目需要使用的 nodejs 版本为 18.0.4 nodejs 使用正确的版本还是导出失败 于是，改为使用源码编译和运行导出。\n1、先下载代码：\ngit clone https://github.com/yuque/yuque-exporter.git 2、修改 main.ts 中需要导出的语雀知识库地址为自己的仓库地址：\n// Determining if an ESM module is main then run the code if (import.meta.url.startsWith(\u0026#34;file:\u0026#34;)) { const modulePath = fileURLToPath(import.meta.url); if (process.argv[1] === modulePath) { const urlPaths = [\u0026#34;chensoul/rose\u0026#34;, \u0026#34;chensoul/growup\u0026#34;, \u0026#34;chensoul/tech\u0026#34;]; await start({ urlPaths }); } } 3、参考 文档 申请语雀 TOKEN。","keywords":["review","yuque","obsidian","nodejs"],"wordCount":"332","inLanguage":"en","datePublished":"2023-03-20T11:00:00+08:00","dateModified":"2023-03-20T11:00:00+08:00","author":[{"@type":"Person","name":"chensoul"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.com/posts/2023/03/20/weekly_review_11/"},"publisher":{"@type":"Organization","name":"ChenSoul","logo":{"@type":"ImageObject","url":"https://blog.chensoul.com/favicon.ico"}}}</script><meta name=baidu-site-verification content="codeva-FYpQY8JdLU"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chensoul.com/ accesskey=h title="ChenSoul (Alt + H)">ChenSoul</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://blog.chensoul.com/categories/review/ title=总结>总结</a></li><li><a href=https://blog.chensoul.com/categories/ title=分类>分类</a></li><li><a href=https://blog.chensoul.com/tags/ title=标签>标签</a></li><li><a href=https://github.com/chensoul/ title=关于 target=_blank>关于<span class=external-link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-external-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 7H6A2 2 0 004 9v9a2 2 0 002 2h9a2 2 0 002-2v-5"/><line x1="10" y1="14" x2="20" y2="4"/><polyline points="15 4 20 4 20 9"/></svg></span></a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>周报-11｜从语雀迁移到Obsidian</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2023-03-20</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg><span class=post-tags><a href=https://blog.chensoul.com/tags/review/>review</a><a href=https://blog.chensoul.com/tags/yuque/>yuque</a><a href=https://blog.chensoul.com/tags/obsidian/>obsidian</a><a href=https://blog.chensoul.com/tags/nodejs/>nodejs</a></span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>2 min</span></span></div></header><div class="toc side right"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e4%bb%8e%e8%af%ad%e9%9b%80%e8%bf%81%e7%a7%bb%e5%88%b0-obsidian aria-label="从语雀迁移到 Obsidian">从语雀迁移到 Obsidian</a><ul><li><a href=#%e5%af%bc%e5%87%ba%e8%af%ad%e9%9b%80%e6%96%87%e6%a1%a3%e4%b8%ba-markdown aria-label="导出语雀文档为 markdown">导出语雀文档为 markdown</a></li></ul></li><li><a href=#%e5%a5%bd%e7%89%a9%e5%88%86%e4%ba%ab aria-label=好物分享>好物分享</a><ul><li><a href=#%e4%b8%80%e4%ba%9b%e6%96%87%e7%ab%a0 aria-label=一些文章>一些文章</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=前言>前言</h2><p><img loading=lazy src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-11-04.jpeg alt=weekly-review-11-04></p><p>图片：<em>涨渡湖湿地水上森林公园</em></p><p>本篇是对 <code>2023-03-13</code> 到 <code>2023-03-19</code> 这周生活的记录与思考。首发在我的个人 <a href=https://blog.chensoul.com/>博客</a>，你可以移步了解更多或者给我留言。</p><p>这周的工作主要是重构、优化系统，工作节奏比之前轻缓了很多。这周也开始了开车上下班，除去周五去医院做检查，一共开了 4 天车。从汉口到光谷，一共 29 公里，如果早上 6:30 出发，就只需要 50 分钟；如果 6:45 出发，竟然需要两个小时，真是无语了。无奈之下，只能每天早点出门早点到公司，然后，打完卡之后，在公司楼下走路。</p><p>这周开始心里默默定了一个 flag，就是每天走路 10000 步。看了一下微信运动，基本上达成了，除了周五晚上因为加班，而少走了 64 步。</p><img src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-11-03.png alt=weekly-review-11-03 style=width:67%><h2 id=从语雀迁移到-obsidian>从语雀迁移到 Obsidian</h2><p>上周提到开始使用格志 APP 来写日志，使用了一段时间之后，发现了一些缺点：</p><ul><li>部分功能收费</li><li>导出的 markdown 不支持图片显示</li><li>不支持本地存储</li></ul><p>于是，放弃了使用格志 APP，继而在使用了一段时间 Obsidian 之后，改为使用 Obsidian 来写日志和周报。</p><img src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-11-02.png alt=weekly-review-11-02 style=width:67%><p>为了不给自己太大压力，日报每天复盘内容包括以下几方面：</p><ul><li><p>今日待办</p></li><li><p>学习</p></li><li><p>工作</p></li><li><p>生活</p></li><li><p>健身</p></li></ul><h3 id=导出语雀文档为-markdown>导出语雀文档为 markdown</h3><p>参考 <a href=https://github.com/yuque/yuque-exporter>yuque/yuque-exporter</a> 文档，下载 yuque-exporter 之后进行导出操作，发现以下问题：</p><ul><li>该项目需要使用的 nodejs 版本为 18.0.4</li><li>nodejs 使用正确的版本还是导出失败</li></ul><p>于是，改为使用源码编译和运行导出。</p><p>1、先下载代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/yuque/yuque-exporter.git
</span></span></code></pre></div><p>2、修改 main.ts 中需要导出的语雀知识库地址为自己的仓库地址：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// Determining if an ESM module is main then run the code
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>url</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s2>&#34;file:&#34;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=kr>module</span><span class=nx>Path</span> <span class=o>=</span> <span class=nx>fileURLToPath</span><span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>===</span> <span class=kr>module</span><span class=nx>Path</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>urlPaths</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;chensoul/rose&#34;</span><span class=p>,</span> <span class=s2>&#34;chensoul/growup&#34;</span><span class=p>,</span> <span class=s2>&#34;chensoul/tech&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=nx>start</span><span class=p>({</span> <span class=nx>urlPaths</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>3、参考 <a href=https://www.yuque.com/yuque/developer/api#785a3731>文档</a> 申请语雀 TOKEN。</p><p>4、下载项目依赖：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm i
</span></span></code></pre></div><p>5、运行项目，开始导出：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>YUQUE_TOKEN</span><span class=o>=</span>XXXXXX npm start
</span></span></code></pre></div><blockquote><p>导出的文件在 storage 目录，接下来可以拷贝到 Obsidian 目录里。</p></blockquote><p>6、另外，可以对 yuque-exporter 源码做一些修改：</p><ul><li>导出的 markdown 文件不要有 frontmatter，修改 doc.ts 中 buildDoc 方法：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>buildDoc</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>doc</span>: <span class=kt>TreeNode</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>mapping</span>: <span class=kt>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>TreeNode</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>docDetail</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>readJSON</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>metaDir</span><span class=p>,</span> <span class=nx>doc</span><span class=p>.</span><span class=kr>namespace</span><span class=p>,</span> <span class=s2>&#34;docs&#34;</span><span class=p>,</span> <span class=sb>`</span><span class=si>${</span><span class=nx>doc</span><span class=p>.</span><span class=nx>url</span><span class=si>}</span><span class=sb>.json`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>content</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>remark</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>data</span><span class=p>(</span><span class=s2>&#34;settings&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>bullet</span><span class=o>:</span> <span class=s2>&#34;-&#34;</span><span class=p>,</span> <span class=nx>listItemIndent</span><span class=o>:</span> <span class=s2>&#34;one&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>use</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=nx>replaceHTML</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=nx>relativeLink</span><span class=p>,</span> <span class=p>{</span> <span class=nx>doc</span><span class=p>,</span> <span class=nx>mapping</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=nx>downloadAsset</span><span class=p>,</span> <span class=p>{</span> <span class=nx>doc</span><span class=p>,</span> <span class=nx>mapping</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl>    <span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>process</span><span class=p>(</span><span class=nx>docDetail</span><span class=p>.</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>//  doc.content = frontmatter(doc) + content.toString();
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>doc</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=nx>content</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FIXME: remark will transform `*` to `\*`
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>doc</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>content</span><span class=p>.</span><span class=nx>replaceAll</span><span class=p>(</span><span class=s2>&#34;\\*&#34;</span><span class=p>,</span> <span class=s2>&#34;*&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>doc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>导出的段落之间增加换行，修改 doc.ts 中 replaceHTML 方法：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>replaceHTML() {</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span><span class=nx>tree</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>htmlNodes</span> <span class=o>=</span> <span class=nx>selectAll</span><span class=p>(</span><span class=s2>&#34;html&#34;</span><span class=p>,</span> <span class=nx>tree</span><span class=p>)</span> <span class=kr>as</span> <span class=nx>Text</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>node</span> <span class=k>of</span> <span class=nx>htmlNodes</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>node</span><span class=p>.</span><span class=nx>value</span> <span class=o>===</span> <span class=s2>&#34;&lt;br /&gt;&#34;</span> <span class=o>||</span> <span class=nx>node</span><span class=p>.</span><span class=nx>value</span> <span class=o>===</span> <span class=s2>&#34;&lt;br/&gt;&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>node</span><span class=p>.</span><span class=kr>type</span> <span class=o>=</span> <span class=s2>&#34;text&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>node</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=s2>&#34;\n\n\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>7、删除导出的 markdown 文件当中的锚点标签（例如：<code>&lt;a name="xx">&lt;/a></code>）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> storage
</span></span><span class=line><span class=cl><span class=c1># macos 上执行</span>
</span></span><span class=line><span class=cl>find . -type f -name <span class=s1>&#39;*.md&#39;</span> -exec sed -i <span class=s1>&#39;&#39;</span> <span class=s1>&#39;s/&lt;a name=\&#34;[^\&#34;]*\&#34;&gt;&lt;\/a&gt;//g&#39;</span> <span class=o>{}</span> +
</span></span></code></pre></div><img src=https://chensoul.oss-cn-hangzhou.aliyuncs.com/images/weekly-review-11-01.png alt=weekly-review-11-01 style=width:67%><p>在上面的示例代码中，我们使用了 sed 命令来删除 Markdown 文件中所有的类似 <code>&lt;a name="xx">&lt;/a></code> 的锚点标签。其中：</p><ul><li><code>-i ''</code> 参数表示直接修改源文件，而不是输出到标准输出流。<code>''</code> 表示在 macOS 系统上备份修改前的文件，如果在 Linux 系统上使用该命令，可以省略该参数。</li><li><code>s/&lt;a name=\"[^\"]*\">&lt;\/a>//g</code> 表示用空字符串替换所有符合正则表达式 <code>&lt;a name=\"[^\"]*\">&lt;\/a></code> 的字符串。该正则表达式匹配所有以 <code>&lt;a name=</code> 开头，以 <code>">&lt;/a></code> 结尾的标签，且中间的文本不包含双引号。</li></ul><p>8、将导出的 markdown 文件中的本地图片批量上传到图床，操作方法：使用 typora 打开 storage 目录，然后依次点击 格式、图像、上传所有本地图片</p><h2 id=好物分享>好物分享</h2><p>虽然大部分有意思的内容会分享在 『<a href=https://t.me/chensoul_share>ChenSoul Share</a>』Telegram 频道，不过还是挑选一部分在这里列举一下，感觉更像一个 newsletter 了。</p><h3 id=一些文章>一些文章</h3><ul><li><p><a href=https://moelove.info/2023/03/21/GitHub-Actions-%E6%88%90%E6%9C%AC%E4%BC%98%E5%8C%96%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%9B%A2%E9%98%9F%E6%9B%B4%E5%85%B7%E7%AB%9E%E4%BA%89%E5%8A%9B/>GitHub Actions 成本优化：让你的团队更具竞争力</a></p></li><li><p><a href=https://juemuren4449.com/archives/open-gzip-on-nginx>Nginx 开启 gzip 压缩</a></p></li><li><p><a href=https://www.superheaoz.top/2022/06/57091/>Obsidan 日记、记账与自动同步</a></p></li><li><p><a href=https://elmagnifico.tech/2023/03/16/Doprax-V2ray/>Doprax 搭建免费 V2ray 节点</a></p></li><li><p><a href=https://elizen.me/posts/2023/03/hi-icloud/>Hi，土区 iCloud</a></p></li><li><p><a href=https://btsogiwudc.feishu.cn/docx/CgoJdHyWKopl3UxV12GcG3psnjf>国区使用土耳其 iCloud 服务，手把手保姆级上车教程</a></p></li></ul><p>以上。</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://blog.chensoul.com/posts/2023/03/28/weekly_review_12/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>周报-12｜车辆被堵、开车总结、Effective Java3笔记</span>
</a><a class=next href=https://blog.chensoul.com/posts/2023/03/13/weekly_review_10/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>周报-10｜通过Cloudflare Tunnel访问服务、Vercel部署Cusdis和Umami</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.chensoul.com/>ChenSoul</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a>
</span><span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src=https://umami.chensoul.com/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script>mediumZoom(".entry-cover img"),mediumZoom(".post-content img:not([no-zoom])")</script><script src=/js/instantclick.min.js data-no-instant></script><script data-no-instant>InstantClick.init()</script></body></html>