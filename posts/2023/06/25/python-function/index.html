<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python学习5：函数 | ChenSoul</title><meta name=keywords content="python"><meta name=description content="函数的定义 在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 def 关键字来定义，语法如下： def function_name(parameters): &#34;&#34;&#34;This is a"><meta name=author content="chensoul"><link rel=canonical href=https://blog.chensoul.com/posts/2023/06/25/python-function/><meta name=google-site-verification content="nBXwg45SBRjTX78SA-mH0asrAbsdu9c1nk0ObSry7aQ"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="8E787EFCDB0CE747FE1A4DA0ABEC66E4"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chensoul.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chensoul.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.chensoul.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.chensoul.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.chensoul.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=baidu-site-verification content="codeva-FYpQY8JdLU"><meta property="og:title" content="Python学习5：函数"><meta property="og:description" content="函数的定义 在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 def 关键字来定义，语法如下： def function_name(parameters): &#34;&#34;&#34;This is a"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chensoul.com/posts/2023/06/25/python-function/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-25T10:00:00+08:00"><meta property="article:modified_time" content="2023-06-25T10:00:00+08:00"><meta property="og:site_name" content="ChenSoul"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python学习5：函数"><meta name=twitter:description content="函数的定义 在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 def 关键字来定义，语法如下： def function_name(parameters): &#34;&#34;&#34;This is a"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chensoul.com/posts/"},{"@type":"ListItem","position":2,"name":"Python学习5：函数","item":"https://blog.chensoul.com/posts/2023/06/25/python-function/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python学习5：函数","name":"Python学习5：函数","description":"函数的定义 在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 def 关键字来定义，语法如下： def function_name(parameters): \u0026#34;\u0026#34;\u0026#34;This is a","keywords":["python"],"articleBody":"函数的定义 在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 def 关键字来定义，语法如下：\ndef function_name(parameters): \"\"\"This is a function\"\"\" # function body return value 其中，function_name 是函数的名称，parameters 是函数的参数列表，function body 是函数的主体部分，包括需要执行的代码和可能的返回语句，return value 是函数的返回值（如果有的话）。\n下列代码创建一个可以输出限定数值内的斐波那契数列函数：\ndef fib(n): # write Fibonacci series up to n \"\"\"Print a Fibonacci series up to n.\"\"\" a, b = 0, 1 while a \u003c n: print(a, end=' ') a, b = b, a+b print() fib(2000) # 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 159 定义 函数使用关键字 def，后跟函数名与括号内的形参列表。函数语句从下一行开始，并且必须缩进。\n函数内的第一条语句是字符串时，该字符串就是文档字符串，也称为 docstring。利用文档字符串可以自动生成在线文档或打印版文档，还可以让开发者在浏览代码时直接查阅文档；Python 开发者最好养成在代码中加入文档字符串的好习惯。\n函数在 执行 时使用函数局部变量符号表，所有函数变量赋值都存在局部符号表中；引用变量时，首先，在局部符号表里查找变量，然后，是外层函数局部符号表，再是全局符号表，最后是内置名称符号表。因此，尽管可以引用全局变量和外层函数的变量，但最好不要在函数内直接赋值（除非是 global 语句定义的全局变量，或 nonlocal 语句定义的外层函数变量）。\n在调用函数时会将实际参数（实参）引入到被调用函数的局部符号表中；因此，实参是使用 按值调用 来传递的（其中的 值 始终是对象的 引用 而不是对象的值）。 1 当一个函数调用另外一个函数时，会为该调用创建一个新的局部符号表。\n函数定义在当前符号表中把函数名与函数对象关联在一起。解释器把函数名指向的对象作为用户自定义函数。还可以使用其他名称指向同一个函数对象，并访问访该函数：\nfib f = fib f(100) # 0 1 1 2 3 5 8 13 21 34 55 89 fib 不返回值，因此，其他语言不把它当作函数，而是当作过程。事实上，没有 return 语句的函数也返回值，只不过这个值比较是 None （是一个内置名称）。一般来说，解释器不会输出单独的返回值 None ，如需查看该值，可以使用 print()：\nfib(0) print(fib(0)) 函数参数 默认值参数 在 Python 中，函数参数可以具有默认值，这意味着如果在函数调用期间未提供该参数的值，则使用默认值。定义具有默认值的函数参数的语法如下：\ndef function_name(param1, param2=default_value): # function body return value 其中，param1 是必需的参数，它没有默认值；param2 是可选参数，如果未提供，则使用默认值 default_value。如果调用函数时提供了 param2 的值，则使用提供的值覆盖默认值。\n以下是一个使用默认参数值的 Python 函数示例：\ndef greet(name, greeting=\"Hello\"): print(f\"{greeting}, {name}!\") greet(\"Alice\") # output: Hello, Alice! greet(\"Bob\", \"Hi\") # output: Hi, Bob! 需要注意的是，当函数参数具有默认值时，应该将具有默认值的参数放在参数列表的末尾。这样可以使函数更加易于使用，并避免在调用函数时出现混淆。\n以下是一个具有多个默认参数值的 Python 函数的示例：\ndef create_user(name, age=18, gender=\"male\", email=None): user = {\"name\": name, \"age\": age, \"gender\": gender} if email: user[\"email\"] = email return user user1 = create_user(\"Alice\") user2 = create_user(\"Bob\", 20) user3 = create_user(\"Charlie\", gender=\"female\", email=\"charlie@example.com\") print(user1) # output: {'name': 'Alice', 'age': 18, 'gender': 'male'} print(user2) # output: {'name': 'Bob', 'age': 20, 'gender': 'male'} print(user3) # output: {'name': 'Charlie', 'age': 18, 'gender': 'female', 'email': 'charlie@example.com'} 关键字参数 kwarg=value 形式的关键字参数也可以用于调用函数。函数示例如下：\ndef parrot(voltage, state='a stiff', action='voom', type='Norwegian Blue'): print(\"-- This parrot wouldn't\", action, end=' ') print(\"if you put\", voltage, \"volts through it.\") print(\"-- Lovely plumage, the\", type) print(\"-- It's\", state, \"!\") 该函数接受一个必选参数（voltage）和三个可选参数（state, action 和 type）。该函数可用下列方式调用：\nparrot(1000) # 1 positional argument parrot(voltage=1000) # 1 keyword argument parrot(voltage=1000000, action='VOOOOOM') # 2 keyword arguments parrot(action='VOOOOOM', voltage=1000000) # 2 keyword arguments parrot('a million', 'bereft of life', 'jump') # 3 positional arguments parrot('a thousand', state='pushing up the daisies') # 1 positional, 1 keyword 以下调用函数的方式都无效：\nparrot() # required argument missing parrot(voltage=5.0, 'dead') # non-keyword argument after a keyword argument parrot(110, voltage=220) # duplicate value for the same argument parrot(actor='John Cleese') # unknown keyword argument 函数调用时，关键字参数必须跟在位置参数后面。所有传递的关键字参数都必须匹配一个函数接受的参数（比如，actor 不是函数 parrot 的有效参数），关键字参数的顺序并不重要。这也包括必选参数，（比如，parrot(voltage=1000) 也有效）。不能对同一个参数多次赋值，下面就是一个因此限制而失败的例子：\ndef function(a): pass function(0, a=0) #Traceback (most recent call last): # File \"\", line 1, in #TypeError: function() got multiple values for argument 'a' 最后一个形参为 **name 形式时，接收一个字典，该字典包含与函数中已定义形参对应之外的所有关键字参数。**name 形参可以与 *name 形参（下一小节介绍）组合使用（*name 必须在 **name 前面）， *name 形参接收一个元组，该元组包含形参列表之外的位置参数。例如，可以定义下面这样的函数：\ndef cheeseshop(kind, *arguments, **keywords): print(\"-- Do you have any\", kind, \"?\") print(\"-- I'm sorry, we're all out of\", kind) for arg in arguments: print(arg) print(\"-\" * 40) for kw in keywords: print(kw, \":\", keywords[kw]) 该函数可以用如下方式调用：\ncheeseshop(\"Limburger\", \"It's very runny, sir.\", \"It's really very, VERY runny, sir.\", shopkeeper=\"Michael Palin\", client=\"John Cleese\", sketch=\"Cheese Shop Sketch\") 输出结果如下：\n-- Do you have any Limburger ? -- I'm sorry, we're all out of Limburger It's very runny, sir. It's really very, VERY runny, sir. ---------------------------------------- shopkeeper : Michael Palin client : John Cleese sketch : Cheese Shop Sketch 注意，关键字参数在输出结果中的顺序与调用函数时的顺序一致。\n特殊参数 默认情况下，参数可以按位置或显式关键字传递给 Python 函数。为了让代码易读、高效，最好限制参数的传递方式，这样，开发者只需查看函数定义，即可确定参数项是仅按位置、按位置或关键字，还是仅按关键字传递。\n函数定义如下：\ndef f(pos1, pos2, /, pos_or_kwd, *, kwd1, kwd2): ----------- ---------- ---------- | | | | Positional or keyword | | - Keyword only -- Positional only / 和 * 是可选的。这些符号表明形参如何把参数值传递给函数：位置、位置或关键字、关键字。关键字形参也叫作命名形参。\n位置或关键字参数。函数定义中未使用 / 和 * 时，参数可以按位置或关键字传递给函数。\n仅位置参数。特定形参可以标记为 仅限位置。仅限位置 时，形参的顺序很重要，且这些形参不能用关键字传递。仅限位置形参应放在 / （正斜杠）前。/ 用于在逻辑上分割仅限位置形参与其它形参。如果函数定义中没有 /，则表示没有仅限位置形参。/ 后可以是 位置或关键字 或 仅限关键字 形参。\n仅限关键字参数。把形参标记为 仅限关键字，表明必须以关键字参数形式传递该形参，应在参数列表中第一个 仅限关键字 形参前添加 *。\n请看下面的函数定义示例，注意 / 和 * 标记：\ndef standard_arg(arg): print(arg) def pos_only_arg(arg, /): print(arg) def kwd_only_arg(*, arg): print(arg) def combined_example(pos_only, /, standard, *, kwd_only): print(pos_only, standard, kwd_only) 第一个函数定义 standard_arg 是最常见的形式，对调用方式没有任何限制，可以按位置也可以按关键字传递参数：\nstandard_arg(2) # 2 standard_arg(arg=2) # 2 第二个函数 pos_only_arg 的函数定义中有 /，仅限使用位置形参：\npos_only_arg(1) # 1 第三个函数 kwd_only_args 的函数定义通过 * 表明仅限关键字参数：\nkwd_only_arg(arg=3) # 3 最后一个函数在同一个函数定义中，使用了全部三种调用惯例：\ncombined_example(1, 2, kwd_only=3) # 1 2 3 combined_example(1, standard=2, kwd_only=3) #1 2 3 下面的函数定义中，kwds 把 name 当作键，因此，可能与位置参数 name 产生潜在冲突：\ndef foo(name, **kwds): return 'name' in kwds 调用该函数不可能返回 True，因为关键字 'name' 总与第一个形参绑定。例如：\nfoo(1, **{'name': 2}) #Traceback (most recent call last): # File \"\", line 1, in #TypeError: foo() got multiple values for argument 'name' 加上 / （仅限位置参数）后，就可以了。此时，函数定义把 name 当作位置参数，'name' 也可以作为关键字参数的键：\ndef foo(name, /, **kwds): return 'name' in kwds foo(1, **{'name': 2}) # True 换句话说，仅限位置形参的名称可以在 **kwds 中使用，而不产生歧义。\n任意实参列表 调用函数时，使用任意数量的实参是最少见的选项。这些实参包含在元组中。在可变数量的实参之前，可能有若干个普通参数：\ndef write_multiple_items(file, separator, *args): file.write(separator.join(args)) variadic 参数用于采集传递给函数的所有剩余参数，因此，它们通常在形参列表的末尾。*args 形参后的任何形式参数只能是仅限关键字参数，即只能用作关键字参数，不能用作位置参数：\ndef concat(*args, sep=\"/\"): return sep.join(args) concat(\"earth\", \"mars\", \"venus\") concat(\"earth\", \"mars\", \"venus\", sep=\".\") 解包实参列表 函数调用要求独立的位置参数，但实参在列表或元组里时，要执行相反的操作。例如，内置的 range() 函数要求独立的 start 和 stop 实参。如果这些参数不是独立的，则要在调用函数时，用 * 操作符把实参从列表或元组解包出来：\nlist(range(3, 6)) # normal call with separate arguments args = [3, 6] list(range(*args)) # call with arguments unpacked from a list 同样，字典可以用 ** 操作符传递关键字参数：\ndef parrot(voltage, state='a stiff', action='voom'): print(\"-- This parrot wouldn't\", action, end=' ') print(\"if you put\", voltage, \"volts through it.\", end=' ') print(\"E's\", state, \"!\") d = {\"voltage\": \"four million\", \"state\": \"bleedin' demised\", \"action\": \"VOOM\"} parrot(**d) Lambda 函数 Python 中还有一种特殊的函数称为 lambda 函数，它是一种匿名函数，用于创建简短的函数。以下是一个 lambda 函数示例：\nadd_numbers = lambda x, y: x + y result = add_numbers(2, 3) print(result) 在上面的示例中，我们使用 lambda 关键字创建了一个匿名函数 add_numbers，它接受两个参数 x 和 y，并返回它们的和。我们可以使用 add_numbers(2, 3) 调用这个匿名函数，并将结果存储在变量 result 中。\n函数注解 Python 函数注解是一种在函数定义中添加元数据的功能。这些注解可以用于指定函数参数和返回值的类型、参数的默认值、函数的文档字符串等信息。虽然注解并不会影响 Python 函数的行为，但它们可以提供有用的信息，使代码更加清晰易读。\nPython 函数注解使用的语法是在函数定义的参数列表后面添加冒号和注解。以下是一个函数注解的示例：\ndef add_numbers(x: int, y: int) -\u003e int: return x + y 在上面的示例中，我们使用注解指定了函数 add_numbers() 的两个参数 x 和 y 的类型为 int，并指定函数返回值的类型也为 int。在函数体中，我们使用加法运算符将这两个参数相加，并返回结果。\n函数注解还可以包含参数的默认值、参数的可变性和函数的文档字符串等信息。以下是一个包含这些信息的函数注解示例：\ndef greet(name: str = \"World\", *, times: int = 1) -\u003e str: \"\"\" Greet a person by name and optionally repeat the greeting multiple times. :param name: The name of the person to greet. Default is \"World\". :param times: The number of times to repeat the greeting. Default is 1. :return: A string containing the greeting message. \"\"\" message = \"Hello, \" + name + \"!\\n\" * times return message 在上面的示例中，我们使用注解指定了函数 greet() 的参数 name 和 times 的类型为 str 和 int，并指定了参数 name 的默认值为 \"World\"，参数 times 的默认值为 1。我们还使用了函数的文档字符串来提供更详细的函数说明。\n标注 以字典的形式存放在函数的 __annotations__ 属性中，并且不会影响函数的任何其他部分。 形参标注的定义方式是在形参名后加冒号，后面跟一个表达式，该表达式会被求值为标注的值。 返回值标注的定义方式是加组合符号 -\u003e，后面跟一个表达式，该标注位于形参列表和表示 def 语句结束的冒号之间。 下面的示例有一个必须的参数，一个可选的关键字参数以及返回值都带有相应的标注:\ndef f(ham: str, eggs: str = 'eggs') -\u003e str: print(\"Annotations:\", f.__annotations__) print(\"Arguments:\", ham, eggs) return ham + ' and ' + eggs f('spam') ","wordCount":"3815","inLanguage":"en","datePublished":"2023-06-25T10:00:00+08:00","dateModified":"2023-06-25T10:00:00+08:00","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.com/posts/2023/06/25/python-function/"},"publisher":{"@type":"Organization","name":"ChenSoul","logo":{"@type":"ImageObject","url":"https://blog.chensoul.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chensoul.com/ accesskey=h title="ChenSoul (Alt + H)">ChenSoul</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.chensoul.com/categories/ideas title=周报><span>周报</span></a></li><li><a href=https://blog.chensoul.com/categories/notes title=编程><span>编程</span></a></li><li><a href=https://blog.chensoul.com/tags title=标签><span>标签</span></a></li><li><a href=https://blog.chensoul.com/about title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Python学习5：函数</h1><div class=post-meta><span title='2023-06-25 10:00:00 +0800 +0800'>2023-06-25</span>&nbsp;·&nbsp;chensoul</div></header><div class=post-content><h2 id=函数的定义>函数的定义<a hidden class=anchor aria-hidden=true href=#函数的定义>#</a></h2><p>在 Python 中，函数是一段可重复使用的代码块，它接受一些输入（也称为参数）并产生一些输出。函数可以通过 <code>def</code> 关键字来定义，语法如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>function_name</span><span class=p>(</span><span class=n>parameters</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  	<span class=s2>&#34;&#34;&#34;This is a function&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># function body</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></div><p>其中，<code>function_name</code> 是函数的名称，<code>parameters</code> 是函数的参数列表，<code>function body</code> 是函数的主体部分，包括需要执行的代码和可能的返回语句，<code>return value</code> 是函数的返回值（如果有的话）。</p><p>下列代码创建一个可以输出限定数值内的斐波那契数列函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>fib</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>    <span class=c1># write Fibonacci series up to n</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Print a Fibonacci series up to n.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=o>+</span><span class=n>b</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fib</span><span class=p>(</span><span class=mi>2000</span><span class=p>)</span> <span class=c1># 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 159</span>
</span></span></code></pre></div><p><em>定义</em> 函数使用关键字 <code>def</code>，后跟函数名与括号内的形参列表。函数语句从下一行开始，并且必须缩进。</p><p>函数内的第一条语句是字符串时，该字符串就是文档字符串，也称为 <em>docstring</em>。利用文档字符串可以自动生成在线文档或打印版文档，还可以让开发者在浏览代码时直接查阅文档；Python 开发者最好养成在代码中加入文档字符串的好习惯。</p><p>函数在 <em>执行</em> 时使用函数局部变量符号表，所有函数变量赋值都存在局部符号表中；引用变量时，首先，在局部符号表里查找变量，然后，是外层函数局部符号表，再是全局符号表，最后是内置名称符号表。因此，尽管可以引用全局变量和外层函数的变量，但最好不要在函数内直接赋值（除非是 <code>global</code> 语句定义的全局变量，或 <code>nonlocal</code> 语句定义的外层函数变量）。</p><p>在调用函数时会将实际参数（实参）引入到被调用函数的局部符号表中；因此，实参是使用 <em>按值调用</em> 来传递的（其中的 <em>值</em> 始终是对象的 <em>引用</em> 而不是对象的值）。 <a href=https://docs.python.org/zh-cn/3/tutorial/controlflow.html#id2>1</a> 当一个函数调用另外一个函数时，会为该调用创建一个新的局部符号表。</p><p>函数定义在当前符号表中把函数名与函数对象关联在一起。解释器把函数名指向的对象作为用户自定义函数。还可以使用其他名称指向同一个函数对象，并访问访该函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fib</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=n>fib</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=c1># 0 1 1 2 3 5 8 13 21 34 55 89</span>
</span></span></code></pre></div><p><code>fib</code> 不返回值，因此，其他语言不把它当作函数，而是当作过程。事实上，没有 <code>return</code> 语句的函数也返回值，只不过这个值比较是 <code>None</code> （是一个内置名称）。一般来说，解释器不会输出单独的返回值 <code>None</code> ，如需查看该值，可以使用 <code>print()</code>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fib</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>fib</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=函数参数>函数参数<a hidden class=anchor aria-hidden=true href=#函数参数>#</a></h2><h3 id=默认值参数>默认值参数<a hidden class=anchor aria-hidden=true href=#默认值参数>#</a></h3><p>在 Python 中，函数参数可以具有默认值，这意味着如果在函数调用期间未提供该参数的值，则使用默认值。定义具有默认值的函数参数的语法如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>function_name</span><span class=p>(</span><span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=o>=</span><span class=n>default_value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># function body</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></div><p>其中，param1 是必需的参数，它没有默认值；param2 是可选参数，如果未提供，则使用默认值 default_value。如果调用函数时提供了 param2 的值，则使用提供的值覆盖默认值。</p><p>以下是一个使用默认参数值的 Python 函数示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>greet</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>greeting</span><span class=o>=</span><span class=s2>&#34;Hello&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>greeting</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>greet</span><span class=p>(</span><span class=s2>&#34;Alice&#34;</span><span class=p>)</span>  <span class=c1># output: Hello, Alice!</span>
</span></span><span class=line><span class=cl><span class=n>greet</span><span class=p>(</span><span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Hi&#34;</span><span class=p>)</span>  <span class=c1># output: Hi, Bob!</span>
</span></span></code></pre></div><p>需要注意的是，当函数参数具有默认值时，应该将具有默认值的参数放在参数列表的末尾。这样可以使函数更加易于使用，并避免在调用函数时出现混淆。</p><p>以下是一个具有多个默认参数值的 Python 函数的示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_user</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>gender</span><span class=o>=</span><span class=s2>&#34;male&#34;</span><span class=p>,</span> <span class=n>email</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=n>age</span><span class=p>,</span> <span class=s2>&#34;gender&#34;</span><span class=p>:</span> <span class=n>gender</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>email</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span><span class=p>[</span><span class=s2>&#34;email&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>email</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>user1</span> <span class=o>=</span> <span class=n>create_user</span><span class=p>(</span><span class=s2>&#34;Alice&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>user2</span> <span class=o>=</span> <span class=n>create_user</span><span class=p>(</span><span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>user3</span> <span class=o>=</span> <span class=n>create_user</span><span class=p>(</span><span class=s2>&#34;Charlie&#34;</span><span class=p>,</span> <span class=n>gender</span><span class=o>=</span><span class=s2>&#34;female&#34;</span><span class=p>,</span> <span class=n>email</span><span class=o>=</span><span class=s2>&#34;charlie@example.com&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>user1</span><span class=p>)</span>  <span class=c1># output: {&#39;name&#39;: &#39;Alice&#39;, &#39;age&#39;: 18, &#39;gender&#39;: &#39;male&#39;}</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>user2</span><span class=p>)</span>  <span class=c1># output: {&#39;name&#39;: &#39;Bob&#39;, &#39;age&#39;: 20, &#39;gender&#39;: &#39;male&#39;}</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>user3</span><span class=p>)</span>  <span class=c1># output: {&#39;name&#39;: &#39;Charlie&#39;, &#39;age&#39;: 18, &#39;gender&#39;: &#39;female&#39;, &#39;email&#39;: &#39;charlie@example.com&#39;}</span>
</span></span></code></pre></div><h3 id=关键字参数>关键字参数<a hidden class=anchor aria-hidden=true href=#关键字参数>#</a></h3><p><code>kwarg=value</code> 形式的关键字参数也可以用于调用函数。函数示例如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>parrot</span><span class=p>(</span><span class=n>voltage</span><span class=p>,</span> <span class=n>state</span><span class=o>=</span><span class=s1>&#39;a stiff&#39;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;voom&#39;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s1>&#39;Norwegian Blue&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- This parrot wouldn&#39;t&#34;</span><span class=p>,</span> <span class=n>action</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;if you put&#34;</span><span class=p>,</span> <span class=n>voltage</span><span class=p>,</span> <span class=s2>&#34;volts through it.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- Lovely plumage, the&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- It&#39;s&#34;</span><span class=p>,</span> <span class=n>state</span><span class=p>,</span> <span class=s2>&#34;!&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>该函数接受一个必选参数（<code>voltage</code>）和三个可选参数（<code>state</code>, <code>action</code> 和 <code>type</code>）。该函数可用下列方式调用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>                                          <span class=c1># 1 positional argument</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=n>voltage</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>                                  <span class=c1># 1 keyword argument</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=n>voltage</span><span class=o>=</span><span class=mi>1000000</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;VOOOOOM&#39;</span><span class=p>)</span>             <span class=c1># 2 keyword arguments</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=n>action</span><span class=o>=</span><span class=s1>&#39;VOOOOOM&#39;</span><span class=p>,</span> <span class=n>voltage</span><span class=o>=</span><span class=mi>1000000</span><span class=p>)</span>             <span class=c1># 2 keyword arguments</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=s1>&#39;a million&#39;</span><span class=p>,</span> <span class=s1>&#39;bereft of life&#39;</span><span class=p>,</span> <span class=s1>&#39;jump&#39;</span><span class=p>)</span>         <span class=c1># 3 positional arguments</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=s1>&#39;a thousand&#39;</span><span class=p>,</span> <span class=n>state</span><span class=o>=</span><span class=s1>&#39;pushing up the daisies&#39;</span><span class=p>)</span>  <span class=c1># 1 positional, 1 keyword</span>
</span></span></code></pre></div><p>以下调用函数的方式都无效：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>parrot</span><span class=p>()</span>                     <span class=c1># required argument missing</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=n>voltage</span><span class=o>=</span><span class=mf>5.0</span><span class=p>,</span> <span class=s1>&#39;dead&#39;</span><span class=p>)</span>  <span class=c1># non-keyword argument after a keyword argument</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=mi>110</span><span class=p>,</span> <span class=n>voltage</span><span class=o>=</span><span class=mi>220</span><span class=p>)</span>     <span class=c1># duplicate value for the same argument</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=n>actor</span><span class=o>=</span><span class=s1>&#39;John Cleese&#39;</span><span class=p>)</span>  <span class=c1># unknown keyword argument</span>
</span></span></code></pre></div><p>函数调用时，关键字参数必须跟在位置参数后面。所有传递的关键字参数都必须匹配一个函数接受的参数（比如，<code>actor</code> 不是函数 <code>parrot</code> 的有效参数），关键字参数的顺序并不重要。这也包括必选参数，（比如，<code>parrot(voltage=1000)</code> 也有效）。不能对同一个参数多次赋值，下面就是一个因此限制而失败的例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>function</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=k>pass</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>function</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>a</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#Traceback (most recent call last):</span>
</span></span><span class=line><span class=cl><span class=c1>#  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#TypeError: function() got multiple values for argument &#39;a&#39;</span>
</span></span></code></pre></div><p>最后一个形参为 <code>**name</code> 形式时，接收一个字典，该字典包含与函数中已定义形参对应之外的所有关键字参数。<code>**name</code> 形参可以与 <code>*name</code> 形参（下一小节介绍）组合使用（<code>*name</code> 必须在 <code>**name</code> 前面）， <code>*name</code> 形参接收一个元组，该元组包含形参列表之外的位置参数。例如，可以定义下面这样的函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>cheeseshop</span><span class=p>(</span><span class=n>kind</span><span class=p>,</span> <span class=o>*</span><span class=n>arguments</span><span class=p>,</span> <span class=o>**</span><span class=n>keywords</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- Do you have any&#34;</span><span class=p>,</span> <span class=n>kind</span><span class=p>,</span> <span class=s2>&#34;?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- I&#39;m sorry, we&#39;re all out of&#34;</span><span class=p>,</span> <span class=n>kind</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>arguments</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>kw</span> <span class=ow>in</span> <span class=n>keywords</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>kw</span><span class=p>,</span> <span class=s2>&#34;:&#34;</span><span class=p>,</span> <span class=n>keywords</span><span class=p>[</span><span class=n>kw</span><span class=p>])</span>
</span></span></code></pre></div><p>该函数可以用如下方式调用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>cheeseshop</span><span class=p>(</span><span class=s2>&#34;Limburger&#34;</span><span class=p>,</span> <span class=s2>&#34;It&#39;s very runny, sir.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s2>&#34;It&#39;s really very, VERY runny, sir.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>shopkeeper</span><span class=o>=</span><span class=s2>&#34;Michael Palin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>client</span><span class=o>=</span><span class=s2>&#34;John Cleese&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>sketch</span><span class=o>=</span><span class=s2>&#34;Cheese Shop Sketch&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>输出结果如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-- Do you have any Limburger ?
</span></span><span class=line><span class=cl>-- I<span class=s1>&#39;m sorry, we&#39;</span>re all out of Limburger
</span></span><span class=line><span class=cl>It<span class=s1>&#39;s very runny, sir.
</span></span></span><span class=line><span class=cl><span class=s1>It&#39;</span>s really very, VERY runny, sir.
</span></span><span class=line><span class=cl>----------------------------------------
</span></span><span class=line><span class=cl>shopkeeper : Michael Palin
</span></span><span class=line><span class=cl>client : John Cleese
</span></span><span class=line><span class=cl>sketch : Cheese Shop Sketch
</span></span></code></pre></div><p>注意，关键字参数在输出结果中的顺序与调用函数时的顺序一致。</p><h3 id=特殊参数>特殊参数<a hidden class=anchor aria-hidden=true href=#特殊参数>#</a></h3><p>默认情况下，参数可以按位置或显式关键字传递给 Python 函数。为了让代码易读、高效，最好限制参数的传递方式，这样，开发者只需查看函数定义，即可确定参数项是仅按位置、按位置或关键字，还是仅按关键字传递。</p><p>函数定义如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>pos1</span><span class=p>,</span> <span class=n>pos2</span><span class=p>,</span> <span class=o>/</span><span class=p>,</span> <span class=n>pos_or_kwd</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>kwd1</span><span class=p>,</span> <span class=n>kwd2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=o>-----------</span>    <span class=o>----------</span>     <span class=o>----------</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span>             <span class=o>|</span>                  <span class=o>|</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span>        <span class=n>Positional</span> <span class=ow>or</span> <span class=n>keyword</span>   <span class=o>|</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span>                                <span class=o>-</span> <span class=n>Keyword</span> <span class=n>only</span>
</span></span><span class=line><span class=cl>         <span class=o>--</span> <span class=n>Positional</span> <span class=n>only</span>
</span></span></code></pre></div><p><code>/</code> 和 <code>*</code> 是可选的。这些符号表明形参如何把参数值传递给函数：位置、位置或关键字、关键字。关键字形参也叫作命名形参。</p><ul><li><p>位置或关键字参数。函数定义中未使用 <code>/</code> 和 <code>*</code> 时，参数可以按位置或关键字传递给函数。</p></li><li><p>仅位置参数。特定形参可以标记为 <em>仅限位置</em>。<em>仅限位置</em> 时，形参的顺序很重要，且这些形参不能用关键字传递。仅限位置形参应放在 <code>/</code> （正斜杠）前。<code>/</code> 用于在逻辑上分割仅限位置形参与其它形参。如果函数定义中没有 <code>/</code>，则表示没有仅限位置形参。<code>/</code> 后可以是 <em>位置或关键字</em> 或 <em>仅限关键字</em> 形参。</p></li><li><p>仅限关键字参数。把形参标记为 <em>仅限关键字</em>，表明必须以关键字参数形式传递该形参，应在参数列表中第一个 <em>仅限关键字</em> 形参前添加 <code>*</code>。</p></li></ul><p>请看下面的函数定义示例，注意 <code>/</code> 和 <code>*</code> 标记：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>standard_arg</span><span class=p>(</span><span class=n>arg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=nb>print</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pos_only_arg</span><span class=p>(</span><span class=n>arg</span><span class=p>,</span> <span class=o>/</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=nb>print</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>kwd_only_arg</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>arg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=nb>print</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>combined_example</span><span class=p>(</span><span class=n>pos_only</span><span class=p>,</span> <span class=o>/</span><span class=p>,</span> <span class=n>standard</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>kwd_only</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=nb>print</span><span class=p>(</span><span class=n>pos_only</span><span class=p>,</span> <span class=n>standard</span><span class=p>,</span> <span class=n>kwd_only</span><span class=p>)</span>
</span></span></code></pre></div><p>第一个函数定义 <code>standard_arg</code> 是最常见的形式，对调用方式没有任何限制，可以按位置也可以按关键字传递参数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>standard_arg</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=c1># 2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>standard_arg</span><span class=p>(</span><span class=n>arg</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span> <span class=c1># 2</span>
</span></span></code></pre></div><p>第二个函数 <code>pos_only_arg</code> 的函数定义中有 <code>/</code>，仅限使用位置形参：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>pos_only_arg</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=c1># 1</span>
</span></span></code></pre></div><p>第三个函数 <code>kwd_only_args</code> 的函数定义通过 <code>*</code> 表明仅限关键字参数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>kwd_only_arg</span><span class=p>(</span><span class=n>arg</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span> <span class=c1># 3</span>
</span></span></code></pre></div><p>最后一个函数在同一个函数定义中，使用了全部三种调用惯例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>combined_example</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>kwd_only</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span> <span class=c1># 1 2 3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>combined_example</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>standard</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>kwd_only</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span> <span class=c1>#1 2 3</span>
</span></span></code></pre></div><p>下面的函数定义中，<code>kwds</code> 把 <code>name</code> 当作键，因此，可能与位置参数 <code>name</code> 产生潜在冲突：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=o>**</span><span class=n>kwds</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;name&#39;</span> <span class=ow>in</span> <span class=n>kwds</span>
</span></span></code></pre></div><p>调用该函数不可能返回 <code>True</code>，因为关键字 <code>'name'</code> 总与第一个形参绑定。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>foo</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=o>**</span><span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>#Traceback (most recent call last):</span>
</span></span><span class=line><span class=cl><span class=c1>#  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#TypeError: foo() got multiple values for argument &#39;name&#39;</span>
</span></span></code></pre></div><p>加上 <code>/</code> （仅限位置参数）后，就可以了。此时，函数定义把 <code>name</code> 当作位置参数，<code>'name'</code> 也可以作为关键字参数的键：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=o>/</span><span class=p>,</span> <span class=o>**</span><span class=n>kwds</span><span class=p>):</span>
</span></span><span class=line><span class=cl>     <span class=k>return</span> <span class=s1>&#39;name&#39;</span> <span class=ow>in</span> <span class=n>kwds</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>foo</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=o>**</span><span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span> <span class=c1># True</span>
</span></span></code></pre></div><p>换句话说，仅限位置形参的名称可以在 <code>**kwds</code> 中使用，而不产生歧义。</p><h2 id=任意实参列表>任意实参列表<a hidden class=anchor aria-hidden=true href=#任意实参列表>#</a></h2><p>调用函数时，使用任意数量的实参是最少见的选项。这些实参包含在元组中。在可变数量的实参之前，可能有若干个普通参数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>write_multiple_items</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>separator</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>separator</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>args</span><span class=p>))</span>
</span></span></code></pre></div><p><em>variadic</em> 参数用于采集传递给函数的所有剩余参数，因此，它们通常在形参列表的末尾。<code>*args</code> 形参后的任何形式参数只能是仅限关键字参数，即只能用作关键字参数，不能用作位置参数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>concat</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s2>&#34;/&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sep</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>concat</span><span class=p>(</span><span class=s2>&#34;earth&#34;</span><span class=p>,</span> <span class=s2>&#34;mars&#34;</span><span class=p>,</span> <span class=s2>&#34;venus&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>concat</span><span class=p>(</span><span class=s2>&#34;earth&#34;</span><span class=p>,</span> <span class=s2>&#34;mars&#34;</span><span class=p>,</span> <span class=s2>&#34;venus&#34;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s2>&#34;.&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=解包实参列表>解包实参列表<a hidden class=anchor aria-hidden=true href=#解包实参列表>#</a></h2><p>函数调用要求独立的位置参数，但实参在列表或元组里时，要执行相反的操作。例如，内置的 <code>range()</code> 函数要求独立的 <em>start</em> 和 <em>stop</em> 实参。如果这些参数不是独立的，则要在调用函数时，用 <code>*</code> 操作符把实参从列表或元组解包出来：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>list</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>            <span class=c1># normal call with separate arguments</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>args</span> <span class=o>=</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>list</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>))</span>            <span class=c1># call with arguments unpacked from a list</span>
</span></span></code></pre></div><p>同样，字典可以用 <code>**</code> 操作符传递关键字参数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>parrot</span><span class=p>(</span><span class=n>voltage</span><span class=p>,</span> <span class=n>state</span><span class=o>=</span><span class=s1>&#39;a stiff&#39;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;voom&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-- This parrot wouldn&#39;t&#34;</span><span class=p>,</span> <span class=n>action</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;if you put&#34;</span><span class=p>,</span> <span class=n>voltage</span><span class=p>,</span> <span class=s2>&#34;volts through it.&#34;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;E&#39;s&#34;</span><span class=p>,</span> <span class=n>state</span><span class=p>,</span> <span class=s2>&#34;!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;voltage&#34;</span><span class=p>:</span> <span class=s2>&#34;four million&#34;</span><span class=p>,</span> <span class=s2>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;bleedin&#39; demised&#34;</span><span class=p>,</span> <span class=s2>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;VOOM&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>parrot</span><span class=p>(</span><span class=o>**</span><span class=n>d</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=lambda-函数>Lambda 函数<a hidden class=anchor aria-hidden=true href=#lambda-函数>#</a></h2><p>Python 中还有一种特殊的函数称为 lambda 函数，它是一种匿名函数，用于创建简短的函数。以下是一个 lambda 函数示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>add_numbers</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>add_numbers</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span></code></pre></div><p>在上面的示例中，我们使用 <code>lambda</code> 关键字创建了一个匿名函数 <code>add_numbers</code>，它接受两个参数 <code>x</code> 和 <code>y</code>，并返回它们的和。我们可以使用 <code>add_numbers(2, 3)</code> 调用这个匿名函数，并将结果存储在变量 <code>result</code> 中。</p><h2 id=函数注解>函数注解<a hidden class=anchor aria-hidden=true href=#函数注解>#</a></h2><p>Python 函数注解是一种在函数定义中添加元数据的功能。这些注解可以用于指定函数参数和返回值的类型、参数的默认值、函数的文档字符串等信息。虽然注解并不会影响 Python 函数的行为，但它们可以提供有用的信息，使代码更加清晰易读。</p><p>Python 函数注解使用的语法是在函数定义的参数列表后面添加冒号和注解。以下是一个函数注解的示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>add_numbers</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
</span></span></code></pre></div><p>在上面的示例中，我们使用注解指定了函数 <code>add_numbers()</code> 的两个参数 <code>x</code> 和 <code>y</code> 的类型为 <code>int</code>，并指定函数返回值的类型也为 <code>int</code>。在函数体中，我们使用加法运算符将这两个参数相加，并返回结果。</p><p>函数注解还可以包含参数的默认值、参数的可变性和函数的文档字符串等信息。以下是一个包含这些信息的函数注解示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>greet</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;World&#34;</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>times</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Greet a person by name and optionally repeat the greeting multiple times.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    :param name: The name of the person to greet. Default is &#34;World&#34;.
</span></span></span><span class=line><span class=cl><span class=s2>    :param times: The number of times to repeat the greeting. Default is 1.
</span></span></span><span class=line><span class=cl><span class=s2>    :return: A string containing the greeting message.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span> <span class=o>=</span> <span class=s2>&#34;Hello, &#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=s2>&#34;!</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=o>*</span> <span class=n>times</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>message</span>
</span></span></code></pre></div><p>在上面的示例中，我们使用注解指定了函数 <code>greet()</code> 的参数 <code>name</code> 和 <code>times</code> 的类型为 <code>str</code> 和 <code>int</code>，并指定了参数 <code>name</code> 的默认值为 <code>"World"</code>，参数 <code>times</code> 的默认值为 <code>1</code>。我们还使用了函数的文档字符串来提供更详细的函数说明。</p><p><a href=https://docs.python.org/zh-cn/3/glossary.html#term-function-annotation>标注</a> 以字典的形式存放在函数的 <code>__annotations__</code> 属性中，并且不会影响函数的任何其他部分。 形参标注的定义方式是在形参名后加冒号，后面跟一个表达式，该表达式会被求值为标注的值。 返回值标注的定义方式是加组合符号 <code>-></code>，后面跟一个表达式，该标注位于形参列表和表示 <code>def</code> 语句结束的冒号之间。 下面的示例有一个必须的参数，一个可选的关键字参数以及返回值都带有相应的标注:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>ham</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>eggs</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s1>&#39;eggs&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Annotations:&#34;</span><span class=p>,</span> <span class=n>f</span><span class=o>.</span><span class=vm>__annotations__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Arguments:&#34;</span><span class=p>,</span> <span class=n>ham</span><span class=p>,</span> <span class=n>eggs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ham</span> <span class=o>+</span> <span class=s1>&#39; and &#39;</span> <span class=o>+</span> <span class=n>eggs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>(</span><span class=s1>&#39;spam&#39;</span><span class=p>)</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chensoul.com/tags/python/>python</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chensoul.com/>ChenSoul</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src=https://umami.chensoul.com/script.js data-website-id=f110cfa0-b737-4690-a032-2b9073a57fc3></script>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>