<!doctype html><html lang=en-US prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª grok_system_design_interview.pdf çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚"><title>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å— | ChenSoul</title>
<link rel=canonical href=https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/><link rel=preconnect href=https://fonts.font.im><link rel=preconnect href=https://fonts.loli.net crossorigin><link href="https://fonts.loli.net/css2?family=Roboto+Slab:wght@400;500;700&display=swap" rel=stylesheet><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chensoul.cc/images/favicon.webp"><meta name=twitter:title content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—"><meta name=twitter:description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª grok_system_design_interview.pdf çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚"><meta name=twitter:creator content="@ichensoul"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="chensoul"><meta property="og:url" content="https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/"><meta property="og:site_name" content="ChenSoul"><meta property="og:title" content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—"><meta property="og:description" content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª grok_system_design_interview.pdf çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-16T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-16T00:00:00+00:00"><meta property="article:tag" content="Architecture"><meta property="og:image" content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=name content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—"><meta itemprop=description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª grok_system_design_interview.pdf çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚"><meta itemprop=datePublished content="2023-11-16T00:00:00+00:00"><meta itemprop=dateModified content="2023-11-16T00:00:00+00:00"><meta itemprop=wordCount content="1193"><meta itemprop=image content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=keywords content="Architecture"><link rel=stylesheet href=https://cdnjs.loli.net/ajax/libs/font-awesome/6.4.0/css/all.min.css media=all><link rel=stylesheet href=/main.min.css type=text/css media=all><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"TechArticle","name":"[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—","headline":"[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—","inLanguage":"en-US","url":"https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/","description":"\u003cp\u003eè¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª \u003ca href=\"https://github.com/sharanyaa/grok_sdi_educative/blob/master/grok_system_design_interview.pdf\" target=\"_blank\"\u003egrok_system_design_interview.pdf\u003c/a\u003e çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚\u003c/p\u003e","wordCount":"1193","keywords":["architecture"],"datePublished":"2023-11-16T00:00:00Z","dateModified":"2023-11-16T00:00:00Z","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/"},"publisher":{"@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/"}},{"@context":"https://schema.org","@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/","sameAs":["https://x.com/ichensoul","https://github.com/chensoul","https://www.linkedin.com/in/","https://www.youtube.com/@chensoul","https://t.me/chensouls"]}]}</script><script defer src=https://umami.chensoul.cc/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script></head><body class="home blog post-layout-one-column"><button onclick=topFunction() id=scrollTopBtn title="Go to top">
<i class="fa-solid fa-arrow-up"></i></button><div id=header-top class=header-bar-wrap></div><div id=page class=site><a class="skip-link screen-reader-text" href=#content>Skip to content</a><header id=masthead class="site-header clearfix" role=banner><div class="header-main container clearfix"><div id=logo class="site-branding clearfix"><h1 class=site-title><a href=/ title=ChenSoul rel=home>ChenSoul</a></h1><p class=site-description>Java, Spring Boot, Microservice, Cloud, Architecture and DevOps Tutorials</p></div><div class="header-widgets clearfix"><aside id=search-2 class="header-widget widget_search"><form role=search method=get class=search-form onsubmit="return searchSite(event)"><label><span class=screen-reader-text>Search for:</span>
<input type=search class=search-field placeholder="Enter search keyword" name=query id=query title="Enter search keyword">
</label><button type=submit class=search-submit title=Search> <span class=genericon-search></span>
<span class=screen-reader-text>Search</span></button></form></aside></div></div><div id=main-navigation-wrap class=primary-navigation-wrap><nav id=main-navigation class="primary-navigation navigation container clearfix" role=navigation><ul id=menu-home class=main-navigation-menu><li class="menu-item menu-item-type-custom menu-item-object-custom
current-menu-item current_page_item menu-item-home"><a href=/>Home</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/spring-boot/>Spring Boot</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/architecture/>Architecture</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/microservice/>Microservice</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/kubernetes/>Kubernetes</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category
menu-item-has-children"><a href=/tutorials/>Tutorials</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/spring-boot-tutorials/>Spring Boot Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/microservice-tutorials/>Microservice Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/kubernetes-tutorials/>Kubernetes Tutorials</a></li></ul></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=https://github.com/chensoul target=_blank>About Me</a></li></ul></nav></div></header><div id=content class="site-content container clearfix"><section id=primary class="content-archive content-area post-content-area"><main id=main class=site-main role=main><article class="post type-post"><div class=post-inner-content><header class=entry-header><h2 class=entry-title><a href=https://blog.chensoul.cc/posts/2023/11/16/sdi-a-step-by-step-guide/ rel=bookmark title="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—">[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—</a></h2><div class=entry-meta><span class=meta-date><time class="entry-date published" datetime=2023-11-16T00:00:00>2023-11-16
</time></span><span class=meta-author><span class="author vcard">chensoul</span>
</span><span class="tagcloud post-tags"><i class="fa fa-tags"></i>&nbsp;
<a class="tag-cloud-link widget__link widget__link--taglist" href=/tags/architecture/ title=architecture>architecture</a></span></div></header><div class=entry-content><p>è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ª <a href=https://github.com/sharanyaa/grok_sdi_educative/blob/master/grok_system_design_interview.pdf target=_blank>grok_system_design_interview.pdf</a> çš„ä¸€ç¯‡æ–‡ç« ã€ŠSystem Design Interviews: A step by step guideã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—ã€‚</p><hr><p>A lot of software engineers struggle with system design interviews (SDIs) primarily because of three reasons:</p><blockquote><p>è®¸å¤šè½¯ä»¶å·¥ç¨‹å¸ˆåœ¨ç³»ç»Ÿè®¾è®¡é¢è¯•ï¼ˆSDIï¼‰ä¸­é‡åˆ°å›°éš¾ï¼Œä¸»è¦æ˜¯å› ä¸ºä»¥ä¸‹ä¸‰ä¸ªåŸå› ï¼š</p></blockquote><ul><li><p>The unstructured nature of SDIs, where they are asked to work on an open-ended design problem that doesnâ€™t have a standard answer.</p><blockquote><p>SDI çš„éç»“æ„åŒ–æ€§è´¨ï¼Œè¦æ±‚ä»–ä»¬è§£å†³æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆçš„å¼€æ”¾å¼è®¾è®¡é—®é¢˜ã€‚</p></blockquote></li><li><p>Their lack of experience in developing large scale systems.</p><blockquote><p>ä»–ä»¬ç¼ºä¹å¼€å‘å¤§å‹ç³»ç»Ÿçš„ç»éªŒã€‚</p></blockquote></li><li><p>They did not prepare for SDIs.</p><blockquote><p>ä»–ä»¬æ²¡æœ‰ä¸º SDI åšå¥½å‡†å¤‡ã€‚</p></blockquote></li></ul><p>Like coding interviews, candidates who havenâ€™t put a conscious effort to prepare for SDIs, mostly perform poorly especially at top companies like Google, Facebook, Amazon, Microsoft, etc. In these companies, candidates who donâ€™t perform above average, have a limited chance to get an offer. On the other hand, a good performance always results in a better offer (higher position and salary), since it shows the candidateâ€™s ability to handle a complex system.</p><blockquote><p>ä¸ç¼–ç é¢è¯•ä¸€æ ·ï¼Œæ²¡æœ‰åˆ»æ„å‡†å¤‡ SDI çš„å€™é€‰äººå¤§å¤šè¡¨ç°ä¸ä½³ï¼Œå°¤å…¶æ˜¯åœ¨ Googleã€Facebookã€äºšé©¬é€Šã€å¾®è½¯ç­‰é¡¶çº§å…¬å¸ã€‚åœ¨è¿™äº›å…¬å¸ä¸­ï¼Œè¡¨ç°ä¸é«˜äºå¹³å‡æ°´å¹³çš„å€™é€‰äººè·å¾—æŠ¥ä»·çš„æœºä¼šæœ‰é™ã€‚å¦ä¸€æ–¹é¢ï¼Œè‰¯å¥½çš„è¡¨ç°æ€»æ˜¯ä¼šå¸¦æ¥æ›´å¥½çš„å·¥ä½œæœºä¼šï¼ˆæ›´é«˜çš„èŒä½å’Œè–ªæ°´ï¼‰ï¼Œå› ä¸ºå®ƒæ˜¾ç¤ºäº†å€™é€‰äººå¤„ç†å¤æ‚ç³»ç»Ÿçš„èƒ½åŠ›ã€‚</p></blockquote><p>In this course, weâ€™ll follow a step by step approach to solve multiple design problems. First, letâ€™s go through these steps:</p><blockquote><p>åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†éµå¾ªé€æ­¥çš„æ–¹æ³•æ¥è§£å†³å¤šä¸ªè®¾è®¡é—®é¢˜ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š</p></blockquote><h2 id=step-1-requirements-clarifications>Step 1: Requirements clarifications</h2><blockquote><p><strong>æ­¥éª¤ 1ï¼šéœ€æ±‚æ¾„æ¸…</strong></p></blockquote><p>It is always a good idea to ask questions about the exact scope of the problem we are solving. Design questions are mostly open-ended, and they donâ€™t have ONE correct answer, thatâ€™s why clarifying ambiguities early in the interview becomes critical. Candidates who spend enough time to define the end goals of the system always have a better chance to be successful in the interview. Also, since we only have 35-40 minutes to design a (supposedly) large system, we should clarify what parts of the system we will be focusing on.</p><blockquote><p>è¯¢é—®æˆ‘ä»¬æ­£åœ¨è§£å†³çš„é—®é¢˜çš„ç¡®åˆ‡èŒƒå›´æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚è®¾è®¡é—®é¢˜å¤§å¤šæ˜¯å¼€æ”¾å¼çš„ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸€ä¸ªæ­£ç¡®çš„ç­”æ¡ˆï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨é¢è¯•åˆæœŸæ¾„æ¸…æ­§ä¹‰å˜å¾—è‡³å…³é‡è¦ã€‚èŠ±è¶³å¤Ÿæ—¶é—´æ¥å®šä¹‰ç³»ç»Ÿæœ€ç»ˆç›®æ ‡çš„å€™é€‰äººæ€»æ˜¯æœ‰æ›´å¥½çš„æœºä¼šåœ¨é¢è¯•ä¸­å–å¾—æˆåŠŸã€‚å¦å¤–ï¼Œç”±äºæˆ‘ä»¬åªæœ‰ 35-40 åˆ†é’Ÿçš„æ—¶é—´æ¥è®¾è®¡ä¸€ä¸ªï¼ˆæ®ç§°ï¼‰å¤§å‹ç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥æ˜ç¡®æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ç³»ç»Ÿçš„å“ªäº›éƒ¨åˆ†ã€‚</p></blockquote><p>Letâ€™s expand this with an actual example of designing a Twitter-like service. Here are some questions for designing Twitter that should be answered before moving on to the next steps:</p><blockquote><p>è®©æˆ‘ä»¬é€šè¿‡è®¾è®¡ç±»ä¼¼ Twitter çš„æœåŠ¡çš„å®é™…ç¤ºä¾‹æ¥æ‰©å±•è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹æ˜¯è®¾è®¡ Twitter æ—¶åº”å›ç­”çš„ä¸€äº›é—®é¢˜ï¼Œç„¶åå†ç»§ç»­ä¸‹ä¸€æ­¥ï¼š</p></blockquote><ul><li><p>Will users of our service be able to post tweets and follow other people?</p><blockquote><p>æˆ‘ä»¬æœåŠ¡çš„ç”¨æˆ·èƒ½å¤Ÿå‘å¸ƒæ¨æ–‡å¹¶å…³æ³¨å…¶ä»–äººå—ï¼Ÿ</p></blockquote></li><li><p>Should we also design to create and display the userâ€™s timeline?</p><blockquote><p>æˆ‘ä»¬è¿˜åº”è¯¥è®¾è®¡åˆ›å»ºå’Œæ˜¾ç¤ºç”¨æˆ·çš„æ—¶é—´çº¿å—ï¼Ÿ</p></blockquote></li><li><p>Will tweets contain photos and videos?</p><blockquote><p>æ¨æ–‡ä¼šåŒ…å«ç…§ç‰‡å’Œè§†é¢‘å—ï¼Ÿ</p></blockquote></li><li><p>Are we focusing on the backend only or are we developing the front-end too?</p><blockquote><p>æˆ‘ä»¬åªå…³æ³¨åç«¯è¿˜æ˜¯ä¹Ÿå¼€å‘å‰ç«¯ï¼Ÿ</p></blockquote></li><li><p>Will users be able to search tweets?</p><blockquote><p>ç”¨æˆ·èƒ½å¤Ÿæœç´¢æ¨æ–‡å—ï¼Ÿ</p></blockquote></li><li><p>Do we need to display hot trending topics?</p><blockquote><p>æˆ‘ä»¬éœ€è¦å±•ç¤ºçƒ­é—¨è¯é¢˜å—ï¼Ÿ</p></blockquote></li><li><p>Will there be any push notification for new (or important) tweets?</p><blockquote><p>æ–°çš„ï¼ˆæˆ–é‡è¦çš„ï¼‰æ¨æ–‡ä¼šæœ‰æ¨é€é€šçŸ¥å—ï¼Ÿ</p></blockquote></li></ul><p>All such question will determine how our end design will look like.</p><blockquote><p>æ‰€æœ‰è¿™äº›é—®é¢˜å°†å†³å®šæˆ‘ä»¬çš„æœ€ç»ˆè®¾è®¡ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚</p></blockquote><h2 id=step-2-system-interface-definition>Step 2: System interface definition</h2><blockquote><p><strong>æ­¥éª¤2 ï¼šç³»ç»Ÿæ¥å£å®šä¹‰</strong></p></blockquote><p>Define what APIs are expected from the system. This will not only establish the exact contract expected from the system, but will also ensure if we havenâ€™t gotten any requirements wrong. Some examples for our Twitter-like service will be:</p><blockquote><p>å®šä¹‰ç³»ç»ŸæœŸæœ›æä¾›å“ªäº› APIã€‚è¿™ä¸ä»…å¯ä»¥å»ºç«‹ç³»ç»Ÿæ‰€æœŸæœ›çš„å‡†ç¡®åˆåŒï¼Œè€Œä¸”è¿˜å¯ä»¥ç¡®ä¿æˆ‘ä»¬æ²¡æœ‰é”™è¯¯åœ°æå‡ºä»»ä½•è¦æ±‚ã€‚æˆ‘ä»¬ç±»ä¼¼ Twitter çš„æœåŠ¡çš„ä¸€äº›ç¤ºä¾‹å¦‚ä¸‹ï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>postTweet(user_id, tweet_data, tweet_location, user_location, timestamp, ...)
</span></span><span style=display:flex><span>generateTimeline(user_id, current_time, user_location, ...)
</span></span><span style=display:flex><span>markTweetFavorite(user_id, tweet_id, timestamp, ...)
</span></span></code></pre></div><h2 id=step-3-back-of-the-envelope-estimation>Step 3: Back-of-the-envelope estimation</h2><blockquote><p><strong>æ­¥éª¤ 3ï¼šç²—ç•¥ä¼°è®¡</strong></p></blockquote><p>It is always a good idea to estimate the scale of the system weâ€™re going to design. This will also help later when we will be focusing on scaling, partitioning, load balancing and caching.</p><blockquote><p>ä¼°è®¡æˆ‘ä»¬è¦è®¾è®¡çš„ç³»ç»Ÿçš„è§„æ¨¡æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å½“æˆ‘ä»¬ç¨åå…³æ³¨æ‰©å±•ã€åˆ†åŒºã€è´Ÿè½½å¹³è¡¡å’Œç¼“å­˜æ—¶ï¼Œè¿™ä¹Ÿä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p></blockquote><ul><li><p>What scale is expected from the system (e.g., number of new tweets, number of tweet views, number of timeline generations per sec., etc.)?</p><blockquote><p>ç³»ç»Ÿçš„é¢„æœŸè§„æ¨¡æ˜¯å¤šå°‘ï¼ˆä¾‹å¦‚ï¼Œæ–°æ¨æ–‡æ•°é‡ã€æ¨æ–‡æµè§ˆé‡ã€æ¯ç§’ç”Ÿæˆçš„æ—¶é—´çº¿æ•°é‡ç­‰ï¼‰ï¼Ÿ</p></blockquote></li><li><p>How much storage will we need? We will have different numbers if users can have photos and videos in their tweets.</p><blockquote><p>æˆ‘ä»¬éœ€è¦å¤šå°‘å­˜å‚¨ç©ºé—´ï¼Ÿå¦‚æœç”¨æˆ·çš„æ¨æ–‡ä¸­å¯ä»¥åŒ…å«ç…§ç‰‡å’Œè§†é¢‘ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸åŒçš„æ•°å­—ã€‚</p></blockquote></li><li><p>What network bandwidth usage are we expecting? This will be crucial in deciding how we will manage traffic and balance load between servers.</p><blockquote><p>æˆ‘ä»¬æœŸæœ›ä½¿ç”¨å¤šå°‘ç½‘ç»œå¸¦å®½ï¼Ÿè¿™å¯¹äºå†³å®šæˆ‘ä»¬å¦‚ä½•ç®¡ç†æµé‡å’Œå¹³è¡¡æœåŠ¡å™¨ä¹‹é—´çš„è´Ÿè½½è‡³å…³é‡è¦ã€‚</p></blockquote></li></ul><h2 id=step-4-defining-data-model>Step 4: Defining data model</h2><blockquote><p><strong>æ­¥éª¤ 4ï¼šå®šä¹‰æ•°æ®æ¨¡å‹</strong></p></blockquote><p>Defining the data model early will clarify how data will flow among different components of the system. Later, it will guide towards data partitioning and management. The candidate should be able to identify various entities of the system, how they will interact with each other, and different aspect of data management like storage, transportation, encryption, etc. Here are some entities for our Twitter- like service:</p><blockquote><p>å°½æ—©å®šä¹‰æ•°æ®æ¨¡å‹å°†é˜æ˜æ•°æ®å¦‚ä½•åœ¨ç³»ç»Ÿçš„ä¸åŒç»„ä»¶ä¹‹é—´æµåŠ¨ã€‚ç¨åï¼Œå®ƒå°†æŒ‡å¯¼æ•°æ®åˆ†åŒºå’Œç®¡ç†ã€‚è€ƒç”Ÿåº”è¯¥èƒ½å¤Ÿè¯†åˆ«ç³»ç»Ÿçš„å„ç§å®ä½“ï¼Œå®ƒä»¬å¦‚ä½•ç›¸äº’äº¤äº’ï¼Œä»¥åŠæ•°æ®ç®¡ç†çš„ä¸åŒæ–¹é¢ï¼Œå¦‚å­˜å‚¨ã€ä¼ è¾“ã€åŠ å¯†ç­‰ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬ç±»ä¼¼ Twitter æœåŠ¡çš„ä¸€äº›å®ä½“ï¼š</p></blockquote><p><strong>User:</strong> UserID, Name, Email, DoB, CreationDate, LastLogin, etc.</p><p><strong>Tweet:</strong> TweetID, Content, TweetLocation, NumberOfLikes, TimeStamp, etc.</p><p><strong>UserFollow:</strong> UserID1, UserID2</p><p><strong>FavoriteTweets:</strong> UserID, TweetID, TimeStamp</p><p>Which database system should we use? Will NoSQL like <a href=https://en.wikipedia.org/wiki/Apache_Cassandra target=_blank>Cassandra</a> best fit our needs, or should we use a MySQL-like solution? What kind of block storage should we use to store photos and videos?</p><blockquote><p>æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å“ªç§æ•°æ®åº“ç³»ç»Ÿï¼Ÿåƒ Cassandra è¿™æ ·çš„ NoSQL æ˜¯å¦æœ€é€‚åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ–è€…æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ç±»ä¼¼ MySQL çš„è§£å†³æ–¹æ¡ˆï¼Ÿæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ ·çš„å—å­˜å‚¨æ¥å­˜å‚¨ç…§ç‰‡å’Œè§†é¢‘ï¼Ÿ</p></blockquote><h2 id=step-5-high-level-design>Step 5: High-level design</h2><blockquote><p><strong>æ­¥éª¤ 5ï¼šé«˜å±‚è®¾è®¡</strong></p></blockquote><p>Draw a block diagram with 5-6 boxes representing the core components of our system. We should identify enough components that are needed to solve the actual problem from end-to-end.</p><blockquote><p>ç»˜åˆ¶ä¸€ä¸ªæ¡†å›¾ï¼Œå…¶ä¸­ 5-6 ä¸ªæ–¹æ¡†ä»£è¡¨æˆ‘ä»¬ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ã€‚æˆ‘ä»¬åº”è¯¥ç¡®å®šç«¯åˆ°ç«¯è§£å†³å®é™…é—®é¢˜æ‰€éœ€çš„è¶³å¤Ÿç»„ä»¶ã€‚</p></blockquote><p>For Twitter, at a high-level, we will need multiple application servers to serve all the read/write requests with load balancers in front of them for traffic distributions. If weâ€™re assuming that we will have a lot more read traffic (as compared to write), we can decide to have separate servers for handling these scenarios. On the backend, we need an efficient database that can store all the tweets and can support a huge number of reads. We will also need a distributed file storage system for storing photos and videos.</p><blockquote><p>å¯¹äº Twitterï¼Œåœ¨è¾ƒé«˜å±‚é¢ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ªåº”ç”¨ç¨‹åºæœåŠ¡å™¨æ¥æœåŠ¡æ‰€æœ‰è¯»/å†™è¯·æ±‚ï¼Œå¹¶åœ¨å®ƒä»¬å‰é¢æä¾›è´Ÿè½½å‡è¡¡å™¨ä»¥è¿›è¡Œæµé‡åˆ†é…ã€‚å¦‚æœæˆ‘ä»¬å‡è®¾æˆ‘ä»¬å°†æœ‰æ›´å¤šçš„è¯»å–æµé‡ï¼ˆä¸å†™å…¥ç›¸æ¯”ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šä½¿ç”¨å•ç‹¬çš„æœåŠ¡å™¨æ¥å¤„ç†è¿™äº›åœºæ™¯ã€‚åœ¨åç«¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé«˜æ•ˆçš„æ•°æ®åº“æ¥å­˜å‚¨æ‰€æœ‰çš„æ¨æ–‡ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒæµ·é‡è¯»å–ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿæ¥å­˜å‚¨ç…§ç‰‡å’Œè§†é¢‘ã€‚</p></blockquote><p><img src=/images/sdi-a-step-by-step-guide-01.webp alt=20231116_image-20231116072253280></p><h2 id=step-6-detailed-design>Step 6: Detailed design</h2><blockquote><p><strong>æ­¥éª¤ 6ï¼šè¯¦ç»†è®¾è®¡</strong></p></blockquote><p>Dig deeper into two or three components; interviewerâ€™s feedback should always guide us what parts of the system need further discussion. We should be able to present different approaches, their pros and cons, and explain why we will prefer one approach on the other. Remember there is no single answer, the only important thing is to consider tradeoffs between different options while keeping system constraints in mind.</p><blockquote><p>æ·±å…¥æŒ–æ˜ä¸¤ä¸ªæˆ–ä¸‰ä¸ªç»„ä»¶ï¼›é¢è¯•å®˜çš„åé¦ˆåº”è¯¥å§‹ç»ˆæŒ‡å¯¼æˆ‘ä»¬ç³»ç»Ÿçš„å“ªäº›éƒ¨åˆ†éœ€è¦è¿›ä¸€æ­¥è®¨è®ºã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿå±•ç¤ºä¸åŒçš„æ–¹æ³•åŠå…¶ä¼˜ç¼ºç‚¹ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬æ›´å–œæ¬¢ä¸€ç§æ–¹æ³•è€Œä¸æ˜¯å¦ä¸€ç§æ–¹æ³•ã€‚è¯·è®°ä½ï¼Œæ²¡æœ‰å•ä¸€çš„ç­”æ¡ˆï¼Œå”¯ä¸€é‡è¦çš„æ˜¯è€ƒè™‘ä¸åŒé€‰é¡¹ä¹‹é—´çš„æƒè¡¡ï¼ŒåŒæ—¶ç‰¢è®°ç³»ç»Ÿçº¦æŸã€‚</p></blockquote><ul><li><p>Since we will be storing a massive amount of data, how should we partition our data to distribute it to multiple databases? Should we try to store all the data of a user on the same database? What issue could it cause?</p><blockquote><p>ç”±äºæˆ‘ä»¬å°†å­˜å‚¨å¤§é‡æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºä»¥å°†å…¶åˆ†å¸ƒåˆ°å¤šä¸ªæ•°æ®åº“ï¼Ÿæˆ‘ä»¬æ˜¯å¦åº”è¯¥å°è¯•å°†ç”¨æˆ·çš„æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Ÿå®ƒå¯èƒ½ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p></blockquote></li><li><p>How will we handle hot users who tweet a lot or follow lots of people?</p><blockquote><p>æˆ‘ä»¬å°†å¦‚ä½•å¤„ç†ç»å¸¸å‘æ¨æ–‡æˆ–å…³æ³¨å¾ˆå¤šäººçš„çƒ­é—¨ç”¨æˆ·ï¼Ÿ</p></blockquote></li><li><p>Since usersâ€™ timeline will contain the most recent (and relevant) tweets, should we try to store our data in such a way that is optimized for scanning the latest tweets?</p><blockquote><p>ç”±äºç”¨æˆ·çš„æ—¶é—´çº¿å°†åŒ…å«æœ€æ–°çš„ï¼ˆå’Œç›¸å…³çš„ï¼‰æ¨æ–‡ï¼Œæˆ‘ä»¬æ˜¯å¦åº”è¯¥å°è¯•å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®æ˜¯å¦ä»¥é’ˆå¯¹æ‰«ææœ€æ–°æ¨æ–‡è¿›è¡Œä¼˜åŒ–çš„æ–¹å¼ï¼Ÿ</p></blockquote></li><li><p>How much and at which layer should we introduce cache to speed things up?</p><blockquote><p>æˆ‘ä»¬åº”è¯¥åœ¨å¤šå¤§ç¨‹åº¦ä¸Šä»¥åŠåœ¨å“ªä¸€å±‚å¼•å…¥ç¼“å­˜æ¥åŠ å¿«é€Ÿåº¦ï¼Ÿ</p></blockquote></li><li><p>What components need better load balancing?</p><blockquote><p>å“ªäº›ç»„ä»¶éœ€è¦æ›´å¥½çš„è´Ÿè½½å¹³è¡¡ï¼Ÿ</p></blockquote></li></ul><h2 id=step-7-identifying-and-resolving-bottlenecks>Step 7: Identifying and resolving bottlenecks</h2><blockquote><p><strong>æ­¥éª¤ 7ï¼šè¯†åˆ«å¹¶è§£å†³ç“¶é¢ˆ</strong></p></blockquote><p>Try to discuss as many bottlenecks as possible and different approaches to mitigate them.</p><blockquote><p>å°è¯•è®¨è®ºå°½å¯èƒ½å¤šçš„ç“¶é¢ˆä»¥åŠç¼“è§£ç“¶é¢ˆçš„ä¸åŒæ–¹æ³•ã€‚</p></blockquote><ul><li><p>Is there any single point of failure in our system? What are we doing to mitigate it?</p><blockquote><p>æˆ‘ä»¬çš„ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å•ç‚¹æ•…éšœï¼Ÿæˆ‘ä»¬æ­£åœ¨é‡‡å–ä»€ä¹ˆæªæ–½æ¥ç¼“è§£è¿™ç§æƒ…å†µï¼Ÿ</p></blockquote></li><li><p>Do we have enough replicas of the data so that if we lose a few servers we can still serve our users?</p><blockquote><p>æˆ‘ä»¬æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ•°æ®å‰¯æœ¬ï¼Œä»¥ä¾¿åœ¨å¤±å»ä¸€äº›æœåŠ¡å™¨æ—¶æˆ‘ä»¬ä»ç„¶å¯ä»¥ä¸ºæˆ‘ä»¬çš„æœåŠ¡æä¾›æœåŠ¡ç”¨æˆ·ï¼Ÿ</p></blockquote></li><li><p>Similarly, do we have enough copies of different services running such that a few failures will not cause total system shutdown?</p><blockquote><p>åŒæ ·ï¼Œæˆ‘ä»¬æ˜¯å¦æœ‰è¶³å¤Ÿçš„è¿è¡Œä¸åŒæœåŠ¡çš„å‰¯æœ¬ï¼Œä»¥ä¾¿å°‘æ•°æ•…éšœä¼šå‘ç”Ÿä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå…³é—­å—ï¼Ÿ</p></blockquote></li><li><p>How are we monitoring the performance of our service? Do we get alerts whenever critical components fail or their performance degrades?</p><blockquote><p>æˆ‘ä»¬å¦‚ä½•ç›‘æ§æˆ‘ä»¬çš„æœåŠ¡è¡¨ç°ï¼Ÿæˆ‘ä»¬æ˜¯å¦ä¼šåœ¨å…³é”®æ—¶åˆ»æ”¶åˆ°è­¦æŠ¥ç»„ä»¶å‡ºç°æ•…éšœæˆ–æ€§èƒ½ä¸‹é™ï¼Ÿ</p></blockquote></li></ul><h2 id=summary>Summary</h2><blockquote><p><strong>æ¦‚æ‹¬</strong></p></blockquote><p>In short, preparation and being organized during the interview are the keys to be successful in system design interviews. The above-mentioned steps should guide you to remain on track and cover all the different aspects while designing a system.</p><blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œé¢è¯•è¿‡ç¨‹ä¸­çš„å‡†å¤‡å’Œç»„ç»‡æ˜¯ç³»ç»Ÿè®¾è®¡é¢è¯•æˆåŠŸçš„å…³é”®ã€‚ä¸Šè¿°æ­¥éª¤åº”æŒ‡å¯¼æ‚¨åœ¨è®¾è®¡ç³»ç»Ÿæ—¶ä¿æŒæ­£è½¨å¹¶æ¶µç›–æ‰€æœ‰ä¸åŒæ–¹é¢ã€‚</p></blockquote><p>Letâ€™s apply the above guidelines to design a few systems that are asked in SDIs.</p><blockquote><p>è®©æˆ‘ä»¬åº”ç”¨ä¸Šè¿°æŒ‡å—æ¥è®¾è®¡ SDI ä¸­è¦æ±‚çš„ä¸€äº›ç³»ç»Ÿã€‚</p></blockquote><hr><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href=https://www.designgurus.io/course-play/grokking-the-system-design-interview/doc/638c0b5aac93e7ae59a1af63 target=_blank>https://www.designgurus.io/course-play/grokking-the-system-design-interview/doc/638c0b5aac93e7ae59a1af63</a></li></ul></div><div><div style=font-weight:700>Share this post:</div><a class=social-link-item href="https://twitter.com/intent/tweet?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e8%ae%bf%e8%b0%88%ef%bc%9a%e5%88%86%e6%ad%a5%e6%8c%87%e5%8d%97 https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f" target=_blank rel="noopener noreferrer" title="Click to share on Twitter"><i class="fa-brands fa-square-twitter fa-2xl" style=color:#55acee></i>
</a><a class=social-link-item href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f&title=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e8%ae%bf%e8%b0%88%ef%bc%9a%e5%88%86%e6%ad%a5%e6%8c%87%e5%8d%97" target=_blank rel="noopener noreferrer" title="Click to share on LinkedIn"><i class="fa-brands fa-linkedin fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://telegram.me/share/url?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e8%ae%bf%e8%b0%88%ef%bc%9a%e5%88%86%e6%ad%a5%e6%8c%87%e5%8d%97&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f" target=_blank rel="noopener noreferrer" title="Click to share on telegram"><i class="fa-brands fa-telegram fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://reddit.com/submit?url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f&title=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e8%ae%bf%e8%b0%88%ef%bc%9a%e5%88%86%e6%ad%a5%e6%8c%87%e5%8d%97" target=_blank rel="noopener noreferrer" title="Click to share on reddit"><i class="fa-brands fa-reddit fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f" target=_blank rel="noopener noreferrer" title="Click to share on facebook"><i class="fa-brands fa-facebook fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://api.whatsapp.com/send?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1%e8%ae%bf%e8%b0%88%ef%bc%9a%e5%88%86%e6%ad%a5%e6%8c%87%e5%8d%97%20-%20https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f16%2fsdi-a-step-by-step-guide%2f" target=_blank rel="noopener noreferrer" title="Click to share on whatsapp"><i class="fa-brands fa-whatsapp fa-2xl" style=color:#007bb5></i></a></div></div></article><nav class="navigation post-navigation" role=navigation><h2 class=screen-reader-text>Post navigation</h2><div class=nav-links><div class=nav-previous><a href=/posts/2023/11/16/system-design-master-template/ rel=next><span class=post-title>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡ä¸»æ¨¡æ¿</span></a></div><div class=nav-next><a href=/posts/2023/11/16/designing-a-url-shortening-service/ rel=prev><span class=post-title>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡ç±»ä¼¼ TinyURL çš„ URL ç¼©çŸ­æœåŠ¡</span></a></div></div></nav><h2>Related content</h2><ul><li><a href=/posts/2023/12/14/designing-twitter/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Twitter</a></li><li><a href=/posts/2023/12/05/distributed-id-generator/>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼IDç”Ÿæˆå™¨ä¿è¯IDæŒ‰æ—¶é—´æœ‰åºï¼Ÿ</a></li><li><a href=/posts/2023/11/24/designing-dropbox/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Dropbox</a></li><li><a href=/posts/2023/11/24/designing-facebook-messenger/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Facebook Messenger</a></li><li><a href=/posts/2023/11/24/designing-instagram/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Instagram</a></li><li><a href=/posts/2023/11/24/designing-pastebin/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Pastebin</a></li><li><a href=/posts/2023/11/17/dns/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ</a></li><li><a href=/posts/2023/11/17/designing-a-url-shortening-service/>å¦‚ä½•è®¾è®¡ä¸€ä¸ªçŸ­ç½‘å€æœåŠ¡</a></li><li><a href=/posts/2023/11/16/system-design-master-template/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡ä¸»æ¨¡æ¿</a></li><li><a href=/posts/2023/11/16/designing-a-url-shortening-service/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡ç±»ä¼¼ TinyURL çš„ URL ç¼©çŸ­æœåŠ¡</a></li></ul></main></section></div><div id=footer class=footer-wrap><footer id=colophon class="site-footer container clearfix" role=contentinfo><div id=footer-text class=site-info><span class=credit-link>Made with ğŸ©·
by <a href=/ target=_blank rel="noopener noreferrer">ChenSoul</a></span></div></footer></div></div><script type=text/javascript src=/main.min.js></script></body></html>