<!doctype html><html lang=en-US prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ Domain Name System è¿™ç¯‡ç« èŠ‚ã€‚"><title>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ | ChenSoul</title>
<link rel=canonical href=https://blog.chensoul.cc/posts/2023/11/17/dns/><link rel=preconnect href=https://fonts.font.im><link rel=preconnect href=https://fonts.loli.net crossorigin><link href="https://fonts.loli.net/css2?family=Roboto+Slab:wght@400;500;700&display=swap" rel=stylesheet><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chensoul.cc/images/favicon.webp"><meta name=twitter:title content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ"><meta name=twitter:description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ Domain Name System è¿™ç¯‡ç« èŠ‚ã€‚"><meta name=twitter:creator content="@ichensoul"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="chensoul"><meta property="og:url" content="https://blog.chensoul.cc/posts/2023/11/17/dns/"><meta property="og:site_name" content="ChenSoul"><meta property="og:title" content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ"><meta property="og:description" content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ Domain Name System è¿™ç¯‡ç« èŠ‚ã€‚"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-17T00:00:00+00:00"><meta property="article:tag" content="Architecture"><meta property="og:image" content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=name content="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ"><meta itemprop=description content="è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ Domain Name System è¿™ç¯‡ç« èŠ‚ã€‚"><meta itemprop=datePublished content="2023-11-17T00:00:00+00:00"><meta itemprop=dateModified content="2023-11-17T00:00:00+00:00"><meta itemprop=wordCount content="2809"><meta itemprop=image content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=keywords content="Architecture"><link rel=stylesheet href=https://cdnjs.loli.net/ajax/libs/font-awesome/6.4.0/css/all.min.css media=all><link rel=stylesheet href=/main.min.css type=text/css media=all><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"TechArticle","name":"[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ","headline":"[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ","inLanguage":"en-US","url":"https://blog.chensoul.cc/posts/2023/11/17/dns/","description":"\u003cp\u003eè¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ \u003ca href=\"https://www.educative.io/courses/grokking-modern-system-design-interview-for-engineers-managers/introduction-to-domain-name-system-dns\" target=\"_blank\"\u003eDomain Name System\u003c/a\u003e è¿™ç¯‡ç« èŠ‚ã€‚\u003c/p\u003e","wordCount":"2809","keywords":["architecture"],"datePublished":"2023-11-17T00:00:00Z","dateModified":"2023-11-17T00:00:00Z","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.cc/posts/2023/11/17/dns/"},"publisher":{"@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/posts/2023/11/17/dns/"}},{"@context":"https://schema.org","@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/","sameAs":["https://x.com/ichensoul","https://github.com/chensoul","https://www.linkedin.com/in/","https://www.youtube.com/@chensoul","https://t.me/chensouls"]}]}</script><script defer src=https://umami.chensoul.cc/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script></head><body class="home blog post-layout-one-column"><button onclick=topFunction() id=scrollTopBtn title="Go to top">
<i class="fa-solid fa-arrow-up"></i></button><div id=header-top class=header-bar-wrap></div><div id=page class=site><a class="skip-link screen-reader-text" href=#content>Skip to content</a><header id=masthead class="site-header clearfix" role=banner><div class="header-main container clearfix"><div id=logo class="site-branding clearfix"><h1 class=site-title><a href=/ title=ChenSoul rel=home>ChenSoul</a></h1><p class=site-description>Java, Spring Boot, Microservice, Cloud, Architecture and DevOps Tutorials</p></div><div class="header-widgets clearfix"><aside id=search-2 class="header-widget widget_search"><form role=search method=get class=search-form onsubmit="return searchSite(event)"><label><span class=screen-reader-text>Search for:</span>
<input type=search class=search-field placeholder="Enter search keyword" name=query id=query title="Enter search keyword">
</label><button type=submit class=search-submit title=Search> <span class=genericon-search></span>
<span class=screen-reader-text>Search</span></button></form></aside></div></div><div id=main-navigation-wrap class=primary-navigation-wrap><nav id=main-navigation class="primary-navigation navigation container clearfix" role=navigation><ul id=menu-home class=main-navigation-menu><li class="menu-item menu-item-type-custom menu-item-object-custom
current-menu-item current_page_item menu-item-home"><a href=/>Home</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/spring-boot/>Spring Boot</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/architecture/>Architecture</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/microservice/>Microservice</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/kubernetes/>Kubernetes</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category
menu-item-has-children"><a href=/tutorials/>Tutorials</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/spring-boot-tutorials/>Spring Boot Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/microservice-tutorials/>Microservice Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/kubernetes-tutorials/>Kubernetes Tutorials</a></li></ul></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=https://github.com/chensoul target=_blank>About Me</a></li></ul></nav></div></header><div id=content class="site-content container clearfix"><section id=primary class="content-archive content-area post-content-area"><main id=main class=site-main role=main><article class="post type-post"><div class=post-inner-content><header class=entry-header><h2 class=entry-title><a href=https://blog.chensoul.cc/posts/2023/11/17/dns/ rel=bookmark title="[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ">[è¯‘]ã€ŠGrokking the System Design Interviewã€‹åŸŸåç³»ç»Ÿ</a></h2><div class=entry-meta><span class=meta-date><time class="entry-date published" datetime=2023-11-17T00:00:00>2023-11-17
</time></span><span class=meta-author><span class="author vcard">chensoul</span>
</span><span class="tagcloud post-tags"><i class="fa fa-tags"></i>&nbsp;
<a class="tag-cloud-link widget__link widget__link--taglist" href=/tags/architecture/ title=architecture>architecture</a></span></div></header><div class=entry-content><p>è¿™æ˜¯ä¸€ç¯‡åŒè¯­ç¿»è¯‘çš„æ–‡ç« ï¼ŒåŸæ–‡å‡ºè‡ªã€ŠGrokking the System Design Interviewã€‹æ•™ç¨‹çš„ <a href=https://www.educative.io/courses/grokking-modern-system-design-interview-for-engineers-managers/introduction-to-domain-name-system-dns target=_blank>Domain Name System</a> è¿™ç¯‡ç« èŠ‚ã€‚</p><hr><h1 id=introduction-to-domain-name-system-dns>Introduction to Domain Name System (DNS)</h1><blockquote><p>åŸŸåç³»ç»Ÿ (DNS) ç®€ä»‹</p></blockquote><h1 id=the-origins-of-dns>The origins of DNS</h1><blockquote><p>DNS çš„èµ·æº</p></blockquote><p>Letâ€™s consider the example of a mobile phone where a unique number is associated with each user. To make calls to friends, we can initially try to memorize some of the phone numbers. However, as the number of contacts grows, weâ€™ll have to use a phone book to keep track of all our contacts. This way, whenever we need to make a call, weâ€™ll refer to the phone book and dial the number we need.</p><blockquote><p>è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªç§»åŠ¨ç”µè¯çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å·ç ã€‚ä¸ºäº†ç»™æœ‹å‹æ‰“ç”µè¯ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥å°è¯•è®°ä½ä¸€äº›ç”µè¯å·ç ã€‚ç„¶è€Œï¼Œéšç€è”ç³»äººæ•°é‡çš„å¢åŠ ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ä½¿ç”¨ç”µè¯ç°¿æ¥è·Ÿè¸ªæ‰€æœ‰è”ç³»äººã€‚è¿™æ ·ï¼Œæ¯å½“æˆ‘ä»¬éœ€è¦æ‰“ç”µè¯æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæŸ¥é˜…ç”µè¯ç°¿å¹¶æ‹¨æ‰“æˆ‘ä»¬éœ€è¦çš„å·ç ã€‚</p></blockquote><p>Similarly, computers are uniquely identified by IP addressesâ€”for example, <code>104.18.2.119</code> is an IP address. We use IP addresses to visit a website hosted on a machine. Since humans cannot easily remember IP addresses to visit domain names (an example domain name being <a href=http://educative.io/ target=_blank>educative.io</a>), we need a phone book-like repository that can maintain all mappings of domain names to IP addresses. In this chapter, weâ€™ll see how DNS serves as the Internetâ€™s phone book.</p><blockquote><p>åŒæ ·ï¼Œè®¡ç®—æœºç”± IP åœ°å€å”¯ä¸€æ ‡è¯†ï¼Œä¾‹å¦‚ï¼Œ <code>104.18.2.119</code> æ˜¯ä¸€ä¸ª IP åœ°å€ã€‚æˆ‘ä»¬ä½¿ç”¨ IP åœ°å€æ¥è®¿é—®è®¡ç®—æœºä¸Šæ‰˜ç®¡çš„ç½‘ç«™ã€‚ç”±äºäººç±»æ— æ³•è½»æ˜“è®°ä½ IP åœ°å€æ¥è®¿é—®åŸŸåï¼ˆä¾‹å¦‚åŸŸå eduducative.ioï¼‰ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»ä¼¼ç”µè¯ç°¿çš„å­˜å‚¨åº“æ¥ç»´æŠ¤åŸŸååˆ° IP åœ°å€çš„æ‰€æœ‰æ˜ å°„ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ DNS å¦‚ä½•å……å½“äº’è”ç½‘çš„ç”µè¯ç°¿ã€‚</p></blockquote><p><img src=/images/educative-dns-06.webp alt></p><h2 id=what-is-dns>What is DNS?</h2><blockquote><p>ä»€ä¹ˆæ˜¯ DNSï¼Ÿ</p></blockquote><p>The <strong>domain name system (DNS)</strong> is the Internetâ€™s naming service that maps human-friendly domain names to machine-readable IP addresses. The service of DNS is transparent to users. When a user enters a domain name in the browser, the browser has to translate the domain name to IP address by asking the DNS infrastructure. Once the desired IP address is obtained, the userâ€™s request is forwarded to the destination web server.</p><blockquote><p>åŸŸåç³»ç»Ÿ (DNS) æ˜¯äº’è”ç½‘çš„å‘½åæœåŠ¡ï¼Œå®ƒå°†äººç±»å‹å¥½çš„åŸŸåæ˜ å°„åˆ°æœºå™¨å¯è¯»çš„ IP åœ°å€ã€‚ DNSæœåŠ¡å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åŸŸåæ—¶ï¼Œæµè§ˆå™¨å¿…é¡»é€šè¿‡è¯¢é—® DNS åŸºç¡€è®¾æ–½å°†åŸŸåè½¬æ¢ä¸º IP åœ°å€ã€‚ä¸€æ—¦è·å¾—æ‰€éœ€çš„ IP åœ°å€ï¼Œç”¨æˆ·çš„è¯·æ±‚å°±ä¼šè½¬å‘åˆ°ç›®æ ‡ Web æœåŠ¡å™¨ã€‚</p></blockquote><p>The slides below show the high-level flow of the working of DNS:</p><blockquote><p>ä¸‹é¢çš„å¹»ç¯ç‰‡æ˜¾ç¤ºäº† DNS å·¥ä½œçš„é«˜çº§æµç¨‹ï¼š</p></blockquote><p><img src=/images/educative-dns-07.webp alt=educative-dns-07></p><p>The entire operation is performed very quickly. Therefore, the end user experiences minimum delay. Weâ€™ll also see how browsers save some of the frequently used mappings for later use in the next lesson.</p><blockquote><p>æ•´ä¸ªæ“ä½œè¿›è¡Œå¾—éå¸¸å¿«ã€‚å› æ­¤ï¼Œæœ€ç»ˆç”¨æˆ·ä½“éªŒåˆ°çš„å»¶è¿Ÿæœ€å°ã€‚æˆ‘ä»¬è¿˜å°†äº†è§£æµè§ˆå™¨å¦‚ä½•ä¿å­˜ä¸€äº›å¸¸ç”¨çš„æ˜ å°„ä»¥ä¾›ä¸‹ä¸€è¯¾ç¨åä½¿ç”¨ã€‚</p></blockquote><h2 id=important-details>Important details</h2><blockquote><p>é‡è¦ç»†èŠ‚</p></blockquote><p>Letâ€™s highlight some of the important details about DNS, some of which weâ€™ll cover in the next lesson:</p><blockquote><p>è®©æˆ‘ä»¬é‡ç‚¹ä»‹ç»æœ‰å…³ DNS çš„ä¸€äº›é‡è¦ç»†èŠ‚ï¼Œå…¶ä¸­ä¸€äº›æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€è¯¾ä¸­ä»‹ç»ï¼š</p></blockquote><ul><li><p><strong>Name servers:</strong> Itâ€™s important to understand that the DNS isnâ€™t a single server. Itâ€™s a complete infrastructure with numerous servers. DNS servers that respond to usersâ€™ queries are called <strong>name servers</strong>.</p><blockquote><p>åç§°æœåŠ¡å™¨ï¼šé‡è¦çš„æ˜¯è¦äº†è§£ DNS ä¸æ˜¯å•ä¸ªæœåŠ¡å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ‹¥æœ‰å¤§é‡æœåŠ¡å™¨çš„å®Œæ•´åŸºç¡€è®¾æ–½ã€‚å“åº”ç”¨æˆ·æŸ¥è¯¢çš„ DNS æœåŠ¡å™¨ç§°ä¸ºåç§°æœåŠ¡å™¨ã€‚</p></blockquote></li><li><p><strong>Resource records:</strong> The DNS database stores domain name to IP address mappings in the form of resource records (RR). The RR is the smallest unit of information that users request from the name servers. There are different types of RRs. The table below describes common RRs. The three important pieces of information are <em>type</em>, <em>name</em>, and <em>value</em>. The <em>name</em> and <em>value</em> change depending upon the <em>type</em> of the RR.</p><blockquote><p>èµ„æºè®°å½•ï¼šDNS æ•°æ®åº“ä»¥èµ„æºè®°å½• (RR) çš„å½¢å¼å­˜å‚¨åŸŸååˆ° IP åœ°å€çš„æ˜ å°„ã€‚ RR æ˜¯ç”¨æˆ·ä»åç§°æœåŠ¡å™¨è¯·æ±‚çš„æœ€å°ä¿¡æ¯å•å…ƒã€‚ RR æœ‰ä¸åŒç±»å‹ã€‚ä¸‹è¡¨æè¿°äº†å¸¸è§çš„ RRã€‚ä¸‰ä¸ªé‡è¦çš„ä¿¡æ¯æ˜¯ç±»å‹ã€åç§°å’Œå€¼ã€‚åç§°å’Œå€¼æ ¹æ® RR çš„ç±»å‹è€Œå˜åŒ–ã€‚</p></blockquote></li></ul><h2 id=common-types-of-resource-records>Common Types of Resource Records</h2><blockquote><p>èµ„æºè®°å½•çš„å¸¸è§ç±»å‹</p></blockquote><table><thead><tr><th>**Type **</th><th>**Description **</th><th>**Name **</th><th><strong>Value</strong></th><th>**Example (Type, Name, Value) **</th></tr></thead><tbody><tr><td>A</td><td>Provides the hostname to IP address mapping</td><td>Hostname</td><td>IP address</td><td>(A, relay1.main.educative.io,104.18.2.119)</td></tr><tr><td>NS</td><td>Provides the hostname that is the authoritative DNS for a domain name</td><td>Domain name</td><td>Hostname</td><td>(NS, educative.io, dns.educative.io)</td></tr><tr><td>CNAME</td><td>Provides the mapping from alias to canonical hostname</td><td>Hostname</td><td>Canonical name</td><td>(CNAME, educative.io, server1.primary.educative.io)</td></tr><tr><td>MX</td><td>Provides the mapping of mail server from alias to canonical hostname</td><td>Hostname</td><td>Canonical name</td><td>(MX, mail.educative.io, mailserver1.backup.educative.io)</td></tr></tbody></table><ul><li><p><strong>Caching:</strong> DNS uses caching at different layers to reduce request latency for the user. Caching plays an important role in reducing the burden on DNS infrastructure because it has to cater to the queries of the entire Internet.</p><blockquote><p>ç¼“å­˜ï¼šDNS ä½¿ç”¨ä¸åŒå±‚çš„ç¼“å­˜æ¥å‡å°‘ç”¨æˆ·çš„è¯·æ±‚å»¶è¿Ÿã€‚ç¼“å­˜åœ¨å‡è½» DNS åŸºç¡€è®¾æ–½çš„è´Ÿæ‹…æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Œå› ä¸ºå®ƒå¿…é¡»æ»¡è¶³æ•´ä¸ªäº’è”ç½‘çš„æŸ¥è¯¢ã€‚</p></blockquote></li><li><p><strong>Hierarchy:</strong> DNS name servers are in a hierarchical form. The hierarchical structure allows DNS to be highly scalable because of its increasing size and query load. In the next lesson, weâ€™ll look at how a tree-like structure is used to manage the entire DNS database.</p><blockquote><p>å±‚æ¬¡ç»“æ„ï¼šDNS åç§°æœåŠ¡å™¨é‡‡ç”¨å±‚æ¬¡ç»“æ„å½¢å¼ã€‚ç”±äºå…¶è§„æ¨¡å’ŒæŸ¥è¯¢è´Ÿè½½ä¸æ–­å¢åŠ ï¼Œåˆ†å±‚ç»“æ„ä½¿ DNS å…·æœ‰é«˜åº¦å¯æ‰©å±•æ€§ã€‚åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•ä½¿ç”¨æ ‘çŠ¶ç»“æ„æ¥ç®¡ç†æ•´ä¸ª DNS æ•°æ®åº“ã€‚</p></blockquote></li></ul><p>Letâ€™s explore more details of the above points in the next lesson to get more clarity.</p><blockquote><p>è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€è¯¾ä¸­æ¢è®¨ä¸Šè¿°è¦ç‚¹çš„æ›´å¤šç»†èŠ‚ï¼Œä»¥ä¾¿æ›´åŠ æ¸…æ™°ã€‚</p></blockquote><h1 id=how-the-domain-name-system-works>How the Domain Name System Works</h1><blockquote><p>åŸŸåç³»ç»Ÿå¦‚ä½•è¿ä½œ</p></blockquote><p>Through this lesson, weâ€™ll answer the following questions:</p><blockquote><p>é€šè¿‡æœ¬è¯¾ï¼Œæˆ‘ä»¬å°†å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p></blockquote><ul><li><p>How is the DNS hierarchy formed using various types of DNS name servers?</p><blockquote><p>å¦‚ä½•ä½¿ç”¨å„ç§ç±»å‹çš„ DNS åç§°æœåŠ¡å™¨å½¢æˆ DNS å±‚æ¬¡ç»“æ„ï¼Ÿ</p></blockquote></li><li><p>How is caching performed at different levels of the Internet to reduce the querying burden over the DNS infrastructure?</p><blockquote><p>å¦‚ä½•åœ¨äº’è”ç½‘çš„ä¸åŒçº§åˆ«æ‰§è¡Œç¼“å­˜ä»¥å‡è½» DNS åŸºç¡€è®¾æ–½çš„æŸ¥è¯¢è´Ÿæ‹…ï¼Ÿ</p></blockquote></li><li><p>How does the distributed nature of the DNS infrastructure help its robustness?</p><blockquote><p>DNS åŸºç¡€è®¾æ–½çš„åˆ†å¸ƒå¼ç‰¹æ€§å¦‚ä½•æœ‰åŠ©äºå…¶ç¨³å¥æ€§ï¼Ÿ</p></blockquote></li></ul><p>Letâ€™s get started.</p><blockquote><p>è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p></blockquote><h2 id=dns-hierarchy>DNS hierarchy</h2><blockquote><p>DNSå±‚æ¬¡ç»“æ„</p></blockquote><p>As stated before, the DNS isnâ€™t a single server that accepts requests and responds to user queries. Itâ€™s a complete infrastructure with name servers at different hierarchies.</p><blockquote><p>å¦‚å‰æ‰€è¿°ï¼ŒDNS ä¸æ˜¯æ¥å—è¯·æ±‚å¹¶å“åº”ç”¨æˆ·æŸ¥è¯¢çš„å•ä¸ªæœåŠ¡å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„åŸºç¡€è®¾æ–½ï¼Œå…·æœ‰ä¸åŒå±‚æ¬¡ç»“æ„çš„åç§°æœåŠ¡å™¨ã€‚</p></blockquote><p>There are mainly four types of servers in the DNS hierarchy:</p><blockquote><p>DNS å±‚æ¬¡ç»“æ„ä¸­ä¸»è¦æœ‰å››ç§ç±»å‹çš„æœåŠ¡å™¨ï¼š</p></blockquote><ol><li><p><strong>DNS resolver:</strong> Resolvers initiate the querying sequence and forward requests to the other DNS name servers. Typically, DNS resolvers lie within the premise of the userâ€™s network. However, DNS resolvers can also cater to usersâ€™ DNS queries through caching techniques, as we will see shortly. These servers can also be called local or default servers.</p><blockquote><p>DNS è§£æå™¨ï¼šè§£æå™¨å¯åŠ¨æŸ¥è¯¢åºåˆ—å¹¶å°†è¯·æ±‚è½¬å‘åˆ°å…¶ä»– DNS åç§°æœåŠ¡å™¨ã€‚é€šå¸¸ï¼ŒDNS è§£æå™¨ä½äºç”¨æˆ·ç½‘ç»œçš„å†…éƒ¨ã€‚ç„¶è€Œï¼ŒDNS è§£æå™¨è¿˜å¯ä»¥é€šè¿‡ç¼“å­˜æŠ€æœ¯æ¥æ»¡è¶³ç”¨æˆ·çš„ DNS æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°ã€‚è¿™äº›æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç§°ä¸ºæœ¬åœ°æˆ–é»˜è®¤æœåŠ¡å™¨ã€‚</p></blockquote></li><li><p><strong>Root-level name servers:</strong> These servers receive requests from local servers. Root name servers maintain name servers based on top-level domain names, such as <code>.com</code>, <code>.edu</code>, <code>.us</code>, and so on. For instance, when a user requests the IP address of <a href=http://educative.io/ target=_blank>educative.io</a>, root-level name servers will return a list of top-level domain (TLD) servers that hold the IP addresses of the <code>.io</code> domain.</p><blockquote><p>æ ¹çº§åç§°æœåŠ¡å™¨ï¼šè¿™äº›æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªæœ¬åœ°æœåŠ¡å™¨çš„è¯·æ±‚ã€‚æ ¹åç§°æœåŠ¡å™¨ç»´æŠ¤åŸºäºé¡¶çº§åŸŸåçš„åç§°æœåŠ¡å™¨ï¼Œä¾‹å¦‚ <code>.com</code> ã€ <code>.edu</code> ã€ <code>.us</code> ç­‰ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¯·æ±‚ educative.io çš„ IP åœ°å€æ—¶ï¼Œæ ¹çº§åç§°æœåŠ¡å™¨å°†è¿”å›ä¿å­˜ <code>.io</code> åŸŸçš„ IP åœ°å€çš„é¡¶çº§åŸŸ (TLD) æœåŠ¡å™¨åˆ—è¡¨ã€‚</p></blockquote></li><li><p><strong>Top-level domain (TLD) name servers:</strong> These servers hold the IP addresses of authoritative name servers. The querying party will get a list of IP addresses that belong to the authoritative servers of the organization.</p><blockquote><p>é¡¶çº§åŸŸå (TLD) åç§°æœåŠ¡å™¨ï¼šè¿™äº›æœåŠ¡å™¨ä¿å­˜æƒå¨åç§°æœåŠ¡å™¨çš„ IP åœ°å€ã€‚æŸ¥è¯¢æ–¹å°†è·å¾—å±äºè¯¥ç»„ç»‡çš„æƒå¨æœåŠ¡å™¨çš„IPåœ°å€åˆ—è¡¨ã€‚</p></blockquote></li><li><p><strong>Authoritative name servers:</strong> These are the organizationâ€™s DNS name servers that provide the IP addresses of the web or application servers.</p><blockquote><p>æƒå¨åç§°æœåŠ¡å™¨ï¼šè¿™äº›æ˜¯ç»„ç»‡çš„ DNS åç§°æœåŠ¡å™¨ï¼Œæä¾› Web æˆ–åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„ IP åœ°å€ã€‚</p></blockquote></li></ol><p><img src=/images/educative-dns-01.webp alt=image-20231117165436915></p><blockquote><p><strong>Question</strong></p><blockquote><p>é—®é¢˜</p></blockquote><p>How are DNS names processed? For example, will <a href=http://educative.io/ target=_blank>educative.io</a> be processed from left to right or right to left?</p><blockquote><p>DNS åç§°æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿä¾‹å¦‚ï¼Œeducative.io æ˜¯ä»å·¦åˆ°å³è¿˜æ˜¯ä»å³åˆ°å·¦å¤„ç†ï¼Ÿ</p></blockquote><p>Unlike UNIX files, which are processed from left to right, DNS names are processed from right to left. In the case of <a href=http://educative.io/ target=_blank>educative.io</a>, the resolvers will first resolve the <code>.io</code> part, then <code>educative</code>, and so on.</p><blockquote><p>ä¸ä»å·¦åˆ°å³å¤„ç†çš„ UNIX æ–‡ä»¶ä¸åŒï¼ŒDNS åç§°æ˜¯ä»å³åˆ°å·¦å¤„ç†çš„ã€‚å¯¹äº educative.ioï¼Œè§£æå™¨å°†é¦–å…ˆè§£æ <code>.io</code> éƒ¨åˆ†ï¼Œç„¶åè§£æ <code>educative</code> ï¼Œä¾æ­¤ç±»æ¨ã€‚</p></blockquote><p>Visually, however, the DNS hierarchy can be viewed as a tree.</p><blockquote><p>ç„¶è€Œï¼Œä»è§†è§‰ä¸Šçœ‹ï¼ŒDNS å±‚æ¬¡ç»“æ„å¯ä»¥è§†ä¸ºä¸€æ£µæ ‘ã€‚</p></blockquote></blockquote><h3 id=iterative-versus-recursive-query-resolution>Iterative versus recursive query resolution</h3><blockquote><p>è¿­ä»£ä¸é€’å½’æŸ¥è¯¢è§£æ</p></blockquote><p>There are two ways to perform a DNS query:</p><blockquote><p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æ‰§è¡Œ DNS æŸ¥è¯¢ï¼š</p></blockquote><ol><li><p><strong>Iterative:</strong> The local server requests the root, TLD, and the authoritative servers for the IP address.</p><blockquote><p>è¿­ä»£ï¼šæœ¬åœ°æœåŠ¡å™¨å‘æ ¹æœåŠ¡å™¨ã€TLD å’Œæƒå¨æœåŠ¡å™¨è¯·æ±‚ IP åœ°å€ã€‚</p></blockquote></li><li><p><strong>Recursive:</strong> The end user requests the local server. The local server further requests the root DNS name servers. The root name servers forward the requests to other name servers.</p><blockquote><p>é€’å½’ï¼šæœ€ç»ˆç”¨æˆ·è¯·æ±‚æœ¬åœ°æœåŠ¡å™¨ã€‚æœ¬åœ°æœåŠ¡å™¨è¿›ä¸€æ­¥è¯·æ±‚æ ¹ DNS åç§°æœåŠ¡å™¨ã€‚æ ¹åç§°æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘åˆ°å…¶ä»–åç§°æœåŠ¡å™¨ã€‚</p></blockquote></li></ol><p>In the following illustration (on the left), DNS query resolution is iterative from the perspective of the local/ISP server:</p><blockquote><p>åœ¨ä¸‹å›¾ä¸­ï¼ˆå·¦ï¼‰ï¼Œä»æœ¬åœ°/ISPæœåŠ¡å™¨çš„è§’åº¦æ¥çœ‹ï¼ŒDNSæŸ¥è¯¢è§£ææ˜¯è¿­ä»£çš„ï¼š</p></blockquote><p><img src=/images/educative-dns-02.webp alt=educative-dns-02></p><p><strong>Note:</strong> Typically, an iterative query is preferred to reduce query load on DNS infrastructure.</p><blockquote><p>æ³¨æ„ï¼šé€šå¸¸ï¼Œé¦–é€‰è¿­ä»£æŸ¥è¯¢æ¥å‡å°‘ DNS åŸºç¡€è®¾æ–½ä¸Šçš„æŸ¥è¯¢è´Ÿè½½ã€‚</p></blockquote><p>These days, weâ€™ll find many third-party public DNS resolvers offered by Google, Cloudflare, OpenDNS, and many more. The interesting fact is that these public DNS servers may provide quicker responses than the local ISP DNS facilities.</p><blockquote><p>å¦‚ä»Šï¼Œæˆ‘ä»¬ä¼šå‘ç° Googleã€Cloudflareã€OpenDNS ç­‰æä¾›çš„è®¸å¤šç¬¬ä¸‰æ–¹å…¬å…± DNS è§£æå™¨ã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™äº›å…¬å…± DNS æœåŠ¡å™¨å¯èƒ½æ¯”æœ¬åœ° ISP DNS è®¾æ–½æä¾›æ›´å¿«çš„å“åº”ã€‚</p></blockquote><h2 id=caching>Caching</h2><blockquote><p>ç¼“å­˜</p></blockquote><p><strong>Caching</strong> refers to the temporary storage of frequently requested <a href=https://www.educative.io/edpresso/what-is-the-difference-between-dns-a-record-and-cname target=_blank>resource records</a>. A record is a data unit within the DNS database that shows a name-to-value binding. Caching reduces response time to the user and decreases network traffic. When we use caching at different hierarchies, it can reduce a lot of querying burden on the DNS infrastructure. Caching can be implemented in the browser, operating systems, local name server within the userâ€™s network, or the ISPâ€™s DNS resolvers.</p><blockquote><p>ç¼“å­˜æ˜¯æŒ‡ä¸´æ—¶å­˜å‚¨ç»å¸¸è¯·æ±‚çš„èµ„æºè®°å½•ã€‚ è®°å½•æ˜¯ DNS æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæ•°æ®å•å…ƒï¼Œæ˜¾ç¤ºåç§°åˆ°å€¼çš„ç»‘å®šã€‚ç¼“å­˜å‡å°‘äº†ç”¨æˆ·çš„å“åº”æ—¶é—´å¹¶å‡å°‘äº†ç½‘ç»œæµé‡ã€‚å½“æˆ‘ä»¬åœ¨ä¸åŒçš„å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œå®ƒå¯ä»¥å‡è½» DNS åŸºç¡€è®¾æ–½çš„å¤§é‡æŸ¥è¯¢è´Ÿæ‹…ã€‚ç¼“å­˜å¯ä»¥åœ¨æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿã€ç”¨æˆ·ç½‘ç»œå†…çš„æœ¬åœ°åç§°æœåŠ¡å™¨æˆ– ISP çš„ DNS è§£æå™¨ä¸­å®ç°ã€‚</p></blockquote><p>The slideshow below demonstrates the power of caching in the DNS:</p><blockquote><p>ä¸‹é¢çš„å¹»ç¯ç‰‡å±•ç¤ºäº† DNS ä¸­ç¼“å­˜çš„å¼ºå¤§åŠŸèƒ½ï¼š</p></blockquote><p><img src=/images/educative-dns-03.webp alt=educative-dns-03></p><p><strong>Note:</strong> Even if there is no cache available to resolve a userâ€™s query and itâ€™s imperative to visit the DNS infrastructure, caching can still be beneficial. The local server or ISP DNS resolver can cache the IP addresses of TLD servers or authoritative servers and avoid requesting the root-level server.</p><blockquote><p>æ³¨æ„ï¼šå³ä½¿æ²¡æœ‰å¯ç”¨çš„ç¼“å­˜æ¥è§£æç”¨æˆ·çš„æŸ¥è¯¢å¹¶ä¸”å¿…é¡»è®¿é—® DNS åŸºç¡€è®¾æ–½ï¼Œç¼“å­˜ä»ç„¶æ˜¯æœ‰ç›Šçš„ã€‚æœ¬åœ°æœåŠ¡å™¨æˆ–ISP DNSè§£æå™¨å¯ä»¥ç¼“å­˜TLDæœåŠ¡å™¨æˆ–æƒå¨æœåŠ¡å™¨çš„IPåœ°å€ï¼Œå¹¶é¿å…è¯·æ±‚æ ¹çº§æœåŠ¡å™¨ã€‚</p></blockquote><h2 id=dns-as-a-distributed-system>DNS as a distributed system</h2><blockquote><p>DNS ä½œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿ</p></blockquote><p>Although the DNS hierarchy facilitates the distributed Internet that we know today, itâ€™s a distributed system itself. The distributed nature of DNS has the following advantages:</p><blockquote><p>å°½ç®¡ DNS å±‚æ¬¡ç»“æ„ä¿ƒè¿›äº†æˆ‘ä»¬ä»Šå¤©æ‰€çŸ¥çš„åˆ†å¸ƒå¼äº’è”ç½‘ï¼Œä½†å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ DNSçš„åˆ†å¸ƒå¼ç‰¹æ€§å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p></blockquote><ul><li><p>It avoids becoming a single point of failure (SPOF).</p><blockquote><p>å®ƒé¿å…æˆä¸ºå•ç‚¹æ•…éšœ (SPOF)ã€‚</p></blockquote></li><li><p>It achieves low query latency so users can get responses from nearby servers.</p><blockquote><p>å®ƒå®ç°äº†ä½æŸ¥è¯¢å»¶è¿Ÿï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä»é™„è¿‘çš„æœåŠ¡å™¨è·å¾—å“åº”ã€‚</p></blockquote></li><li><p>It gets a higher degree of flexibility during maintenance and updates or upgrades. For example, if one DNS server is down or overburdened, another DNS server can respond to user queries.</p><blockquote><p>å®ƒåœ¨ç»´æŠ¤å’Œæ›´æ–°æˆ–å‡çº§è¿‡ç¨‹ä¸­è·å¾—æ›´é«˜ç¨‹åº¦çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å° DNS æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæˆ–è´Ÿè½½è¿‡é‡ï¼Œå¦ä¸€å° DNS æœåŠ¡å™¨å¯ä»¥å“åº”ç”¨æˆ·æŸ¥è¯¢ã€‚</p></blockquote></li></ul><p>There are 13 logical root name servers (named letter <strong>A</strong> through <strong>M</strong>) with many instances spread throughout the globe. These servers are managed by 12 different organizations.</p><blockquote><p>æœ‰ 13 ä¸ªé€»è¾‘æ ¹åç§°æœåŠ¡å™¨ï¼ˆå‘½åä¸ºå­—æ¯ A åˆ° Mï¼‰ï¼Œå…¶ä¸­è®¸å¤šå®ä¾‹éå¸ƒå…¨çƒã€‚è¿™äº›æœåŠ¡å™¨ç”± 12 ä¸ªä¸åŒçš„ç»„ç»‡ç®¡ç†ã€‚</p></blockquote><p>Letâ€™s now go over how DNS is scalable, reliable, and consistent.</p><blockquote><p>ç°åœ¨è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ DNS å¦‚ä½•å®ç°å¯æ‰©å±•ã€å¯é å’Œä¸€è‡´ã€‚</p></blockquote><h3 id=highly-scalable>Highly scalable</h3><blockquote><p>é«˜åº¦å¯æ‰©å±•</p></blockquote><p>Due to its hierarchical nature, DNS is a highly scalable system. Roughly 1,000 replicated instances of 13 root-level servers are spread throughout the world strategically to handle user queries. The working labor is divided among TLD and root servers to handle a query and, finally, the authoritative servers that are managed by the organizations themselves to make the entire system work. As shown in the DNS hierarchy tree above, different services handle different portions of the tree enabling scalability and manageability of the system.</p><blockquote><p>ç”±äºå…¶åˆ†å±‚æ€§è´¨ï¼ŒDNS æ˜¯ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„ç³»ç»Ÿã€‚ 13 å°æ ¹çº§æœåŠ¡å™¨çš„å¤§çº¦ 1,000 ä¸ªå¤åˆ¶å®ä¾‹æˆ˜ç•¥æ€§åœ°åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°ï¼Œä»¥å¤„ç†ç”¨æˆ·æŸ¥è¯¢ã€‚å·¥ä½œåŠ³åŠ›è¢«åˆ†é…åˆ° TLD å’Œæ ¹æœåŠ¡å™¨æ¥å¤„ç†æŸ¥è¯¢ï¼Œæœ€ååˆ†é…åˆ°ç”±ç»„ç»‡è‡ªå·±ç®¡ç†çš„æƒå¨æœåŠ¡å™¨ä»¥ä½¿æ•´ä¸ªç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚å¦‚ä¸Šé¢çš„ DNS å±‚æ¬¡ç»“æ„æ ‘æ‰€ç¤ºï¼Œä¸åŒçš„æœåŠ¡å¤„ç†æ ‘çš„ä¸åŒéƒ¨åˆ†ï¼Œä»è€Œå®ç°ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç®¡ç†æ€§ã€‚</p></blockquote><h3 id=reliable>Reliable</h3><blockquote><p>å¯é æ€§</p></blockquote><p>Three main reasons make the DNS a reliable system:</p><blockquote><p>DNS æˆä¸ºå¯é ç³»ç»Ÿçš„ä¸‰ä¸ªä¸»è¦åŸå› ï¼š</p></blockquote><ol><li><p><strong>Caching:</strong> The caching is done in the browser, the operating system, and the local name server, and the ISP DNS resolvers also maintain a rich cache of frequently visited services. Even if some DNS servers are temporarily down, cached records can be served to make DNS a reliable system.</p><blockquote><p>ç¼“å­˜ï¼šç¼“å­˜æ˜¯åœ¨æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿå’Œæœ¬åœ°åç§°æœåŠ¡å™¨ä¸­å®Œæˆçš„ï¼ŒISP DNS è§£æå™¨è¿˜ç»´æŠ¤ç€ç»å¸¸è®¿é—®çš„æœåŠ¡çš„ä¸°å¯Œç¼“å­˜ã€‚å³ä½¿æŸäº› DNS æœåŠ¡å™¨æš‚æ—¶å…³é—­ï¼Œä¹Ÿå¯ä»¥æä¾›ç¼“å­˜è®°å½•ï¼Œä½¿ DNS æˆä¸ºä¸€ä¸ªå¯é çš„ç³»ç»Ÿã€‚</p></blockquote></li><li><p><strong>Server replication:</strong> DNS has replicated copies of each logical server spread systematically across the globe to entertain user requests at low latency. The redundant servers improve the reliability of the overall system.</p><blockquote><p>æœåŠ¡å™¨å¤åˆ¶ï¼šDNS ç³»ç»Ÿåœ°å¤åˆ¶äº†éå¸ƒå…¨çƒçš„æ¯ä¸ªé€»è¾‘æœåŠ¡å™¨çš„å‰¯æœ¬ï¼Œä»¥ä½å»¶è¿Ÿå¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚å†—ä½™æœåŠ¡å™¨æé«˜äº†æ•´ä¸ªç³»ç»Ÿçš„å¯é æ€§ã€‚</p></blockquote></li><li><p><strong>Protocol:</strong> Although many clients rely on the unreliable User Datagram Protocol (UDP) to request and receive DNS responses, it is important to acknowledge that UDP also offers distinct advantages. UDP is much faster and, therefore, improves DNS performance. Furthermore, Internet serviceâ€™s reliability has improved since its inception, so UDP is usually favored over TCP. A DNS resolver can resend the UDP request if it didnâ€™t get a reply to a previous one. This request-response needs just one round trip, which provides a shorter delay as compared to TCP, which needs a three-way handshake before data exchange.</p><blockquote><p>åè®®ï¼šå°½ç®¡è®¸å¤šå®¢æˆ·ç«¯ä¾èµ–ä¸å¯é çš„ç”¨æˆ·æ•°æ®æŠ¥åè®® (UDP) æ¥è¯·æ±‚å’Œæ¥æ”¶ DNS å“åº”ï¼Œä½†é‡è¦çš„æ˜¯è¦æ‰¿è®¤ UDP ä¹Ÿæä¾›äº†ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚ UDP é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤å¯ä»¥æé«˜ DNS æ€§èƒ½ã€‚æ­¤å¤–ï¼Œè‡ªè¯ç”Ÿä»¥æ¥ï¼Œäº’è”ç½‘æœåŠ¡çš„å¯é æ€§å·²å¾—åˆ°æé«˜ï¼Œå› æ­¤ UDP é€šå¸¸æ¯” TCP æ›´å—é’çã€‚å¦‚æœ DNS è§£æå™¨æ²¡æœ‰æ”¶åˆ°å‰ä¸€ä¸ªè¯·æ±‚çš„å›å¤ï¼Œåˆ™å¯ä»¥é‡æ–°å‘é€ UDP è¯·æ±‚ã€‚è¿™ç§è¯·æ±‚-å“åº”ä»…éœ€è¦ä¸€æ¬¡å¾€è¿”ï¼Œä¸åœ¨æ•°æ®äº¤æ¢ä¹‹å‰éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ TCP ç›¸æ¯”ï¼Œå»¶è¿Ÿæ›´çŸ­ã€‚</p></blockquote></li></ol><blockquote><p><strong>Question</strong></p><blockquote><p>é—®é¢˜</p></blockquote><p>What happens if a network is congested? Should DNS continue using UDP?</p><blockquote><p>å¦‚æœç½‘ç»œæ‹¥å¡ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ DNS æ˜¯å¦åº”è¯¥ç»§ç»­ä½¿ç”¨ UDPï¼Ÿ</p></blockquote><p>Typically, DNS uses UDP. However, DNS can use TCP when its message size exceeds the original packet size of 512 Bytes. This is because large-size packets are more prone to be damaged in congested networks. DNS always uses TCP for zone transfers.</p><blockquote><p>é€šå¸¸ï¼ŒDNS ä½¿ç”¨ UDPã€‚ä½†æ˜¯ï¼Œå½“ DNS çš„æ¶ˆæ¯å¤§å°è¶…è¿‡åŸå§‹æ•°æ®åŒ…å¤§å° 512 å­—èŠ‚æ—¶ï¼ŒDNS å¯ä»¥ä½¿ç”¨ TCPã€‚è¿™æ˜¯å› ä¸ºå¤§å°ºå¯¸æ•°æ®åŒ…åœ¨æ‹¥å¡çš„ç½‘ç»œä¸­æ›´å®¹æ˜“è¢«æŸåã€‚ DNS å§‹ç»ˆä½¿ç”¨ TCP è¿›è¡ŒåŒºåŸŸä¼ è¾“ã€‚</p></blockquote><p>Some clients prefer DNS over TCP to employ transport layer security for privacy reasons.</p><blockquote><p>å‡ºäºéšç§åŸå› ï¼ŒæŸäº›å®¢æˆ·ç«¯æ›´å–œæ¬¢ä½¿ç”¨ DNS è€Œä¸æ˜¯ TCP æ¥é‡‡ç”¨ä¼ è¾“å±‚å®‰å…¨æ€§ã€‚</p></blockquote></blockquote><h3 id=consistent>Consistent</h3><blockquote><p>ä¸€è‡´æ€§</p></blockquote><p>DNS uses various protocols to update and transfer information among replicated servers in a hierarchy. DNS compromises on strong consistency to achieve high performance because data is read frequently from DNS databases as compared to writing. However, DNS provides eventual consistency and updates records on replicated servers lazily. Typically, it can take from a few seconds up to three days to update records on the DNS servers across the Internet. The time it takes to propagate information among different DNS clusters depends on the DNS infrastructure, the size of the update, and which part of the DNS tree is being updated.</p><blockquote><p>DNS ä½¿ç”¨å„ç§åè®®åœ¨å±‚æ¬¡ç»“æ„ä¸­çš„å¤åˆ¶æœåŠ¡å™¨ä¹‹é—´æ›´æ–°å’Œä¼ è¾“ä¿¡æ¯ã€‚ DNS ä¼šåœ¨å¼ºä¸€è‡´æ€§æ–¹é¢åšå‡ºå¦¥åä»¥å®ç°é«˜æ€§èƒ½ï¼Œå› ä¸ºä¸å†™å…¥ç›¸æ¯”ï¼Œä» DNS æ•°æ®åº“ä¸­è¯»å–æ•°æ®çš„é¢‘ç‡æ›´é«˜ã€‚ç„¶è€Œï¼ŒDNS æä¾›æœ€ç»ˆä¸€è‡´æ€§å¹¶å»¶è¿Ÿæ›´æ–°å¤åˆ¶æœåŠ¡å™¨ä¸Šçš„è®°å½•ã€‚é€šå¸¸ï¼Œæ›´æ–° Internet ä¸Š DNS æœåŠ¡å™¨ä¸Šçš„è®°å½•å¯èƒ½éœ€è¦å‡ ç§’é’Ÿåˆ°ä¸‰å¤©çš„æ—¶é—´ã€‚åœ¨ä¸åŒ DNS é›†ç¾¤ä¹‹é—´ä¼ æ’­ä¿¡æ¯æ‰€éœ€çš„æ—¶é—´å–å†³äº DNS åŸºç¡€è®¾æ–½ã€æ›´æ–°çš„å¤§å°ä»¥åŠæ­£åœ¨æ›´æ–° DNS æ ‘çš„å“ªä¸€éƒ¨åˆ†ã€‚</p></blockquote><p>Consistency can suffer because of caching too. Since authoritative servers are located within the organization, it may be possible that certain resource records are updated on the authoritative servers in case of server failures at the organization. Therefore, cached records at the default/local and ISP servers may be outdated. To mitigate this issue, each cached record comes with an expiration time called <strong>time-to-live (TTL)</strong>.</p><blockquote><p>ç”±äºç¼“å­˜ï¼Œä¸€è‡´æ€§ä¹Ÿä¼šå—åˆ°å½±å“ã€‚ç”±äºæƒå¨æœåŠ¡å™¨ä½äºç»„ç»‡å†…ï¼Œå› æ­¤åœ¨ç»„ç»‡ä¸­çš„æœåŠ¡å™¨å‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼Œæƒå¨æœåŠ¡å™¨ä¸Šçš„æŸäº›èµ„æºè®°å½•å¯èƒ½ä¼šè¢«æ›´æ–°ã€‚å› æ­¤ï¼Œé»˜è®¤/æœ¬åœ°å’Œ ISP æœåŠ¡å™¨ä¸Šçš„ç¼“å­˜è®°å½•å¯èƒ½ä¼šè¿‡æ—¶ã€‚ä¸ºäº†ç¼“è§£æ­¤é—®é¢˜ï¼Œæ¯ä¸ªç¼“å­˜è®°å½•éƒ½å¸¦æœ‰ä¸€ä¸ªç§°ä¸ºç”Ÿå­˜æ—¶é—´ (TTL) çš„è¿‡æœŸæ—¶é—´ã€‚</p></blockquote><blockquote><p><strong>Question</strong></p><blockquote><p>é—®é¢˜</p></blockquote><p>To maintain high availability, should the TTL value be large or small?</p><blockquote><p>ä¸ºäº†ä¿æŒé«˜å¯ç”¨æ€§ï¼ŒTTLå€¼åº”è¯¥å¤§è¿˜æ˜¯å°ï¼Ÿ</p></blockquote><p>To maintain high availability, the TTL value should be small. This is because if any server or cluster fails, the organization can update the resource records right away. Users will experience non-availability only for the time the TTL isnâ€™t expired. However, if the TTL is large, the organization will update its resource records, whereas users will keep pinging the outdated server that would have crashed long ago. Companies that long for high availability maintain a TTL value as low as 120 seconds. Therefore, even in case of a failure, the maximum downtime is a few minutes.</p><blockquote><p>ä¸ºäº†ä¿æŒé«˜å¯ç”¨æ€§ï¼ŒTTLå€¼åº”è¯¥å¾ˆå°ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœä»»ä½•æœåŠ¡å™¨æˆ–é›†ç¾¤å‘ç”Ÿæ•…éšœï¼Œç»„ç»‡å¯ä»¥ç«‹å³æ›´æ–°èµ„æºè®°å½•ã€‚ä»…åœ¨ TTL æœªè¿‡æœŸæœŸé—´ï¼Œç”¨æˆ·æ‰ä¼šé‡åˆ°ä¸å¯ç”¨çš„æƒ…å†µã€‚ç„¶è€Œï¼Œå¦‚æœ TTL å¾ˆå¤§ï¼Œç»„ç»‡å°†æ›´æ–°å…¶èµ„æºè®°å½•ï¼Œè€Œç”¨æˆ·å°†ç»§ç»­ ping æ—©å°±å´©æºƒçš„è¿‡æ—¶æœåŠ¡å™¨ã€‚æ¸´æœ›é«˜å¯ç”¨æ€§çš„å…¬å¸å°† TTL å€¼ç»´æŒåœ¨ä½è‡³ 120 ç§’ã€‚å› æ­¤ï¼Œå³ä½¿å‘ç”Ÿæ•…éšœï¼Œæœ€é•¿åœæœºæ—¶é—´ä¹Ÿåªæœ‰å‡ åˆ†é’Ÿã€‚</p></blockquote></blockquote><h2 id=test-it-out>Test it out</h2><blockquote><p>æµ‹è¯•ä¸€ä¸‹</p></blockquote><p>Letâ€™s run a couple of commands. Click on the terminal to execute the following commands. Copy the following commands in the terminal to run them. Study the output of the commands:</p><blockquote><p>è®©æˆ‘ä»¬è¿è¡Œå‡ ä¸ªå‘½ä»¤ã€‚å•å‡»ç»ˆç«¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚åœ¨ç»ˆç«¯ä¸­å¤åˆ¶ä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œå®ƒä»¬ã€‚ç ”ç©¶å‘½ä»¤çš„è¾“å‡ºï¼š</p></blockquote><ol><li><code>nslookup www.google.com</code></li><li><code>dig www.google.com</code></li></ol><p>The following slide deck highlights some important aspects of <code>nslookup</code> and <code>dig</code> output.</p><blockquote><p>ä»¥ä¸‹å¹»ç¯ç‰‡é‡ç‚¹ä»‹ç»äº† <code>nslookup</code> å’Œ <code>dig</code> è¾“å‡ºçš„ä¸€äº›é‡è¦æ–¹é¢ã€‚</p></blockquote><p><img src=/images/educative-dns-04.webp alt=educative-dns-04></p><p><img src=/images/educative-dns-05.webp alt=educative-dns-05></p><p>Letâ€™s go through the meaning of the output:</p><blockquote><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¾“å‡ºçš„å«ä¹‰ï¼š</p></blockquote><h3 id=the-nslookup-output>The <code>nslookup</code> output</h3><blockquote><p><code>nslookup</code> è¾“å‡º</p></blockquote><ul><li><p>The <code>Non-authoritative answer</code>, as the name suggests, is the answer provided by a server that is not the authoritative server of Google. It isnâ€™t in the list of authoritative nameservers that Google maintains. So, where does the answer come from? The answer is provided by second, third, and fourth-hand name servers configured to reply to our DNS queryâ€”for example, our university or office DNS resolver, our ISP nameserver, our ISPâ€™s ISP nameserver, and so on. In short, it can be considered as a cached version of Googleâ€™s authoritative nameservers response. If we try multiple domain names, weâ€™ll realize that we receive a cached response most of the time.</p><blockquote><p><code>Non-authoritative answer</code> ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ç”±é Google æƒå¨æœåŠ¡å™¨æä¾›çš„ç­”æ¡ˆã€‚å®ƒä¸åœ¨ Google ç»´æŠ¤çš„æƒå¨åŸŸåæœåŠ¡å™¨åˆ—è¡¨ä¸­ã€‚é‚£ä¹ˆï¼Œç­”æ¡ˆä»ä½•è€Œæ¥ï¼Ÿç­”æ¡ˆç”±é…ç½®ä¸ºå›å¤æˆ‘ä»¬çš„ DNS æŸ¥è¯¢çš„ç¬¬äºŒæ‰‹ã€ç¬¬ä¸‰æ‰‹å’Œç¬¬å››æ‰‹åç§°æœåŠ¡å™¨æä¾›ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„å¤§å­¦æˆ–åŠå…¬å®¤ DNS è§£æå™¨ã€æˆ‘ä»¬çš„ ISP åç§°æœåŠ¡å™¨ã€æˆ‘ä»¬ ISP çš„ ISP åç§°æœåŠ¡å™¨ç­‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒå¯ä»¥è¢«è§†ä¸º Google æƒå¨åŸŸåæœåŠ¡å™¨å“åº”çš„ç¼“å­˜ç‰ˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬å°è¯•å¤šä¸ªåŸŸåï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½ä¼šæ”¶åˆ°ç¼“å­˜çš„å“åº”ã€‚</p></blockquote></li><li><p>If we run the same command multiple times, weâ€™ll receive the same IP addresses list but in a different order each time. The reason for that is DNS is indirectly performing <a href=https://www.educative.io/collection/page/10370001/4941429335392256/4521972679049216 target=_blank>load balancing</a>. Itâ€™s an important term that weâ€™ll gain familiarity with in the coming lessons.</p><blockquote><p>å¦‚æœæˆ‘ä»¬å¤šæ¬¡è¿è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°ç›¸åŒçš„ IP åœ°å€åˆ—è¡¨ï¼Œä½†æ¯æ¬¡çš„é¡ºåºä¸åŒã€‚åŸå› æ˜¯ DNS é—´æ¥æ‰§è¡Œè´Ÿè½½å¹³è¡¡ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æœ¯è¯­ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ç†Ÿæ‚‰å®ƒã€‚</p></blockquote></li></ul><h3 id=the-dig-output>The <code>dig</code> output</h3><blockquote><p><code>dig</code> è¾“å‡º</p></blockquote><ul><li><p>The <code>Query time: 4 msec</code> represents the time it takes to get a response from the DNS server. For various reasons, these numbers may be different in our case.</p><blockquote><p><code>Query time: 4 msec</code> è¡¨ç¤ºä» DNS æœåŠ¡å™¨è·å–å“åº”æ‰€éœ€çš„æ—¶é—´ã€‚ç”±äºå„ç§åŸå› ï¼Œè¿™äº›æ•°å­—åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­å¯èƒ½æœ‰æ‰€ä¸åŒã€‚</p></blockquote></li><li><p>The <code>300</code> value in the <em><code>ANSWER SECTION</code></em> represents the number of seconds the cache is maintained in the DNS resolver. This means that Googleâ€™s ADNS keeps a TTL value of five minutes (300/60 <em>sec</em>).</p><blockquote><p><code>ANSWER SECTION</code> ä¸­çš„ <code>300</code> å€¼è¡¨ç¤º DNS è§£æå™¨ä¸­ç»´æŠ¤ç¼“å­˜çš„ç§’æ•°ã€‚è¿™æ„å‘³ç€ Google çš„ ADNS å°† TTL å€¼ä¿æŒä¸ºäº”åˆ†é’Ÿï¼ˆ300/60 ç§’ï¼‰ã€‚</p></blockquote></li></ul><p><strong>Note:</strong> We invite you to test different services for their TTL and query times to strengthen your understanding. You may use the above terminal for this purpose.</p><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬é‚€è¯·æ‚¨æµ‹è¯•ä¸åŒæœåŠ¡çš„ TTL å’ŒæŸ¥è¯¢æ—¶é—´ï¼Œä»¥åŠ æ·±æ‚¨çš„ç†è§£ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸Šè¿°ç»ˆç«¯æ¥å®ç°æ­¤ç›®çš„ã€‚</p></blockquote><blockquote><p><strong>Question</strong></p><blockquote><p>é—®é¢˜</p></blockquote><p>If we need DNS to tell us which IP to reach a website or service, how will we know the DNS resolverâ€™s IP address? (It seems like a chicken-and-egg problem!)</p><blockquote><p>å¦‚æœæˆ‘ä»¬éœ€è¦ DNS å‘Šè¯‰æˆ‘ä»¬å“ªä¸ª IP å¯ä»¥è®¿é—®ç½‘ç«™æˆ–æœåŠ¡ï¼Œæˆ‘ä»¬å¦‚ä½•çŸ¥é“ DNS è§£æå™¨çš„ IP åœ°å€ï¼Ÿ ï¼ˆè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ï¼ï¼‰</p></blockquote><p>End usersâ€™ operating systems have configuration files (<code>/etc/resolv.conf</code> in Linux) with the DNS resolversâ€™ IP addresses, which in turn obtain all information for them. (Often, DHCP provides the default DNS resolver IP address along with other configurations.) The end-systems request DNS resolves for any DNS queries. DNS resolvers have special software installed to resolve queries through the DNS infrastructure. The root serverâ€™s IP addresses are within the special software. Typically, the Berkeley Internet Name Domain (BIND) software is used on DNS resolvers. The <a href=https://www.internic.net/domain/named.root target=_blank>InterNIC</a> maintains the updated list of 13 root servers.</p><blockquote><p>æœ€ç»ˆç”¨æˆ·çš„æ“ä½œç³»ç»Ÿå…·æœ‰åŒ…å« DNS è§£æå™¨ IP åœ°å€çš„é…ç½®æ–‡ä»¶ï¼ˆLinux ä¸­ä¸º <code>/etc/resolv.conf</code> ï¼‰ï¼Œè€Œ DNS è§£æå™¨åˆä¼šè·å–å…¶æ‰€æœ‰ä¿¡æ¯ã€‚ ï¼ˆé€šå¸¸ï¼ŒDHCP æä¾›é»˜è®¤ DNS è§£æå™¨ IP åœ°å€ä»¥åŠå…¶ä»–é…ç½®ã€‚ï¼‰ç»ˆç«¯ç³»ç»Ÿè¯·æ±‚ DNS è§£æä»»ä½• DNS æŸ¥è¯¢ã€‚ DNS è§£æå™¨å®‰è£…äº†ç‰¹æ®Šè½¯ä»¶æ¥é€šè¿‡ DNS åŸºç¡€è®¾æ–½è§£ææŸ¥è¯¢ã€‚æ ¹æœåŠ¡å™¨çš„IPåœ°å€ä½äºç‰¹æ®Šè½¯ä»¶å†…ã€‚é€šå¸¸ï¼Œä¼¯å…‹åˆ©äº’è”ç½‘åç§°åŸŸ (BIND) è½¯ä»¶ç”¨äº DNS è§£æå™¨ã€‚ InterNIC ç»´æŠ¤ç€ 13 ä¸ªæ ¹æœåŠ¡å™¨çš„æ›´æ–°åˆ—è¡¨ã€‚</p></blockquote><p>So, we break the chicken-and-egg problem by seeding each resolver with prior knowledge of root DNS servers (whose IPs rarely change).</p><blockquote><p>å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡ä¸ºæ¯ä¸ªè§£æå™¨æä¾›æ ¹ DNS æœåŠ¡å™¨ï¼ˆå…¶ IP å¾ˆå°‘æ›´æ”¹ï¼‰çš„å…ˆéªŒçŸ¥è¯†æ¥è§£å†³å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ã€‚</p></blockquote></blockquote></div><div><div style=font-weight:700>Share this post:</div><a class=social-link-item href="https://twitter.com/intent/tweet?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f" target=_blank rel="noopener noreferrer" title="Click to share on Twitter"><i class="fa-brands fa-square-twitter fa-2xl" style=color:#55acee></i>
</a><a class=social-link-item href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f&title=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f" target=_blank rel="noopener noreferrer" title="Click to share on LinkedIn"><i class="fa-brands fa-linkedin fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://telegram.me/share/url?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f" target=_blank rel="noopener noreferrer" title="Click to share on telegram"><i class="fa-brands fa-telegram fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://reddit.com/submit?url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f&title=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f" target=_blank rel="noopener noreferrer" title="Click to share on reddit"><i class="fa-brands fa-reddit fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f" target=_blank rel="noopener noreferrer" title="Click to share on facebook"><i class="fa-brands fa-facebook fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://api.whatsapp.com/send?text=%5b%e8%af%91%5d%e3%80%8aGrokking%20the%20System%20Design%20Interview%e3%80%8b%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f%20-%20https%3a%2f%2fblog.chensoul.cc%2fposts%2f2023%2f11%2f17%2fdns%2f" target=_blank rel="noopener noreferrer" title="Click to share on whatsapp"><i class="fa-brands fa-whatsapp fa-2xl" style=color:#007bb5></i></a></div></div></article><nav class="navigation post-navigation" role=navigation><h2 class=screen-reader-text>Post navigation</h2><div class=nav-links><div class=nav-previous><a href=/posts/2023/11/24/designing-pastebin/ rel=next><span class=post-title>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Pastebin</span></a></div><div class=nav-next><a href=/posts/2023/11/17/designing-a-url-shortening-service/ rel=prev><span class=post-title>å¦‚ä½•è®¾è®¡ä¸€ä¸ªçŸ­ç½‘å€æœåŠ¡</span></a></div></div></nav><h2>Related content</h2><ul><li><a href=/posts/2023/12/14/designing-twitter/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Twitter</a></li><li><a href=/posts/2023/12/05/distributed-id-generator/>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼IDç”Ÿæˆå™¨ä¿è¯IDæŒ‰æ—¶é—´æœ‰åºï¼Ÿ</a></li><li><a href=/posts/2023/11/24/designing-dropbox/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Dropbox</a></li><li><a href=/posts/2023/11/24/designing-facebook-messenger/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Facebook Messenger</a></li><li><a href=/posts/2023/11/24/designing-instagram/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Instagram</a></li><li><a href=/posts/2023/11/24/designing-pastebin/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡Pastebin</a></li><li><a href=/posts/2023/11/17/designing-a-url-shortening-service/>å¦‚ä½•è®¾è®¡ä¸€ä¸ªçŸ­ç½‘å€æœåŠ¡</a></li><li><a href=/posts/2023/11/16/system-design-master-template/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡ä¸»æ¨¡æ¿</a></li><li><a href=/posts/2023/11/16/sdi-a-step-by-step-guide/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹ç³»ç»Ÿè®¾è®¡è®¿è°ˆï¼šåˆ†æ­¥æŒ‡å—</a></li><li><a href=/posts/2023/11/16/designing-a-url-shortening-service/>[è¯‘]ã€ŠGrokking the System Design Interviewã€‹è®¾è®¡ç±»ä¼¼ TinyURL çš„ URL ç¼©çŸ­æœåŠ¡</a></li></ul></main></section></div><div id=footer class=footer-wrap><footer id=colophon class="site-footer container clearfix" role=contentinfo><div id=footer-text class=site-info><span class=credit-link>Made with ğŸ©·
by <a href=/ target=_blank rel="noopener noreferrer">ChenSoul</a></span></div></footer></div></div><script type=text/javascript src=/main.min.js></script></body></html>