<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2024-01-03｜今天做了什么 | ChenSoul</title>
<meta name=keywords content="spring-cloud"><meta name=description content="今天做了什么：
idworker-client ，一个开源的 ID 生成器，适合在单机使用 github 上创建了一个使用 spring cloud netflix 相关组件的微服务项目 spring-cloud-netflix-demo 重构了狂野架构师课程中的微服务版本的源码 foodie-cloud 重构慕课网 Java架构师-技术专家 课程中的 源码，我做了一些改动：
升级 Spring Boot 和 Spring Cloud 版本 去掉 tk-mybatis 改为使用 mybatis-plus 重构模块和部分代码 重构后的源码地址：https://github.com/chensoul/foodie-cloud
后续计划：
docker 容器编排 k8s 容器编排 集成 Spring Security OAuth2 集成 Spring Cloud alibaba 开发环境和开源项目版本 软件版本：
组件 用途 版本号 Redis 缓存组件 5.0.4 RabbitMQ 消息中间件 3.7.15 Kafka 消息中间件 2.2.0 Lua 限流脚本 5.3.5 MySQL 数据库 5.7 IDEA 开发环境 版本随意 Java 编译运行项目 1.8以上（推荐8u161以后的版本，否则要装JCE插件） Maven 依赖管理 3.0.4以上 Maven 依赖版本：
组件 版本号 Spring Cloud 2021.0.9 Spring Boot 2.7.18 Mybatis Plus 3.5.5 技术选型 Spring Cloud每个业务领域都有多个可供选择的组件，这里也列出了微服务章节中将要用到的组件+中间件的技术选型，这也是当前主流的选型。
内容 技术选型 服务治理 Eureka 负载均衡 Ribbon 服务间调用 Feign 服务容错 Hystrix + Turbine + Dashboard 配置管理 Config + Github 消息总线 Bus + RabbitMQ 服务网关 Gateway 调用链追踪 Sleuth + Zipkin + ELK 消息驱动 Stream + RabbitMQ 流控 Sentinel 基于RPC的服务治理（不集成到电商项目） Dubbo + Admin Portal 默认端口 内容 端口 Eureka 20000 Turbine 20001 Hystrix-Dashboard 20002 Config-Server 20003 Gateway 20004 Zipkin 9411 ELK镜像-ES 9200 ELK镜像-Logstash 5044 ELK镜像-Kibana 5601 redis（单机模式） 6379 rabbitmq（单机模式） 5672 mariadb/mysql（单机模式） 3306 商品微服务 10001 用户微服务 10002 订单微服务 10003 购物车微服务 10004 权限微服务 10006 主搜微服务 同学们自己实现 支付服务 没变，但回调地址要改一下 启动方式 可以在IDEA里启动，也可以使用Maven编译后在命令行窗口启动，命令行启动方式需要在maven编译好项目之后，cd到对应项目下的target目录，然后使用命令&#34;java -jar xxx."><meta name=author content="chensoul"><link rel=canonical href=https://chensoul.github.io/posts/2024/01/03/til/><link crossorigin=anonymous href=/assets/css/stylesheet.min.d6db7ab468e55ea6647d68be426a17bae21ff1cddbf1741e547ed2086d010444.css integrity="sha256-1tt6tGjlXqZkfWi+QmoXuuIf8c3b8XQeVH7SCG0BBEQ=" rel="preload stylesheet" as=style><link rel=icon href=https://chensoul.github.io/favicon.ico><link rel=apple-touch-icon href=https://chensoul.github.io/apple-touch-icon.png><meta name=twitter:title content="2024-01-03｜今天做了什么 | ChenSoul"><meta name=twitter:description content="今天做了什么：
idworker-client ，一个开源的 ID 生成器，适合在单机使用 github 上创建了一个使用 spring cloud netflix 相关组件的微服务项目 spring-cloud-netflix-demo 重构了狂野架构师课程中的微服务版本的源码 foodie-cloud 重构慕课网 Java架构师-技术专家 课程中的 源码，我做了一些改动：
升级 Spring Boot 和 Spring Cloud 版本 去掉 tk-mybatis 改为使用 mybatis-plus 重构模块和部分代码 重构后的源码地址：https://github.com/chensoul/foodie-cloud
后续计划：
docker 容器编排 k8s 容器编排 集成 Spring Security OAuth2 集成 Spring Cloud alibaba 开发环境和开源项目版本 软件版本：
组件 用途 版本号 Redis 缓存组件 5.0.4 RabbitMQ 消息中间件 3.7.15 Kafka 消息中间件 2.2.0 Lua 限流脚本 5.3.5 MySQL 数据库 5.7 IDEA 开发环境 版本随意 Java 编译运行项目 1.8以上（推荐8u161以后的版本，否则要装JCE插件） Maven 依赖管理 3.0.4以上 Maven 依赖版本：
组件 版本号 Spring Cloud 2021.0.9 Spring Boot 2.7.18 Mybatis Plus 3.5.5 技术选型 Spring Cloud每个业务领域都有多个可供选择的组件，这里也列出了微服务章节中将要用到的组件+中间件的技术选型，这也是当前主流的选型。
内容 技术选型 服务治理 Eureka 负载均衡 Ribbon 服务间调用 Feign 服务容错 Hystrix + Turbine + Dashboard 配置管理 Config + Github 消息总线 Bus + RabbitMQ 服务网关 Gateway 调用链追踪 Sleuth + Zipkin + ELK 消息驱动 Stream + RabbitMQ 流控 Sentinel 基于RPC的服务治理（不集成到电商项目） Dubbo + Admin Portal 默认端口 内容 端口 Eureka 20000 Turbine 20001 Hystrix-Dashboard 20002 Config-Server 20003 Gateway 20004 Zipkin 9411 ELK镜像-ES 9200 ELK镜像-Logstash 5044 ELK镜像-Kibana 5601 redis（单机模式） 6379 rabbitmq（单机模式） 5672 mariadb/mysql（单机模式） 3306 商品微服务 10001 用户微服务 10002 订单微服务 10003 购物车微服务 10004 权限微服务 10006 主搜微服务 同学们自己实现 支付服务 没变，但回调地址要改一下 启动方式 可以在IDEA里启动，也可以使用Maven编译后在命令行窗口启动，命令行启动方式需要在maven编译好项目之后，cd到对应项目下的target目录，然后使用命令&#34;java -jar xxx."><meta property="og:title" content="2024-01-03｜今天做了什么 | ChenSoul"><meta property="og:description" content="今天做了什么：
idworker-client ，一个开源的 ID 生成器，适合在单机使用 github 上创建了一个使用 spring cloud netflix 相关组件的微服务项目 spring-cloud-netflix-demo 重构了狂野架构师课程中的微服务版本的源码 foodie-cloud 重构慕课网 Java架构师-技术专家 课程中的 源码，我做了一些改动：
升级 Spring Boot 和 Spring Cloud 版本 去掉 tk-mybatis 改为使用 mybatis-plus 重构模块和部分代码 重构后的源码地址：https://github.com/chensoul/foodie-cloud
后续计划：
docker 容器编排 k8s 容器编排 集成 Spring Security OAuth2 集成 Spring Cloud alibaba 开发环境和开源项目版本 软件版本：
组件 用途 版本号 Redis 缓存组件 5.0.4 RabbitMQ 消息中间件 3.7.15 Kafka 消息中间件 2.2.0 Lua 限流脚本 5.3.5 MySQL 数据库 5.7 IDEA 开发环境 版本随意 Java 编译运行项目 1.8以上（推荐8u161以后的版本，否则要装JCE插件） Maven 依赖管理 3.0.4以上 Maven 依赖版本：
组件 版本号 Spring Cloud 2021.0.9 Spring Boot 2.7.18 Mybatis Plus 3.5.5 技术选型 Spring Cloud每个业务领域都有多个可供选择的组件，这里也列出了微服务章节中将要用到的组件+中间件的技术选型，这也是当前主流的选型。
内容 技术选型 服务治理 Eureka 负载均衡 Ribbon 服务间调用 Feign 服务容错 Hystrix + Turbine + Dashboard 配置管理 Config + Github 消息总线 Bus + RabbitMQ 服务网关 Gateway 调用链追踪 Sleuth + Zipkin + ELK 消息驱动 Stream + RabbitMQ 流控 Sentinel 基于RPC的服务治理（不集成到电商项目） Dubbo + Admin Portal 默认端口 内容 端口 Eureka 20000 Turbine 20001 Hystrix-Dashboard 20002 Config-Server 20003 Gateway 20004 Zipkin 9411 ELK镜像-ES 9200 ELK镜像-Logstash 5044 ELK镜像-Kibana 5601 redis（单机模式） 6379 rabbitmq（单机模式） 5672 mariadb/mysql（单机模式） 3306 商品微服务 10001 用户微服务 10002 订单微服务 10003 购物车微服务 10004 权限微服务 10006 主搜微服务 同学们自己实现 支付服务 没变，但回调地址要改一下 启动方式 可以在IDEA里启动，也可以使用Maven编译后在命令行窗口启动，命令行启动方式需要在maven编译好项目之后，cd到对应项目下的target目录，然后使用命令&#34;java -jar xxx."><meta property="og:type" content="article"><meta property="og:url" content="https://chensoul.github.io/posts/2024/01/03/til/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-03T18:00:00+08:00"><meta property="article:modified_time" content="2024-01-03T18:00:00+08:00"><meta property="og:site_name" content="ChenSoul"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://chensoul.github.io/posts/"},{"@type":"ListItem","position":2,"name":"2024-01-03｜今天做了什么","item":"https://chensoul.github.io/posts/2024/01/03/til/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2024-01-03｜今天做了什么 | ChenSoul","name":"2024-01-03｜今天做了什么","description":"今天做了什么：\nidworker-client ，一个开源的 ID 生成器，适合在单机使用 github 上创建了一个使用 spring cloud netflix 相关组件的微服务项目 spring-cloud-netflix-demo 重构了狂野架构师课程中的微服务版本的源码 foodie-cloud 重构慕课网 Java架构师-技术专家 课程中的 源码，我做了一些改动：\n升级 Spring Boot 和 Spring Cloud 版本 去掉 tk-mybatis 改为使用 mybatis-plus 重构模块和部分代码 重构后的源码地址：https://github.com/chensoul/foodie-cloud\n后续计划：\ndocker 容器编排 k8s 容器编排 集成 Spring Security OAuth2 集成 Spring Cloud alibaba 开发环境和开源项目版本 软件版本：\n组件 用途 版本号 Redis 缓存组件 5.0.4 RabbitMQ 消息中间件 3.7.15 Kafka 消息中间件 2.2.0 Lua 限流脚本 5.3.5 MySQL 数据库 5.7 IDEA 开发环境 版本随意 Java 编译运行项目 1.8以上（推荐8u161以后的版本，否则要装JCE插件） Maven 依赖管理 3.0.4以上 Maven 依赖版本：\n组件 版本号 Spring Cloud 2021.0.9 Spring Boot 2.7.18 Mybatis Plus 3.5.5 技术选型 Spring Cloud每个业务领域都有多个可供选择的组件，这里也列出了微服务章节中将要用到的组件+中间件的技术选型，这也是当前主流的选型。\n内容 技术选型 服务治理 Eureka 负载均衡 Ribbon 服务间调用 Feign 服务容错 Hystrix + Turbine + Dashboard 配置管理 Config + Github 消息总线 Bus + RabbitMQ 服务网关 Gateway 调用链追踪 Sleuth + Zipkin + ELK 消息驱动 Stream + RabbitMQ 流控 Sentinel 基于RPC的服务治理（不集成到电商项目） Dubbo + Admin Portal 默认端口 内容 端口 Eureka 20000 Turbine 20001 Hystrix-Dashboard 20002 Config-Server 20003 Gateway 20004 Zipkin 9411 ELK镜像-ES 9200 ELK镜像-Logstash 5044 ELK镜像-Kibana 5601 redis（单机模式） 6379 rabbitmq（单机模式） 5672 mariadb/mysql（单机模式） 3306 商品微服务 10001 用户微服务 10002 订单微服务 10003 购物车微服务 10004 权限微服务 10006 主搜微服务 同学们自己实现 支付服务 没变，但回调地址要改一下 启动方式 可以在IDEA里启动，也可以使用Maven编译后在命令行窗口启动，命令行启动方式需要在maven编译好项目之后，cd到对应项目下的target目录，然后使用命令\u0026quot;java -jar xxx.","keywords":["spring-cloud"],"wordCount":"201","inLanguage":"en","datePublished":"2024-01-03T18:00:00+08:00","dateModified":"2024-01-03T18:00:00+08:00","author":[{"@type":"Person","name":"chensoul"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://chensoul.github.io/posts/2024/01/03/til/"},"publisher":{"@type":"Organization","name":"ChenSoul","logo":{"@type":"ImageObject","url":"https://chensoul.github.io/favicon.ico"}}}</script><meta name=baidu-site-verification content="codeva-FYpQY8JdLU"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://chensoul.github.io/ accesskey=h title="ChenSoul (Alt + H)">ChenSoul</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://chensoul.github.io/categories/review/ title=总结>总结</a></li><li><a href=https://chensoul.github.io/categories/ title=分类>分类</a></li><li><a href=https://chensoul.github.io/tags/ title=标签>标签</a></li><li><a href=https://github.com/chensoul/ title=关于 target=_blank>关于<span class=external-link><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-external-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 7H6A2 2 0 004 9v9a2 2 0 002 2h9a2 2 0 002-2v-5"/><line x1="10" y1="14" x2="20" y2="4"/><polyline points="15 4 20 4 20 9"/></svg></span></a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>2024-01-03｜今天做了什么</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2024-01-03</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg><span class=post-tags><a href=https://chensoul.github.io/tags/spring-cloud/>spring-cloud</a></span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>1 min</span></span></div></header><div class="toc side right"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#foodie-cloud aria-label=foodie-cloud>foodie-cloud</a><ul><ul><li><a href=#%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e5%92%8c%e5%bc%80%e6%ba%90%e9%a1%b9%e7%9b%ae%e7%89%88%e6%9c%ac aria-label=开发环境和开源项目版本>开发环境和开源项目版本</a></li><li><a href=#%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b aria-label=技术选型>技术选型</a></li><li><a href=#%e9%bb%98%e8%ae%a4%e7%ab%af%e5%8f%a3 aria-label=默认端口>默认端口</a></li><li><a href=#%e5%90%af%e5%8a%a8%e6%96%b9%e5%bc%8f aria-label=启动方式>启动方式</a></li></ul></ul></li></ul></div></details></div><div class=post-content><p>今天做了什么：</p><ul><li><a href=https://github.com/bingoohuang/idworker-client>idworker-client</a> ，一个开源的 ID 生成器，适合在单机使用</li><li>github 上创建了一个使用 spring cloud netflix 相关组件的微服务项目 <a href=https://github.com/chensoul/spring-cloud-netflix-demo>spring-cloud-netflix-demo</a></li><li>重构了狂野架构师课程中的微服务版本的源码</li></ul><h1 id=foodie-cloud>foodie-cloud</h1><p>重构慕课网 <a href=https://class.imooc.com/sale/javaarchitect>Java架构师-技术专家</a> 课程中的 <a href=https://github.com/liuhouer/np-architect/>源码</a>，我做了一些改动：</p><ul><li>升级 Spring Boot 和 Spring Cloud 版本</li><li>去掉 tk-mybatis 改为使用 mybatis-plus</li><li>重构模块和部分代码</li></ul><p>重构后的源码地址：<a href=https://github.com/chensoul/foodie-cloud>https://github.com/chensoul/foodie-cloud</a></p><p>后续计划：</p><ul><li>docker 容器编排</li><li>k8s 容器编排</li><li>集成 Spring Security OAuth2</li><li>集成 Spring Cloud alibaba</li></ul><h3 id=开发环境和开源项目版本>开发环境和开源项目版本</h3><p>软件版本：</p><table><thead><tr><th style=text-align:left>组件</th><th style=text-align:center>用途</th><th style=text-align:center>版本号</th></tr></thead><tbody><tr><td style=text-align:left>Redis</td><td style=text-align:center>缓存组件</td><td style=text-align:center>5.0.4</td></tr><tr><td style=text-align:left>RabbitMQ</td><td style=text-align:center>消息中间件</td><td style=text-align:center>3.7.15</td></tr><tr><td style=text-align:left>Kafka</td><td style=text-align:center>消息中间件</td><td style=text-align:center>2.2.0</td></tr><tr><td style=text-align:left>Lua</td><td style=text-align:center>限流脚本</td><td style=text-align:center>5.3.5</td></tr><tr><td style=text-align:left>MySQL</td><td style=text-align:center>数据库</td><td style=text-align:center>5.7</td></tr><tr><td style=text-align:left>IDEA</td><td style=text-align:center>开发环境</td><td style=text-align:center>版本随意</td></tr><tr><td style=text-align:left>Java</td><td style=text-align:center>编译运行项目</td><td style=text-align:center>1.8以上（推荐8u161以后的版本，否则要装JCE插件）</td></tr><tr><td style=text-align:left>Maven</td><td style=text-align:center>依赖管理</td><td style=text-align:center>3.0.4以上</td></tr></tbody></table><p>Maven 依赖版本：</p><table><thead><tr><th style=text-align:left>组件</th><th style=text-align:center>版本号</th></tr></thead><tbody><tr><td style=text-align:left><strong>Spring Cloud</strong></td><td style=text-align:center><strong>2021.0.9</strong></td></tr><tr><td style=text-align:left>Spring Boot</td><td style=text-align:center>2.7.18</td></tr><tr><td style=text-align:left>Mybatis Plus</td><td style=text-align:center>3.5.5</td></tr></tbody></table><h3 id=技术选型>技术选型</h3><p>Spring Cloud每个业务领域都有多个可供选择的组件，这里也列出了微服务章节中将要用到的组件+中间件的技术选型，这也是当前主流的选型。</p><table><thead><tr><th style=text-align:left>内容</th><th style=text-align:center>技术选型</th></tr></thead><tbody><tr><td style=text-align:left>服务治理</td><td style=text-align:center>Eureka</td></tr><tr><td style=text-align:left>负载均衡</td><td style=text-align:center>Ribbon</td></tr><tr><td style=text-align:left>服务间调用</td><td style=text-align:center>Feign</td></tr><tr><td style=text-align:left>服务容错</td><td style=text-align:center>Hystrix + Turbine + Dashboard</td></tr><tr><td style=text-align:left>配置管理</td><td style=text-align:center>Config + Github</td></tr><tr><td style=text-align:left>消息总线</td><td style=text-align:center>Bus + RabbitMQ</td></tr><tr><td style=text-align:left>服务网关</td><td style=text-align:center>Gateway</td></tr><tr><td style=text-align:left>调用链追踪</td><td style=text-align:center>Sleuth + Zipkin + ELK</td></tr><tr><td style=text-align:left>消息驱动</td><td style=text-align:center>Stream + RabbitMQ</td></tr><tr><td style=text-align:left>流控</td><td style=text-align:center>Sentinel</td></tr><tr><td style=text-align:left>基于RPC的服务治理</br>（不集成到电商项目）</td><td style=text-align:center>Dubbo + Admin Portal</td></tr></tbody></table><h3 id=默认端口>默认端口</h3><table><thead><tr><th style=text-align:left>内容</th><th style=text-align:center>端口</th></tr></thead><tbody><tr><td style=text-align:left>Eureka</td><td style=text-align:center>20000</td></tr><tr><td style=text-align:left>Turbine</td><td style=text-align:center>20001</td></tr><tr><td style=text-align:left>Hystrix-Dashboard</td><td style=text-align:center>20002</td></tr><tr><td style=text-align:left>Config-Server</td><td style=text-align:center>20003</td></tr><tr><td style=text-align:left>Gateway</td><td style=text-align:center>20004</td></tr><tr><td style=text-align:left>Zipkin</td><td style=text-align:center>9411</td></tr><tr><td style=text-align:left>ELK镜像-ES</td><td style=text-align:center>9200</td></tr><tr><td style=text-align:left>ELK镜像-Logstash</td><td style=text-align:center>5044</td></tr><tr><td style=text-align:left>ELK镜像-Kibana</td><td style=text-align:center>5601</td></tr><tr><td style=text-align:left>redis（单机模式）</td><td style=text-align:center>6379</td></tr><tr><td style=text-align:left>rabbitmq（单机模式）</td><td style=text-align:center>5672</td></tr><tr><td style=text-align:left>mariadb/mysql（单机模式）</td><td style=text-align:center>3306</td></tr><tr><td style=text-align:left>商品微服务</td><td style=text-align:center>10001</td></tr><tr><td style=text-align:left>用户微服务</td><td style=text-align:center>10002</td></tr><tr><td style=text-align:left>订单微服务</td><td style=text-align:center>10003</td></tr><tr><td style=text-align:left>购物车微服务</td><td style=text-align:center>10004</td></tr><tr><td style=text-align:left>权限微服务</td><td style=text-align:center>10006</td></tr><tr><td style=text-align:left>主搜微服务</td><td style=text-align:center>同学们自己实现</td></tr><tr><td style=text-align:left>支付服务</td><td style=text-align:center>没变，但回调地址要改一下</td></tr></tbody></table><h3 id=启动方式>启动方式</h3><p>可以在IDEA里启动，也可以使用Maven编译后在命令行窗口启动，命令行启动方式需要在maven编译好项目之后，cd到对应项目下的target目录，然后使用命令"java -jar xxx.jar"执行编译好的jar包即可。</p><p>启动顺序：</p><ul><li>先确保RabbitMQ，Redis和Mariadb/MySQL处于启动状态</li><li>启动Eureka - 所有微服务和SC平台组件都依赖Eureka做服务注册</li><li>启动Config-Server - 部分微服务依赖配置中心拉取配置项</li><li>启动Hystrix监控模块 - Turbine和Hystrix-Dashboard，等到后续微服务注册到注册中心后，Turbine下次做服务发现之后就可以正常收集数据了</li><li>启动链路追踪组件 - Zipkin和ELK容器</li><li>依次启动Auth微服务 -> User微服务 -> Item微服务 -> Cart微服务 -> Order微服务，以及留给同学们完成的主搜服务，支付中心</li><li>最后启动Gateway网关 -
在微服务都启动好之后再启动网关，可以保证网关启动后立即生效。反过来先启动网关再注册微服务也行，但是Gateway会处于短暂的不可用状态，因为Gateway启动的时候微服务还没注册，需要等Gateway做服务发现后才能生效</li></ul></div><footer class=post-footer><nav class=paginav><a class=next href=https://chensoul.github.io/posts/2024/01/02/til/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>2024-01-02｜雪崩问题、Spring Cloud微服务集成 Sentinel</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://chensoul.github.io/>ChenSoul</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a>
</span><span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src=https://umami.chensoul.com/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script>mediumZoom(".entry-cover img"),mediumZoom(".post-content img:not([no-zoom])")</script><script src=/js/instantclick.min.js data-no-instant></script><script data-no-instant>InstantClick.init()</script></body></html>