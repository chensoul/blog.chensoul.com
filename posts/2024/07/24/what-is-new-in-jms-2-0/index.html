<!doctype html><html lang=en-US prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="åŸæ–‡é“¾æ¥ï¼šWhat is new in JMS 2.0
åœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚"><title>[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½ | ChenSoul</title>
<link rel=canonical href=https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/><link rel=preconnect href=https://fonts.font.im><link rel=preconnect href=https://fonts.loli.net crossorigin><link href="https://fonts.loli.net/css2?family=Roboto+Slab:wght@400;500;700&display=swap" rel=stylesheet><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.chensoul.cc/images/favicon.webp"><meta name=twitter:title content="[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½"><meta name=twitter:description content="åŸæ–‡é“¾æ¥ï¼šWhat is new in JMS 2.0
åœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚"><meta name=twitter:creator content="@ichensoul"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="chensoul"><meta property="og:url" content="https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/"><meta property="og:site_name" content="ChenSoul"><meta property="og:title" content="[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½"><meta property="og:description" content="åŸæ–‡é“¾æ¥ï¼šWhat is new in JMS 2.0
åœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-24T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-24T00:00:00+00:00"><meta property="article:tag" content="Jms"><meta property="og:image" content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=name content="[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½"><meta itemprop=description content="åŸæ–‡é“¾æ¥ï¼šWhat is new in JMS 2.0
åœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚"><meta itemprop=datePublished content="2024-07-24T00:00:00+00:00"><meta itemprop=dateModified content="2024-07-24T00:00:00+00:00"><meta itemprop=wordCount content="528"><meta itemprop=image content="https://blog.chensoul.cc/images/favicon.webp"><meta itemprop=keywords content="Jms"><link rel=stylesheet href=https://cdnjs.loli.net/ajax/libs/font-awesome/6.4.0/css/all.min.css media=all><link rel=stylesheet href=/main.min.css type=text/css media=all><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"TechArticle","name":"[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½","headline":"[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½","inLanguage":"en-US","url":"https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/","description":"\u003cp\u003eåŸæ–‡é“¾æ¥ï¼š\u003ca href=\"https://hasithah.medium.com/what-is-new-in-jms-2-0-821266fc1bf0\" target=\"_blank\"\u003eWhat is new in JMS 2.0\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚\u003c/p\u003e","wordCount":"528","keywords":["jms"],"datePublished":"2024-07-24T00:00:00Z","dateModified":"2024-07-24T00:00:00Z","author":{"@type":"Person","name":"chensoul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/"},"publisher":{"@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/"}},{"@context":"https://schema.org","@type":"Organization","name":"chensoul","url":"https://blog.chensoul.cc/","sameAs":["https://x.com/ichensoul","https://github.com/chensoul","https://www.linkedin.com/in/","https://www.youtube.com/@chensoul","https://t.me/chensouls"]}]}</script><script defer src=https://umami.chensoul.cc/random-string.js data-website-id=821c25f8-a31a-4607-92d7-91ee76843d00></script></head><body class="home blog post-layout-one-column"><button onclick=topFunction() id=scrollTopBtn title="Go to top">
<i class="fa-solid fa-arrow-up"></i></button><div id=header-top class=header-bar-wrap></div><div id=page class=site><a class="skip-link screen-reader-text" href=#content>Skip to content</a><header id=masthead class="site-header clearfix" role=banner><div class="header-main container clearfix"><div id=logo class="site-branding clearfix"><h1 class=site-title><a href=/ title=ChenSoul rel=home>ChenSoul</a></h1><p class=site-description>Java, Spring Boot, Microservice, Cloud, Architecture and DevOps Tutorials</p></div><div class="header-widgets clearfix"><aside id=search-2 class="header-widget widget_search"><form role=search method=get class=search-form onsubmit="return searchSite(event)"><label><span class=screen-reader-text>Search for:</span>
<input type=search class=search-field placeholder="Enter search keyword" name=query id=query title="Enter search keyword">
</label><button type=submit class=search-submit title=Search> <span class=genericon-search></span>
<span class=screen-reader-text>Search</span></button></form></aside></div></div><div id=main-navigation-wrap class=primary-navigation-wrap><nav id=main-navigation class="primary-navigation navigation container clearfix" role=navigation><ul id=menu-home class=main-navigation-menu><li class="menu-item menu-item-type-custom menu-item-object-custom
current-menu-item current_page_item menu-item-home"><a href=/>Home</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/spring-boot/>Spring Boot</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/architecture/>Architecture</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/microservice/>Microservice</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/kubernetes/>Kubernetes</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category
menu-item-has-children"><a href=/tutorials/>Tutorials</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/spring-boot-tutorials/>Spring Boot Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/microservice-tutorials/>Microservice Tutorials</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/kubernetes-tutorials/>Kubernetes Tutorials</a></li></ul></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=https://github.com/chensoul target=_blank>About Me</a></li></ul></nav></div></header><div id=content class="site-content container clearfix"><section id=primary class="content-archive content-area post-content-area"><main id=main class=site-main role=main><article class="post type-post"><div class=post-inner-content><header class=entry-header><h2 class=entry-title><a href=https://blog.chensoul.cc/posts/2024/07/24/what-is-new-in-jms-2-0/ rel=bookmark title="[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½">[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½</a></h2><div class=entry-meta><span class=meta-date><time class="entry-date published" datetime=2024-07-24T00:00:00>2024-07-24
</time></span><span class=meta-author><span class="author vcard">chensoul</span>
</span><span class="tagcloud post-tags"><i class="fa fa-tags"></i>&nbsp;
<a class="tag-cloud-link widget__link widget__link--taglist" href=/tags/jms/ title=jms>jms</a></span></div></header><div class=entry-content><p>åŸæ–‡é“¾æ¥ï¼š<a href=https://hasithah.medium.com/what-is-new-in-jms-2-0-821266fc1bf0 target=_blank>What is new in JMS 2.0</a></p><p>åœ¨åœ¨è½¯ä»¶é›†æˆé¢†åŸŸï¼Œä»ä¸€ä¸ªè½¯ä»¶ç»„ä»¶åˆ°å¦ä¸€ä¸ªè½¯ä»¶ç»„ä»¶è¿›è¡Œé€šä¿¡æ˜¯ä¸€é¡¹åŸºæœ¬è¦æ±‚ã€‚è™½ç„¶å·²ç»å‡ºç°äº†è®¸å¤šå…·æœ‰è¿™ç§èƒ½åŠ›çš„æŠ€æœ¯ï¼Œä½† Java ç¼–ç¨‹è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª APIï¼Œä»¥ä¿ƒè¿›ç”¨ Java ç¼–å†™çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚æ­¤ API çš„å®ç°å°†ç”±ä¸åŒçš„ä¾›åº”å•†ï¼ˆJMS æä¾›å•†ï¼‰é€šè¿‡ä»£ç†è½¯ä»¶æä¾›ã€‚</p><p>è¿™ä¸ªAPIè¢«ç§°ä¸ºJavaæ¶ˆæ¯æœåŠ¡ï¼ˆJMSï¼‰ã€‚</p><p><img src=/images/jms2.webp alt=img></p><p>JMS è§„èŒƒçš„æœ€åä¸€æ¬¡æ›´æ–°æ˜¯åœ¨ 2002 å¹´ï¼Œå½“æ—¶æ¨å‡ºäº†<strong>JMS 1.1</strong>ã€‚ä»é‚£æ—¶èµ·ï¼Œå¤šå¹´æ¥ï¼Œè¯¥ API å·²åœ¨å…¨çƒè®¸å¤šè½¯ä»¶ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè¯æ˜äº†å…¶å¯¹å¼€å‘äººå‘˜çš„å‹å¥½æ€§ã€‚JMS çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼ˆ<strong>JMS 2.0</strong>ï¼‰äº 2013 å¹´ 4 æœˆé—®ä¸–ï¼Œè·ç¦» 1.1 ç‰ˆå·²æœ‰æ•°å¹´ä¹‹ä¹…ã€‚</p><p><strong>JMS 2.0 åªèƒ½ä¸Java SE 7 åŠæ›´é«˜ç‰ˆæœ¬</strong>ä¸€èµ·ä½¿ç”¨ã€‚äº†è§£ JMS 2.0 ä¸­çš„æ–°åŠŸèƒ½å°†ä¼šå¾ˆæœ‰è¶£ã€‚</p><h1 id=æ˜“äºä½¿ç”¨çš„è¯­è¨€åŠŸèƒ½>æ˜“äºä½¿ç”¨çš„è¯­è¨€åŠŸèƒ½</h1><p>ä»è¯­è¨€è§’åº¦æ¥çœ‹ï¼Œå¯¹ API æ‰€åšçš„æœ€é‡å¤§çš„æ›´æ”¹æ˜¯å‡å°‘äº†å¼€å‘äººå‘˜éœ€è¦ç¼–å†™çš„ä»£ç é‡ã€‚è®©æˆ‘ä»¬å°† JMS 2.0 ä¸ 1.1 è¿›è¡Œæ¯”è¾ƒï¼Œçœ‹çœ‹å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p><h2 id=è¿æ¥å’Œä¼šè¯å¯¹è±¡çº³å…¥å•ä¸ª-jmscontext>è¿æ¥å’Œä¼šè¯å¯¹è±¡çº³å…¥å•ä¸ª JMSContext</h2><p>ä¸å†éœ€è¦åˆ›å»ºè¿æ¥å’Œä¼šè¯å¯¹è±¡ã€‚æ‚¨å¯ä»¥åˆ›å»º JMSContext å¹¶ç›´æ¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendMessageJMS11</span>(ConnectionFactory connectionFactory, Queue queueString text) {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      Connection connection <span style=color:#f92672>=</span> connectionFactory.<span style=color:#a6e22e>createConnection</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>         Session session <span style=color:#f92672>=</span>connection.<span style=color:#a6e22e>createSession</span>(<span style=color:#66d9ef>false</span>,Session.<span style=color:#a6e22e>AUTO_ACKNOWLEDGE</span>);
</span></span><span style=display:flex><span>         MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(queue);
</span></span><span style=display:flex><span>         TextMessage textMessage <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createTextMessage</span>(text);
</span></span><span style=display:flex><span>         messageProducer.<span style=color:#a6e22e>send</span>(textMessage);
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>         connection.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>   } <span style=color:#66d9ef>catch</span> (JMSException ex) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// handle exception (details omitted)</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendMessageJMS20</span>(ConnectionFactory connectionFactory, Queue queue, 
</span></span><span style=display:flex><span>String text) {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>try</span> (JMSContext context <span style=color:#f92672>=</span> connectionFactory.<span style=color:#a6e22e>createContext</span>();){
</span></span><span style=display:flex><span>      context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>send</span>(queue, text);
</span></span><span style=display:flex><span>   } <span style=color:#66d9ef>catch</span> (JMSRuntimeException ex) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// handle exception (details omitted)</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=æ— éœ€è°ƒç”¨-connectionclose>æ— éœ€è°ƒç”¨ connection.close()</h2><p>ä½†æ˜¯ï¼Œæ— éœ€ä»ä»£ç ä¸­æ˜¾å¼è°ƒç”¨ closeã€‚JMSContext å®ç°äº† Java SE 7 <em>java.lang.AutoCloseable</em>æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ try-with-resources å—ä¸­åˆ›å»º JMSContextï¼ˆè¿™ä¹Ÿæ˜¯ Java SE 7 çš„ä¸€é¡¹æ–°åŠŸèƒ½ï¼‰ï¼Œclose æ–¹æ³•å°†åœ¨è¯¥å—æœ«å°¾è‡ªåŠ¨è°ƒç”¨ï¼Œè€Œæ— éœ€å°†å…¶æ˜¾å¼æ·»åŠ åˆ°ä»£ç ä¸­ã€‚</p><p>è¯·å‚è€ƒä¸Šé¢çš„ä¾‹å­ã€‚</p><h2 id=åˆ›å»ºä¼šè¯æ—¶æ— éœ€ä¼ é€’ä¸¤ä¸ªå‚æ•°>åˆ›å»ºä¼šè¯æ—¶æ— éœ€ä¼ é€’ä¸¤ä¸ªå‚æ•°</h2><p>åœ¨ JMS 1.1 ä¸­ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªé™„åŠ å‚æ•°æ¥æŒ‡å®šä¼šè¯æ˜¯å¦æ˜¯äº‹åŠ¡æ€§çš„ã€‚åœ¨ JMS 2.0 ä¸­ï¼Œä¼ é€’ å°±è¶³å¤Ÿäº†<code>Session.SESSION_TRANSACTED</code>ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Session session <span style=color:#f92672>=</span> connection.<span style=color:#a6e22e>createSession</span>(<span style=color:#66d9ef>true</span>,Session.<span style=color:#a6e22e>SESSION_TRANSACTED</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Session session <span style=color:#f92672>=</span> connection.<span style=color:#a6e22e>createSession</span>(Session.<span style=color:#a6e22e>SESSION_TRANSACTED</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0 - a session with Session.AUTO_ACKNOWLEDGE</span>
</span></span><span style=display:flex><span>Session session <span style=color:#f92672>=</span> connection.<span style=color:#a6e22e>createSession</span>();
</span></span></code></pre></div><p>å¦‚æœæˆ‘ä»¬æƒ³æŒ‡å®šå…¶ä»–ä¼šè¯æ¨¡å¼ï¼ˆæœ¬åœ°äº‹åŠ¡ã€CLIENT_ACKNOWLEDGE æˆ– DUPS_OK_ACKNOWLEDGEï¼‰ï¼Œæˆ‘ä»¬åªéœ€ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªã€‚å¦‚æœæ‚¨éœ€è¦ä¼šè¯å¤„äº Session.AUTO_ACKNOWLEDGE æ¨¡å¼ï¼Œåˆ™æ— éœ€ä¼ é€’ä»»ä½•å‚æ•°ï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤æ¨¡å¼ã€‚</p><h2 id=æ”¯æŒæ–¹æ³•é“¾>æ”¯æŒæ–¹æ³•é“¾</h2><p>è¿™å¤§å¤§å‡å°‘äº†éœ€è¦ç¼–å†™çš„ä»£ç é‡ã€‚è¯·å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(demoQueue);
</span></span><span style=display:flex><span>messageProducer.<span style=color:#a6e22e>setPriority</span>(1);
</span></span><span style=display:flex><span>TextMessage textMessage <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createTextMessage</span>(body);
</span></span><span style=display:flex><span>textMessage.<span style=color:#a6e22e>setStringProperty</span>(<span style=color:#e6db74>&#34;foo&#34;</span>, <span style=color:#e6db74>&#34;bar&#34;</span>);
</span></span><span style=display:flex><span>messageProducer.<span style=color:#a6e22e>send</span>(textMessage);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>TextMessage textMessage <span style=color:#f92672>=</span> context.<span style=color:#a6e22e>createTextMessage</span>(body); context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>setPriority</span>(1).<span style=color:#a6e22e>setProperty</span>(<span style=color:#960050;background-color:#1e0010>â€œ</span>foo<span style=color:#960050;background-color:#1e0010>â€</span>, <span style=color:#960050;background-color:#1e0010>â€œ</span>bar<span style=color:#960050;background-color:#1e0010>â€</span>).<span style=color:#a6e22e>send</span>(demoQueue, textMessage);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(demoQueue);
</span></span><span style=display:flex><span>messageProducer.<span style=color:#a6e22e>send</span>(message1);
</span></span><span style=display:flex><span>messageProducer.<span style=color:#a6e22e>send</span>(message2);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>send</span>(demoQueue,message1);
</span></span><span style=display:flex><span>context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>send</span>(demoQueue,message2);
</span></span></code></pre></div><h2 id=åœ¨-java-ee-ä¸­æ³¨å…¥-jmscontext-æ„å‘³ç€æ‚¨ä¸éœ€è¦åˆ›å»ºæˆ–å…³é—­å®ƒ>åœ¨ Java EE ä¸­ï¼Œæ³¨å…¥ JMSContext æ„å‘³ç€æ‚¨ä¸éœ€è¦åˆ›å»ºæˆ–å…³é—­å®ƒ</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  Connection connection <span style=color:#f92672>=</span> connectionFactory.<span style=color:#a6e22e>createConnection</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    Session session <span style=color:#f92672>=</span> connection.<span style=color:#a6e22e>createSession</span>(<span style=color:#66d9ef>false</span>,Session.<span style=color:#a6e22e>AUTO_ACKNOWLEDGE</span>);
</span></span><span style=display:flex><span>    MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(demoQueue);
</span></span><span style=display:flex><span>    TextMessage textMessage <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createTextMessage</span>(body);
</span></span><span style=display:flex><span>    messageProducer.<span style=color:#a6e22e>send</span>(textMessage);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>    connection.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (JMSException ex) {
</span></span><span style=display:flex><span>  ex.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>send</span>(inboundQueue, body);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (JMSRuntimeException ex){
</span></span><span style=display:flex><span>  ex.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=å‘é€æ—¶ä¸éœ€è¦å®ä¾‹åŒ–messageå¯¹è±¡>å‘é€æ—¶ä¸éœ€è¦å®ä¾‹åŒ–Messageå¯¹è±¡</h2><p>è¯·æ³¨æ„ï¼Œå³ä½¿æ‚¨æƒ³è¦è®¾ç½®æ¶ˆæ¯å±æ€§ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Œå› ä¸ºå¯ä»¥åœ¨ JMSProducer ä¸Šè®¾ç½®è¿™äº›å±æ€§ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(demoQueue);
</span></span><span style=display:flex><span>TextMessage textMessage <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createTextMessage</span>(<span style=color:#e6db74>&#34;Hello world&#34;</span>);
</span></span><span style=display:flex><span>messageProducer.<span style=color:#a6e22e>send</span>(textMessage);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>send</span>(demoQueue,<span style=color:#e6db74>&#34;Hello world&#34;</span>);
</span></span></code></pre></div><h2 id=ç›´æ¥æ¥æ”¶æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½>ç›´æ¥æ¥æ”¶æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½</h2><p>åŒæ­¥æ¥æ”¶æ—¶ï¼Œæ‚¨ä¼šå¾—åˆ°ä¸€ä¸ª Message å¯¹è±¡ï¼Œå¹¶ä¸”éœ€è¦å°†å…¶è½¬æ¢ä¸ºé€‚å½“çš„å­ç±»å‹ï¼Œç„¶åæ‰èƒ½æå–å…¶ä¸»ä½“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MessageConsumer messageConsumer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createConsumer</span>(demoQueue);
</span></span><span style=display:flex><span>TextMessage textMessage <span style=color:#f92672>=</span> (TextMessage) messageConsumer.<span style=color:#a6e22e>receive</span>(1000);
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (textMessage<span style=color:#f92672>==</span><span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Received null&#34;</span>;
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Received &#34;</span><span style=color:#f92672>+</span>textMessage.<span style=color:#a6e22e>getText</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>JMSConsumer consumer <span style=color:#f92672>=</span> context.<span style=color:#a6e22e>createConsumer</span>(demoQueue);
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Received &#34;</span> <span style=color:#f92672>+</span> consumer.<span style=color:#a6e22e>receiveBody</span>(String.<span style=color:#a6e22e>class</span>, 1000);
</span></span></code></pre></div><h2 id=æå–é‚®ä»¶æ­£æ–‡å‰æ— éœ€è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢>æå–é‚®ä»¶æ­£æ–‡å‰æ— éœ€è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢</h2><p>å¼‚æ­¥æ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œä¼ é€’ç»™ onMessage æ–¹æ³•çš„æ¶ˆæ¯æ˜¯ javax.jms.Message æ‚¨éœ€è¦å°†å…¶è½¬æ¢ä¸ºé¢„æœŸçš„å­ç±»å‹ï¼Œç„¶åæ‰èƒ½æå–æ­£æ–‡ã€‚å¦‚æœæ¶ˆæ¯æ˜¯ ObjectMessageï¼Œåˆ™ä¼šä¸ºæ‚¨æä¾› Serializable æ­£æ–‡ï¼Œæ‚¨å¿…é¡»å†æ¬¡å°†å…¶è½¬æ¢ä¸ºé¢„æœŸçš„æ­£æ–‡ç±»å‹ã€‚æ–°æ–¹æ³•<code>getBody</code>å…è®¸æ‚¨ä»ä¸­æå–æ­£æ–‡ï¼Œè€Œ<code>Message</code>æ— éœ€å…ˆå°†å…¶è½¬æ¢ä¸ºé€‚å½“çš„å­ç±»å‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//JMS 1.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Message message <span style=color:#f92672>=</span> consumer.<span style=color:#a6e22e>receive</span>(1000); <span style=color:#75715e>// returns a TextMessage</span>
</span></span><span style=display:flex><span>String body <span style=color:#f92672>=</span> ((TextMessage) message).<span style=color:#a6e22e>getText</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//JMS 2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Message message <span style=color:#f92672>=</span> consumer.<span style=color:#a6e22e>receive</span>(1000); <span style=color:#75715e>// returns a TextMessage</span>
</span></span><span style=display:flex><span>String body <span style=color:#f92672>=</span> message.<span style=color:#a6e22e>getBody</span>(String.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><h1 id=äº”å¤§æ–°åŠŸèƒ½>äº”å¤§æ–°åŠŸèƒ½</h1><p>JMS 2.0 è¿˜å¼•å…¥äº†ä¸€äº›æ–°çš„æ¶ˆæ¯ä¼ é€’åŠŸèƒ½ã€‚</p><h2 id=1-åŒä¸€ä¸»é¢˜è®¢é˜…å…è®¸å¤šä¸ªæ¶ˆè´¹è€…>1. åŒä¸€ä¸»é¢˜è®¢é˜…å…è®¸å¤šä¸ªæ¶ˆè´¹è€…</h2><p>JMS 1.1 æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå³å¯¹äºä¸€ä¸ªä¸»é¢˜ï¼Œåªèƒ½åˆ›å»ºä¸€ä¸ªå…·æœ‰ç‰¹å®š<strong>è®¢é˜… ID çš„</strong>è®¢é˜…è€…ã€‚è¿™é™åˆ¶äº†æˆ‘ä»¬å°†è´Ÿè½½åˆ†å¸ƒåœ¨å¤šä¸ª JVM å’Œæœºå™¨ä¹‹é—´ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•åˆ›å»ºå…·æœ‰ç›¸åŒ ID çš„å¦ä¸€ä¸ªè®¢é˜…ã€‚</p><p>JMS 2.0 æä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ–°æ–¹æ³• createSharedConsumer åˆ›å»ºâ€œå…±äº«â€éæŒä¹…è®¢é˜…ã€‚æ­¤æ–¹æ³•åœ¨ Sessionï¼ˆå¯¹äºä½¿ç”¨ç»å…¸ API çš„åº”ç”¨ç¨‹åºï¼‰å’Œ JMSContextï¼ˆå¯¹äºä½¿ç”¨ç®€åŒ– API çš„åº”ç”¨ç¨‹åºï¼‰ä¸Šéƒ½å¯ç”¨ã€‚ç”±äºä¸¤ä¸ª JVM éœ€è¦èƒ½å¤Ÿè¯†åˆ«å®ƒä»¬éœ€è¦å…±äº«çš„è®¢é˜…ï¼Œå› æ­¤å®ƒä»¬éœ€è¦æä¾›ä¸€ä¸ªåç§°æ¥æ ‡è¯†å…±äº«è®¢é˜…ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//non durable</span>
</span></span><span style=display:flex><span>MessageConsumer messageConsumer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createSharedConsumer</span>(topic,<span style=color:#e6db74>&#34;mySubscription&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//durable</span>
</span></span><span style=display:flex><span>MessageConsumer messageConsumer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createSharedDurableConsumer</span>(topic,<span style=color:#e6db74>&#34;myDurableSub&#34;</span>);
</span></span></code></pre></div><p>å¦‚æœæ‚¨åœ¨ä¸¤ä¸ªå•ç‹¬çš„ JVM ä¸­è¿è¡Œä¸Šè¿°ä»£ç ï¼Œåˆ™å‘é€åˆ°ä¸»é¢˜çš„æ¯æ¡æ¶ˆæ¯éƒ½å°†ä¼ é€’ç»™ä¸¤ä¸ªæ¶ˆè´¹è€…ä¸­çš„ä¸€ä¸ªã€‚è¿™æ ·ä»–ä»¬å°±å¯ä»¥å…±äº«å¤„ç†æ¥è‡ªè®¢é˜…çš„æ¶ˆæ¯çš„å·¥ä½œã€‚</p><h2 id=2-å‘é€å»¶è¿Ÿ>2. å‘é€å»¶è¿Ÿ</h2><p>æ‚¨ç°åœ¨å¯ä»¥æŒ‡å®šæ¶ˆæ¯çš„å»¶è¿Ÿæ—¶é—´ã€‚JMS æä¾›ç¨‹åºå°†åœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´è¿‡å»åæ‰å‘é€æ¶ˆæ¯ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MessageProducer messageProducer <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>createProducer</span>(queue);
</span></span><span style=display:flex><span>      messageProducer.<span style=color:#a6e22e>setDeliveryDelay</span>(20000);
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>setDeliveryDelay</span>(20000).<span style=color:#a6e22e>send</span>(queue,<span style=color:#e6db74>&#34;Hello world&#34;</span>);
</span></span></code></pre></div><h2 id=3å¼‚æ­¥å‘é€æ¶ˆæ¯>3.å¼‚æ­¥å‘é€æ¶ˆæ¯</h2><p>æ­¤åŠŸèƒ½é€‚ç”¨äºåœ¨ Java SE æˆ– Java EE åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯å®¹å™¨ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚ä¸é€‚ç”¨äºåœ¨ Java EE Web æˆ– EJB å®¹å™¨ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚</p><p>é€šå¸¸ï¼Œå‘é€æŒä¹…æ¶ˆæ¯æ—¶ï¼Œsend æ–¹æ³•ç›´åˆ° JMS å®¢æˆ·ç«¯å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡å™¨å¹¶æ”¶åˆ°å›å¤ä»¥é€šçŸ¥å®¢æˆ·ç«¯è¯¥æ¶ˆæ¯å·²è¢«å®‰å…¨æ¥æ”¶å¹¶æŒä¹…åŒ–åæ‰ä¼šè¿”å›ã€‚æˆ‘ä»¬ç§°æ­¤ä¸º<strong>åŒæ­¥å‘é€</strong>ã€‚</p><p><strong>JMS 2.0 å¼•å…¥äº†æ‰§è¡Œå¼‚æ­¥å‘é€çš„</strong>åŠŸèƒ½ã€‚å¼‚æ­¥å‘é€æ¶ˆæ¯æ—¶ï¼Œå‘é€æ–¹æ³•ä¼šå°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åå°†æ§åˆ¶æƒè¿”å›ç»™åº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å›å¤ã€‚</p><p>å½“æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„å›å¤ä»¥è¡¨æ˜æ¶ˆæ¯å·²è¢«æœåŠ¡å™¨æ¥æ”¶å¹¶æŒä¹…ä¿å­˜æ—¶ï¼ŒJMS æä¾›ç¨‹åºå°†é€šè¿‡è°ƒç”¨åº”ç”¨ç¨‹åºæŒ‡å®šçš„ CompletionListener å¯¹è±¡ä¸Šçš„å›è°ƒæ–¹æ³• onCompletionæ¥é€šçŸ¥åº”ç”¨ç¨‹åºã€‚</p><p>è¿™å¯¹äºå…è®¸è¿ç»­å‘é€å¤§é‡æ¶ˆæ¯è€Œæ— éœ€ç­‰å¾…æ¯æ¡æ¶ˆæ¯ä¹‹åæœåŠ¡å™¨çš„å›å¤éå¸¸æœ‰ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MyCompletionListener myCompletionListener <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MyCompletionListener(latch);
</span></span><span style=display:flex><span>context.<span style=color:#a6e22e>createProducer</span>().<span style=color:#a6e22e>setAsync</span>(myCompletionListener).<span style=color:#a6e22e>send</span>(queue,<span style=color:#e6db74>&#34;Hello world&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>latch.<span style=color:#a6e22e>await</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (myCompletionListener.<span style=color:#a6e22e>getException</span>()<span style=color:#f92672>==</span><span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>         System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Reply received from server&#34;</span>);
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>         <span style=color:#66d9ef>throw</span> myCompletionListener.<span style=color:#a6e22e>getException</span>();
</span></span><span style=display:flex><span>      }
</span></span></code></pre></div><h2 id=4-jmsxdeliverycount>4. JMSXDeliveryCount</h2><p>JMS 2.0 å…è®¸æ¥æ”¶æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºç¡®å®šè¯¥æ¶ˆæ¯è¢«é‡æ–°ä¼ é€çš„æ¬¡æ•°ã€‚å¯ä»¥ä»æ¶ˆæ¯å±æ€§ JMSXDeliveryCount ä¸­è·å–æ­¤ä¿¡æ¯ï¼š</p><p>int deliveryCount = æ¶ˆæ¯.getIntProperty(â€œJMSXDeliveryCountâ€);</p><p>JMSXDeliveryCount å±æ€§å…è®¸æ¶ˆè´¹åº”ç”¨ç¨‹åºæ£€æµ‹æŸæ¡æ¶ˆæ¯æ˜¯å¦å·²è¢«å¤šæ¬¡é‡æ–°ä¼ é€ï¼Œå› æ­¤åœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯â€œåçš„â€ã€‚åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨æ­¤ä¿¡æ¯é‡‡å–ä¸€äº›ç‰¹æ®Šæ“ä½œï¼ˆè€Œä¸æ˜¯ç®€å•åœ°è§¦å‘å¦ä¸€æ¬¡é‡æ–°ä¼ é€ï¼‰ï¼Œä¾‹å¦‚æ¶ˆè´¹è¯¥æ¶ˆæ¯å¹¶å°†å…¶å‘é€åˆ°å•ç‹¬çš„â€œåâ€æ¶ˆæ¯é˜Ÿåˆ—ä»¥ä¾›ç®¡ç†å‘˜æ“ä½œã€‚</p><h2 id=5-mdb-é…ç½®å±æ€§>5. MDB é…ç½®å±æ€§</h2><p>éœ€è¦å¼‚æ­¥æ¥æ”¶æ¶ˆæ¯çš„ Java EE åº”ç”¨ç¨‹åºä½¿ç”¨ MDB æ¥å®ç°ï¼ŒMDB æ˜¯é€šè¿‡æŒ‡å®šå¤šä¸ªé…ç½®å±æ€§æ¥é…ç½®çš„ã€‚</p><ul><li><strong>destinationLookup</strong>ï¼šç®¡ç†å®šä¹‰çš„é˜Ÿåˆ—æˆ–ä¸»é¢˜å¯¹è±¡çš„ JNDI åç§°ï¼Œè¯¥å¯¹è±¡è¡¨ç¤º MDB å°†ä»ä¸­æ¥æ”¶æ¶ˆæ¯çš„é˜Ÿåˆ—æˆ–ä¸»é¢˜</li><li><strong>connectionFactoryLookup</strong>ï¼šç®¡ç†å®šä¹‰çš„ ConnectionFactory å¯¹è±¡çš„ JNDI åç§°ï¼ŒMDB å°†ä½¿ç”¨è¯¥å¯¹è±¡è¿æ¥åˆ° JMS æä¾›ç¨‹åº</li><li><strong>clientIdï¼š</strong> MDB è¿æ¥åˆ° JMS æä¾›ç¨‹åºæ—¶ä½¿ç”¨çš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦
subscriptionNameï¼šsubscriptionDurability è®¾ç½®ä¸º Durable æ—¶ä½¿ç”¨çš„æŒä¹…è®¢é˜…åç§°</li></ul><h1 id=æ¥è‡ª-wso2-çš„ä¸­é—´ä»¶>æ¥è‡ª WSO2 çš„ä¸­é—´ä»¶</h1><p>ç°åœ¨ï¼Œ<a href=https://wso2.com/ target=_blank>WSO2</a>çš„<a href=https://wso2.com/integration/ target=_blank>Enterprise Integrator</a>å¯ç«‹å³æ”¯æŒ JMS 2.0ã€‚æ­¤äº§å“å¯è®©æ‚¨åœ¨å‘é€æˆ–æ¥æ”¶æ¥è‡ªæ”¯æŒ JMS 2.0 çš„ç¬¬ä¸‰æ–¹ä»£ç†ä¸Šå®šä¹‰çš„é˜Ÿåˆ—æˆ–ä¸»é¢˜çš„æ¶ˆæ¯æ—¶ä½¿ç”¨ä¸Šè¿°æ–°åŠŸèƒ½ã€‚</p></div><div><div style=font-weight:700>Share this post:</div><a class=social-link-item href="https://twitter.com/intent/tweet?text=%5b%e8%af%91%5dJMS%202.0%20%e4%b8%ad%e7%9a%84%e6%96%b0%e5%a2%9e%e5%8a%9f%e8%83%bd https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f" target=_blank rel="noopener noreferrer" title="Click to share on Twitter"><i class="fa-brands fa-square-twitter fa-2xl" style=color:#55acee></i>
</a><a class=social-link-item href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f&title=%5b%e8%af%91%5dJMS%202.0%20%e4%b8%ad%e7%9a%84%e6%96%b0%e5%a2%9e%e5%8a%9f%e8%83%bd" target=_blank rel="noopener noreferrer" title="Click to share on LinkedIn"><i class="fa-brands fa-linkedin fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://telegram.me/share/url?text=%5b%e8%af%91%5dJMS%202.0%20%e4%b8%ad%e7%9a%84%e6%96%b0%e5%a2%9e%e5%8a%9f%e8%83%bd&amp;url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f" target=_blank rel="noopener noreferrer" title="Click to share on telegram"><i class="fa-brands fa-telegram fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://reddit.com/submit?url=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f&title=%5b%e8%af%91%5dJMS%202.0%20%e4%b8%ad%e7%9a%84%e6%96%b0%e5%a2%9e%e5%8a%9f%e8%83%bd" target=_blank rel="noopener noreferrer" title="Click to share on reddit"><i class="fa-brands fa-reddit fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f" target=_blank rel="noopener noreferrer" title="Click to share on facebook"><i class="fa-brands fa-facebook fa-2xl" style=color:#007bb5></i>
</a><a class=social-link-item href="https://api.whatsapp.com/send?text=%5b%e8%af%91%5dJMS%202.0%20%e4%b8%ad%e7%9a%84%e6%96%b0%e5%a2%9e%e5%8a%9f%e8%83%bd%20-%20https%3a%2f%2fblog.chensoul.cc%2fposts%2f2024%2f07%2f24%2fwhat-is-new-in-jms-2-0%2f" target=_blank rel="noopener noreferrer" title="Click to share on whatsapp"><i class="fa-brands fa-whatsapp fa-2xl" style=color:#007bb5></i></a></div></div></article><nav class="navigation post-navigation" role=navigation><h2 class=screen-reader-text>Post navigation</h2><div class=nav-links><div class=nav-previous><a href=/posts/2024/08/01/publishing-a-jar-to-maven-repository-with-github-action/ rel=next><span class=post-title>Github Action å‘å¸ƒ Jar åˆ° Maven ä¸­å¤®ä»“åº“</span></a></div><div class=nav-next><a href=/posts/2024/07/24/jms20/ rel=prev><span class=post-title>[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰- æ˜“äºä½¿ç”¨</span></a></div></div></nav><h2>Related content</h2><ul><li><a href=/posts/2024/12/03/github-actions-in-thingsboard/>ThingsBoardæºç ä¸­çš„Github Actions</a></li><li><a href=/posts/2024/12/03/security-in-thingsboard/>ThingsBoardæºç ä¸­çš„Github Actions</a></li><li><a href=/posts/2024/11/14/quarkus-quick-start/>2024-11-14-Quarkus å¿«é€Ÿå…¥é—¨</a></li><li><a href=/posts/2024/11/07/junit-5-migration/>[è¯‘]ä»JUnit4è¿ç§»åˆ°JUnit5ï¼šæƒå¨æŒ‡å—</a></li><li><a href=/tutorials/>Tutorials</a></li><li><a href=/posts/2024/08/27/activemq-source-code-broker-service/>ActiveMQæºç -BrokerServiceå’ŒPersistenceAdapter</a></li><li><a href=/posts/2024/08/27/thingsboard-code-source-compile/>ThingsBoardæºç ç¼–è¯‘å’ŒIdeaè¿è¡Œ</a></li><li><a href=/posts/2024/08/09/debug-activemq-source-code/>ActiveMQæºç æœ¬åœ°è°ƒè¯•è¿è¡Œ</a></li><li><a href=/posts/2024/08/01/publishing-a-jar-to-maven-repository-with-github-action/>Github Action å‘å¸ƒ Jar åˆ° Maven ä¸­å¤®ä»“åº“</a></li><li><a href=/posts/2024/07/24/jms20/>[è¯‘]JMS 2.0 ä¸­çš„æ–°å¢åŠŸèƒ½ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰- æ˜“äºä½¿ç”¨</a></li></ul></main></section></div><div id=footer class=footer-wrap><footer id=colophon class="site-footer container clearfix" role=contentinfo><div id=footer-text class=site-info><span class=credit-link>Made with ğŸ©·
by <a href=/ target=_blank rel="noopener noreferrer">ChenSoul</a></span></div></footer></div></div><script type=text/javascript src=/main.min.js></script></body></html>