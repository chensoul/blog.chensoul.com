<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>react on ChenSoul</title>
    <link>https://blog.chensoul.com/tags/react/</link>
    <description>Recent content in react on ChenSoul</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 12 Oct 2023 11:00:00 +0800</lastBuildDate><atom:link href="https://blog.chensoul.com/tags/react/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>前端学习路线图</title>
      <link>https://blog.chensoul.com/posts/2023/10/12/frontend-roadmap/</link>
      <pubDate>Thu, 12 Oct 2023 11:00:00 +0800</pubDate>
      
      <guid>https://blog.chensoul.com/posts/2023/10/12/frontend-roadmap/</guid>
      <description>前端学习路线图: Internet： HTTP DNS HTML Basic Semantic HTML Forms and Validations Accessibility SEO CSS Basic Layout Responsive Design JavaScript Baisc DOM Fetch API / Ajax Package Manager npm pnpm yarn Framework Angular Vue.js React Svelte Solid JS Qwik Writing CSS Tailwind Radix UI Shadcn UI CSS Architecture BEM CSS Preprocessors SASS PostCSS Build Module Bundlers</description>
      <content:encoded><![CDATA[<p>前端学习路线图:</p>
<ul>
<li>Internet：
<ul>
<li>HTTP</li>
<li>DNS</li>
</ul>
</li>
<li>HTML
<ul>
<li>Basic</li>
<li>Semantic HTML</li>
<li>Forms and Validations</li>
<li>Accessibility</li>
<li>SEO</li>
</ul>
</li>
<li>CSS
<ul>
<li>Basic</li>
<li>Layout</li>
<li>Responsive Design</li>
</ul>
</li>
<li>JavaScript
<ul>
<li>Baisc</li>
<li>DOM</li>
<li>Fetch API / Ajax</li>
</ul>
</li>
<li>Package Manager
<ul>
<li>npm</li>
<li>pnpm</li>
<li>yarn</li>
</ul>
</li>
<li>Framework
<ul>
<li>Angular</li>
<li>Vue.js</li>
<li>React</li>
<li>Svelte</li>
<li>Solid JS</li>
<li>Qwik</li>
</ul>
</li>
<li>Writing CSS
<ul>
<li>Tailwind</li>
<li>Radix UI</li>
<li>Shadcn UI</li>
</ul>
</li>
<li>CSS Architecture
<ul>
<li>BEM</li>
</ul>
</li>
<li>CSS Preprocessors
<ul>
<li>SASS</li>
<li>PostCSS</li>
</ul>
</li>
<li>Build
<ul>
<li>Module Bundlers
<ul>
<li>parcel</li>
<li>Rollup</li>
<li>Webpack</li>
<li>esbuild</li>
<li>Vite</li>
</ul>
</li>
<li>Task Runners
<ul>
<li>npm scripts</li>
</ul>
</li>
<li>Linters and Formatters
<ul>
<li>Prettier</li>
<li>ESLint</li>
</ul>
</li>
</ul>
</li>
<li>Test
<ul>
<li>Vitest</li>
<li>Jest</li>
<li>Playwirte</li>
<li>Cypress</li>
</ul>
</li>
<li>Authentication Strategies
<ul>
<li>JWT</li>
<li>OAuth</li>
<li>SSO</li>
<li>Basic Auth</li>
<li>Session Auth</li>
</ul>
</li>
<li>Web Security Basics
<ul>
<li>CORS</li>
<li>HTTPS</li>
<li>CSP</li>
<li>OWASP Security Risks</li>
</ul>
</li>
<li>Web Components
<ul>
<li>HTML Templates</li>
<li>Custom Elements</li>
<li>Shadow DOM</li>
</ul>
</li>
<li>Type Checkers
<ul>
<li>TypeScript</li>
</ul>
</li>
<li>Server Side Rendering(SSR)
<ul>
<li>Svelte
<ul>
<li>Svelte Kit</li>
</ul>
</li>
<li>Vue.js
<ul>
<li>Nuxt.js</li>
</ul>
</li>
<li>Angular
<ul>
<li>Universal</li>
</ul>
</li>
<li>React
<ul>
<li>Next.js</li>
<li>Remix</li>
</ul>
</li>
</ul>
</li>
<li>GraphQL
<ul>
<li>Apollo</li>
<li>Relay Modern</li>
</ul>
</li>
<li>Static Site Generators
<ul>
<li>Vuepress</li>
<li>Jekyll</li>
<li>Hugo</li>
<li>Nuxt.js</li>
<li>Astro</li>
<li>Eleventy</li>
<li>Next.js</li>
<li>Remix</li>
</ul>
</li>
<li>Progressive Web App</li>
<li>Mobel Applications
<ul>
<li>React Native</li>
<li>Flutter</li>
<li>Ionic</li>
<li>NativeScript</li>
</ul>
</li>
<li>Desktop Applications</li>
<li>Bonus Content</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>React入门：初始化应用的两种方法</title>
      <link>https://blog.chensoul.com/posts/2023/09/22/react-create-project/</link>
      <pubDate>Fri, 22 Sep 2023 11:00:00 +0800</pubDate>
      
      <guid>https://blog.chensoul.com/posts/2023/09/22/react-create-project/</guid>
      <description>在 React 中，您可以使用多种方法来初始化一个应用程序。以下是几种常见的方法： 使用 Create React App（CRA）。Create React App 是一个官方提供的脚手架工具，</description>
      <content:encoded><![CDATA[<p>在 React 中，您可以使用多种方法来初始化一个应用程序。以下是几种常见的方法：</p>
<ol>
<li>使用 Create React App（CRA）。Create React App 是一个官方提供的脚手架工具，用于快速创建 React 应用程序的基本结构和配置。</li>
<li>使用 Vite。Vite 是一个快速、简单且现代化的前端构建工具。</li>
</ol>
<h2 id="create-react-app">create-react-app</h2>
<p><code>create-react-app</code> 是一个用于快速创建 React 应用程序的命令行工具。它提供了一个简单的方式来设置和配置一个全新的 React 项目，包括构建、开发服务器和其他常见的配置。</p>
<p>要使用 <code>create-react-app</code> 创建一个新的 React 项目，您可以按照以下步骤进行操作：</p>
<ol>
<li>
<p>安装 Node.js</p>
</li>
<li>
<p>创建 React 应用：一旦你安装了 Node.js，你可以使用 <code>create-react-app</code> 工具快速创建一个新的 React 应用。</p>
<p>在命令行中运行以下命令来全局安装 <code>create-react-app</code>：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install -g create-react-app
</span></span></code></pre></div><ol start="3">
<li>创建新的 React 应用：使用以下命令创建一个新的 React 应用：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">create-react-app my-app
</span></span></code></pre></div><blockquote>
<p>提示：</p>
<p><code>npx</code> 是在运行命令时临时安装和执行包的工具。这意味着您无需全局安装 <code>create-react-app</code>，而是在运行 <code>npx create-react-app</code> 命令时自动下载和使用最新版本的 <code>create-react-app</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx create-react-app my-app
</span></span></code></pre></div></blockquote>
<p>这将在当前目录下创建一个名为 <code>&quot;my-app&quot;</code> 的新文件夹，并在此文件夹里做了如下工作：</p>
<ul>
<li>为你的应用程序安装了一些 npm 包；</li>
<li>写入 react 应用启动所需要的脚本文件；</li>
<li>创建一系列结构化的子文件夹和文件；</li>
<li>如果你的电脑上安装了 git 的话，顺便帮你把 git 仓库也建好。</li>
</ul>
<blockquote>
<p>如果你的电脑上安装了 yarn 的话，create-react-app 会默认使用 yarn 而非 npm。如果你同时安装了 yarn 和 npm，但你希望使用 npm 的话，在 create-react-app 的时候需要输入 <code>--use-npm</code> ：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">create-react-app my-app --use-npm
</span></span></code></pre></div></blockquote>
<ol start="4">
<li>进入应用目录：进入新创建的应用程序目录。在命令行中运行以下命令：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd my-app
</span></span></code></pre></div><ol start="5">
<li>启动开发服务器：运行以下命令来启动 React 开发服务器：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm start
</span></span></code></pre></div><p>先前由 create-react-app 创建的脚本会启动一个地服务 <a href="localhost:3000">localhost:3000</a>，并打开你的默认浏览器来访问这个服务。成功启动浏览器的话，你的浏览器上会显示如下画面：</p>
<p><img loading="lazy" src="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started/default-create-react-app.png" alt=""  />
</p>
<ol start="6">
<li>
<p>应用结构</p>
<p>create-react-app 提供了开发 React 应用所需的工具。它的初始文件结构如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">my-app
</span></span><span class="line"><span class="cl">├── README.md
</span></span><span class="line"><span class="cl">├── node_modules
</span></span><span class="line"><span class="cl">├── package.json
</span></span><span class="line"><span class="cl">├── package-lock.json
</span></span><span class="line"><span class="cl">├── .gitignore
</span></span><span class="line"><span class="cl">├── public
</span></span><span class="line"><span class="cl">│   ├── favicon.ico
</span></span><span class="line"><span class="cl">│   ├── index.html
</span></span><span class="line"><span class="cl">│   └── manifest.json
</span></span><span class="line"><span class="cl">└── src
</span></span><span class="line"><span class="cl">    ├── App.css
</span></span><span class="line"><span class="cl">    ├── App.js
</span></span><span class="line"><span class="cl">    ├── App.test.js
</span></span><span class="line"><span class="cl">    ├── index.css
</span></span><span class="line"><span class="cl">    ├── index.js
</span></span><span class="line"><span class="cl">    ├── logo.svg
</span></span><span class="line"><span class="cl">    └── reportWebVitals.js
</span></span></code></pre></div><p>各目录和文件说明：</p>
<ul>
<li>
<p>目录 <strong><code>src</code></strong> 是我们花费时间最多的地方，因为它是我们 React 应用源码存放的目录。</p>
</li>
<li>
<p>目录 <strong><code>public</code></strong> 包含了开发应用时浏览器会读取的文件，其中最重要的就是 <code>index.html</code>。React 将目录 <strong><code>src</code></strong> 中的代码嵌入这个文件，从而浏览器才能运行此文件。 <code>index.html</code>中的有些内容关乎 create-react-app 的运作，因此除非你知道自己在做什么样的修改，否则不建议编辑这个文件。当然，你可以修改<code>index.html</code>中的 title 元素的内容来表现此应用程序通俗易懂的名称。</p>
</li>
<li>
<p>目录 <code>public</code> 会在建立并部署此应用的时候更新。</p>
</li>
<li>
<p>文件 <code>package.json</code> 包含了 Node.js/npm 为了建立该应用程序所管理着的文件信息。</p>
</li>
</ul>
</li>
<li>
<p>编辑 React 组件。在 <code>src</code> 目录中，可以找到名为 <code>App.js</code> 的文件。这是 React 应用的主要组件。你可以编辑该文件以添加、修改或删除组件的内容。</p>
<p>create-react-app 添加了一些我们在项目中完全不会用到的文件。</p>
<ul>
<li>我们不打算写每个组件的样式表，所以首先从 <code>App.js</code> 的顶部删除 <code>App.css</code> 的导入。</li>
<li>我们也不打算使用 <code>logo.svg</code> 文件，所以也要删除这个导入。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> src
</span></span><span class="line"><span class="cl"><span class="c1"># Delete a few files</span>
</span></span><span class="line"><span class="cl">rm -- App.test.js App.css logo.svg reportWebVitals.js setupTests.js
</span></span><span class="line"><span class="cl"><span class="c1"># Move back up to the root of the project</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span></code></pre></div><p>修改 src/App.js 如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;./App.css&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">Hello</span> <span class="nx">React</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="err">/p&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/header&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</span></span></code></pre></div><p>修改 src/index.js 如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom/client&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;./index.css&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">createRoot</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="nx">root</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/React.StrictMode&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></div></li>
<li>
<p>查看应用程序：在你进行编辑并保存代码后，开发服务器将自动重新加载并刷新应用程序。你可以在默认浏览器中查看更新后的应用程序。</p>
</li>
</ol>
<h2 id="vite">vite</h2>
<p>要使用 Vite 创建一个 React 项目，可以按照以下步骤进行操作：</p>
<ol>
<li>确保你已经安装了 Node.js。</li>
<li>安装 Vite：在命令行中运行以下命令来全局安装 Vite：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install -g create-vite
</span></span></code></pre></div><ol start="3">
<li>创建新的 React 项目：使用以下命令创建一个新的 React 项目：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">create-vite my-app-vite --template react
</span></span></code></pre></div><p><code>--template react</code> 参数告诉 Vite 使用 React 模板来创建项目。</p>
<ol start="4">
<li>进入项目目录：进入新创建的项目目录。在命令行中运行以下命令：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd my-app-vite
</span></span></code></pre></div><ol start="5">
<li>安装依赖项：在项目目录中，运行以下命令来安装项目的依赖项：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install
</span></span></code></pre></div><ol start="6">
<li>启动开发服务器：运行以下命令来启动 Vite 开发服务器：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm run dev
</span></span></code></pre></div><p>这将启动开发服务器并在默认浏览器中打开项目。你可以在开发服务器运行期间进行代码编辑，并实时查看项目的更改。</p>
<ol start="7">
<li>
<p>编辑 React 组件：在 <code>src</code> 目录中，可以找到名为 <code>App.jsx</code> 的文件。这是 React 项目的主要组件。你可以编辑该文件以添加、修改或删除组件的内容。</p>
</li>
<li>
<p>查看项目：在你进行编辑并保存代码后，开发服务器将自动重新加载并刷新项目。你可以在默认浏览器中查看更新后的项目。</p>
</li>
</ol>
<h2 id="create-react-app-和-vite-区别">create-react-app 和 vite 区别</h2>
<p>Create React App (CRA) 和 Vite 是两种常用的工具，用于创建和开发 React 应用程序，它们在一些方面有所区别。</p>
<ol>
<li>构建方式：
<ul>
<li>Create React App：CRA 是一个用于构建 React 应用程序的脚手架工具。它使用 Webpack 作为构建工具，并配置了一组默认的构建配置，使得开发者无需手动配置即可开始开发 React 应用程序。</li>
<li>Vite：Vite 是一个现代化的构建工具，专为现代 Web 开发而设计。它使用 ES 模块作为开发时的构建方式，利用浏览器原生支持的模块解析功能，实现了快速的冷启动和热模块替换（HMR）。</li>
</ul>
</li>
<li>开发体验：
<ul>
<li>Create React App：CRA 提供了一个简单且一致的开发环境，使得开发者可以专注于编写 React 组件和业务逻辑。它隐藏了大部分的构建配置细节，使得开发者无需关心底层的构建配置。</li>
<li>Vite：Vite 在开发环境中具有出色的开发体验。它通过使用 ES 模块的直接导入，避免了传统的构建步骤，大大减少了冷启动时间，同时提供了快速的热模块替换，使得开发者能够更快地看到代码更改的效果。</li>
</ul>
</li>
<li>构建速度：
<ul>
<li>Create React App：CRA 使用 Webpack 进行构建，通常在项目较大时，构建时间会相对较长。</li>
<li>Vite：Vite 利用了现代浏览器对 ES 模块的原生支持，构建速度非常快，尤其在开发环境中。</li>
</ul>
</li>
<li>配置灵活性：
<ul>
<li>Create React App：CRA 提供了预定义的构建配置，对于大多数应用程序来说，这些配置已经足够。如果你需要更改构建配置，你需要使用 <code>eject</code> 命令将配置暴露出来，并自己进行配置。</li>
<li>Vite：Vite 的配置方式非常灵活，你可以根据需要自定义配置。Vite 使用了一种基于插件的方式来扩展和修改构建配置，使得配置更加直观和可维护。</li>
</ul>
</li>
</ol>
<p>综上所述，Create React App 适合那些希望快速启动 React 项目且不需要过多自定义配置的开发者。而 Vite 则适合对开发体验和构建速度有较高要求的开发者，并提供了更大的配置灵活性。选择使用哪个工具取决于你的具体需求和项目特点。</p>
<h2 id="参考文章">参考文章</h2>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">React 入门</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>[译]为恐龙解释现代JavaScript</title>
      <link>https://blog.chensoul.com/posts/2023/06/19/modern-javascript-explained-for-dinosaurs/</link>
      <pubDate>Mon, 19 Jun 2023 09:00:00 +0800</pubDate>
      
      <guid>https://blog.chensoul.com/posts/2023/06/19/modern-javascript-explained-for-dinosaurs/</guid>
      <description>图片来自Ryan North的Dinosaur Comics。 如果你从一开始就没有去过那里，那么学习现代 JavaScript 是很困难的。生态系统的发展和变化如此之</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="https://peterxjang.com/img/1__H8PH__HaV43gZyBJz0mJHxA.png" alt="Images from Dinosaur Comics by Ryan North"  />
</p>
<center>图片来自Ryan North的Dinosaur Comics。</center>
<p>如果你从一开始就没有去过那里，那么学习现代 JavaScript 是很困难的。生态系统的发展和变化如此之快，以至于很难理解不同工具试图解决的问题。我从 1998 年开始编程，但直到 2014 年才开始认真学习 JavaScript。当时我记得遇到 <a href="http://browserify.org/">Browserify</a> 并盯着它的标语：</p>
<blockquote>
<p>Browserify 通过捆绑所有依赖项，让你在浏览器中导入（&lsquo;模块&rsquo;）。</p>
</blockquote>
<p>我几乎听不懂这句话中的任何单词，并且努力理解这对我作为开发人员有什么帮助。</p>
<p>本文的目的是提供一个历史背景，说明 JavaScript 工具如何在 2017 年发展到今天的样子。我们将从头开始，像恐龙一样构建一个示例网站 - 没有工具，只有普通的 HTML 和 JavaScript。然后，我们将逐步介绍不同的工具，以查看它们一次解决一个问题。有了这个历史背景，你将能够更好地学习和适应未来不断变化的 JavaScript 环境。让我们开始吧！</p>
<blockquote>
<p>更新：我制作了本文的视频课程版本，为了更清晰，我逐步浏览了每个部分，请在此处查看：
<a href="https://firstclass.actualize.co/p/modern-javascript-explained-for-dinosaurs">https://firstclass.actualize.co/p/modern-javascript-explained-for-dinosaurs</a></p>
</blockquote>
<h3 id="以老派的方式使用-javascript">以&quot;老派&quot;的方式使用 JavaScript</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- index.html --&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>JavaScript Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  **<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;index.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>**  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello from HTML!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>第 <code>&lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;</code> 行引用同一目录中名为 <code>index.js</code> 的单独 JavaScript 文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello from JavaScript!&#34;</span><span class="p">);</span>
</span></span></code></pre></div><p>这就是制作网站所需的全部内容！现在，假设您想添加一个其他人编写的库，例如 moment.js（一个可以帮助以人类可读的方式格式化日期的库）。例如，您可以在 JavaScript 中使用 <code>moment</code> 函数，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">moment</span><span class="p">().</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">();</span>        <span class="c1">// 20 hours ago
</span></span></span></code></pre></div><p>但这只是假设您在网站上包含 moment.js！在 <a href="http://momentjs.com/">moment.js 主页</a> 上您会看到以下说明：</p>
<p><img loading="lazy" src="https://peterxjang.com/img/1__ef7OX37jr____Jc38ZxO97Iw.png" alt="Install instructions for moment.js"  />
</p>
<p>嗯，右侧的&quot;安装&quot;部分有很多内容。但是现在让我们忽略它 - 我们可以通过在同一目录中下载 <code>moment.min.js</code> 文件并将其包含在我们的 <code>index.html</code> 文件中来为我们的网站添加 moment.js。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- index.html --&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;index.css&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;moment.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;index.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello from HTML!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>请注意， <code>moment.min.js</code> 在 <code>index.js</code> 之前加载，这意味着您可以在 <code>index.js</code> 中使用 <code>moment</code> 函数，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello from JavaScript!&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">moment</span><span class="p">().</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">());</span>
</span></span></code></pre></div><p>这就是我们过去使用 JavaScript 库制作网站的方式！好消息是它很容易理解。不好的是，每次更新时查找和下载新版本的库都很烦人。</p>
<h3 id="使用-javascript-包管理器-npm">使用 JavaScript 包管理器 （npm）</h3>
<p>从 2010 年左右开始，出现了几个相互竞争的 JavaScript 包管理器，以帮助自动化从中央存储库下载和升级库的过程。<a href="https://bower.io/">Bower</a> 可以说是2013年最受欢迎的，但最终在2015年左右被 <a href="https://www.npmjs.com/">npm</a> 超越。（值得注意的是，从 2016 年末开始，<a href="https://yarnpkg.com/en/">yarn</a> 作为 npm 接口的替代品获得了很大的关注，但它仍然在引擎盖下使用 npm 包。</p>
<p>请注意，npm 最初是专门为 node.js 制作的包管理器，这是一个旨在在服务器上运行的 JavaScript 运行时，而不是前端。因此，对于打算在浏览器中运行的库的前端 JavaScript 包管理器来说，这是一个非常奇怪的选择。</p>
<blockquote>
<p>注意：使用包管理器通常涉及使用命令行，过去前端开发从不需要命令行。如果您从未使用过，可以阅读<a href="https://www.learnenough.com/command-line-tutorial">本教程</a>以获取入门的良好概述。无论好坏，知道如何使用命令行是现代JavaScript的重要组成部分（它也为其他开发领域打开了大门）。</p>
</blockquote>
<p>让我们看看如何使用 npm 自动安装 moment.js 包，而不是手动下载它。如果您安装了 node.js，则您已经安装了 npm，这意味着您可以将命令行导航到包含 <code>index.html</code> 文件的文件夹并输入：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm init
</span></span></code></pre></div><p>这将提示您几个问题（默认值很好，您可以为每个问题点击“Enter”）并生成一个名为 <code>package.json</code> 的新文件。这是 npm 用来保存所有项目信息的配置文件。使用默认值时， <code>package.json</code> 的内容应如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;your-project-name&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>要安装 moment.js JavaScript 包，我们现在可以通过在命令行中输入以下命令来按照其主页上的 npm 说明进行操作：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm install moment --save
</span></span></code></pre></div><p>此命令执行两件事 — 首先，它从 <a href="https://unpkg.com/moment/">moment.js 包</a> 下载所有代码名为 <code>node_modules</code> 的文件夹中。其次，它会自动修改 <code>package.json</code> 文件以跟踪 moment.js 作为项目依赖项。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;modern-javascript-example&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;moment&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.22.2&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>这在以后与他人共享项目时很有用 - 而不是共享 <code>node_modules</code> 文件夹（可能会变得非常大），您只需要共享 <code>package.json</code> 文件，其他开发人员可以使用命令 <code>npm install</code> 自动安装所需的包。</p>
<p>所以现在我们不再需要从网站上手动下载 momentjs，我们可以使用 npm 自动下载和更新它。查看 <code>node_modules</code> 文件夹内部，我们可以看到 <code>moment.min.js</code> 目录中的 <code>node_modules/moment/min</code> 文件。这意味着我们可以链接到 <code>index.html</code> 文件中的 npm 下载版本，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- index.html --&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>JavaScript Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;node_modules/moment/min/moment.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;index.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello from HTML!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>所以好消息是我们现在可以使用 npm 通过命令行下载和更新我们的包。不好的是，现在我们正在挖掘 <code>node_modules</code> 文件夹以查找每个包的位置，并手动将其包含在我们的 HTML 中。这很不方便，所以接下来我们将看看如何自动化该过程。</p>
<p><img loading="lazy" src="https://peterxjang.com/img/1__GeEETvRqyG4o7SZdbU2Guw.png" alt="Dinosaur comic panel 2"  />
</p>
<h3 id="使用-javascript-模块捆绑器webpack">使用 JavaScript 模块捆绑器（webpack)　</h3>
<p>大多数编程语言都提供了一种将代码从一个文件导入另一个文件的方法。JavaScript 最初并不是使用此功能设计的，因为 JavaScript 被设计为仅在浏览器中运行，无法访问客户端计算机的文件系统（出于安全原因）。因此，在很长一段时间内，在多个文件中组织 JavaScript 代码需要您使用全局共享的变量加载每个文件。</p>
<p>这实际上是我们在上面所做的 moment.js 示例 — 整个 <code>moment.min.js</code> 文件加载到 HTML 中，HTML 定义了一个全局变量 <code>moment</code> ，然后可用于在 <code>moment.min.js</code> 之后加载的任何文件（无论它是否需要访问它）。</p>
<p>2009年，一个名为 CommonJS 的项目启动，目标是在浏览器之外为 JavaScript 指定一个生态系统。CommonJS 的很大一部分是它的模块规范，它最终允许 JavaScript 像大多数编程语言一样跨文件导入和导出代码，而无需诉诸全局变量。最著名的 CommonJS 模块实现是 node.js。</p>
<p><img loading="lazy" src="https://peterxjang.com/img/1__xeF1flp1zDLLJ4j7rDQ6__Q.png#medium" alt="Node.js logo"  />
</p>
<p>如前所述，node.js 是一个设计用于在服务器上运行的 JavaScript 运行时。下面是前面的示例使用 node.js 模块的样子。与其使用 HTML 脚本标记加载所有 <code>moment.min.js</code> ，不如直接将其加载到 JavaScript 文件中，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">moment</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;moment&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello from JavaScript!&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">moment</span><span class="p">().</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">());</span>
</span></span></code></pre></div><p>同样，这就是模块加载在 node.js 中的工作方式，由于 node.js 是一种可以访问计算机文件系统的服务器端语言，因此效果很好。Node.js 也知道每个 npm 模块路径的位置，所以你不必写 <code>require('./node_modules/moment/min/moment.min.js)</code> ，你可以简单地写 <code>require('moment')</code> — 非常甜蜜。</p>
<p>这对于 node.js 来说都很棒，但是如果您尝试在浏览器中使用上述代码，则会收到一条错误消息，指出未定义浏览器无法访问文件系统，这意味着以这种方式加载模块非常棘手 - 加载文件必须动态完成，同步（这会减慢执行速度）或异步（可能存在计时问题）。</p>
<p>这就是模块捆绑器的用武之地。JavaScript 模块捆绑器是一种工具，它通过构建步骤（可以访问文件系统）来解决问题，以创建与浏览器兼容的最终输出（不需要访问文件系统）。在这种情况下，我们需要一个模块捆绑器来查找所有 <code>require</code> 语句（这是无效的浏览器 JavaScript 语法），并将它们替换为每个所需文件的实际内容。最终结果是一个捆绑的 JavaScript 文件（没有 require 语句）！</p>
<p>最流行的模块捆绑器是 Browserify，它于 2011 年发布，率先在前端使用 node.js 样式的需求语句（这本质上是使 npm 成为首选前端包管理器的原因）。大约在 2015 年，webpack 最终成为使用更广泛的模块捆绑器（受到 React 前端框架的普及的推动，它充分利用了 webpack 的各种功能）。</p>
<p>让我们来看看如何使用 webpack 让上面的 <code>require('moment')</code> 示例在浏览器中工作。首先，我们需要将 webpack 安装到项目中。Webpack 本身是一个 npm 包，所以我们可以从命令行安装它：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm install webpack webpack-cli --save-dev
</span></span></code></pre></div><p>请注意，我们正在安装两个软件包 — webpack 和 webpack-cli（它使您能够从命令行使用 webpack）。另请注意 <code>--save-dev</code> 参数 — 这会将其保存为开发依赖项，这意味着它是开发环境中需要的包，而不是生产服务器上需要的包。您可以在自动更新的 <code>package.json</code> 文件中看到这反映在：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;modern-javascript-example&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;moment&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.19.1&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.17.1&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack-cli&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.1.0&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>现在我们已经将 webpack 和 webpack-cli 作为包安装在 <code>node_modules</code> 文件夹中。您可以从命令行使用 webpack-cli，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./node_modules/.bin/webpack index.js --mode<span class="o">=</span>development
</span></span></code></pre></div><p>此命令将运行安装在 <code>node_modules</code> 文件夹中的 webpack 工具，从 <code>index.js</code> 文件开始，找到任意 <code>require</code> 语句，并将它们替换为适当的代码以创建单个输出文件（默认为 <code>dist/main.js</code> ）。 <code>--mode=development</code> 参数是为了让开发人员保持 JavaScript 的可读性，而不是参数 <code>--mode=production</code> 的缩小输出。</p>
<p>现在我们有了 webpack 的 <code>dist/main.js</code> 输出，我们将在浏览器中使用它而不是 <code>index.js</code> ，因为它包含无效的 require 语句。这将反映在 <code>index.html</code> 文件中，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- index.html --&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>JavaScript Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;dist/main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello from HTML!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>如果您刷新浏览器，您应该会看到一切都像以前一样工作！</p>
<p>请注意，每次更改 <code>index.js</code> 时，我们都需要运行 webpack 命令。这很乏味，当我们使用 webpack 更高级的功能（例如生成源映射以帮助从转译的代码调试原始代码）时，这将变得更加乏味。Webpack 可以从名为 <code>webpack.config.js</code> 的项目根目录中的配置文件中读取选项，在我们的例子中，它看起来像：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// webpack.config.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./index.js&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;dist&#39;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>现在每次我们更改 <code>index.js</code> 时，我们都可以使用以下命令运行 webpack：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./node_modules/.bin/webpack
</span></span></code></pre></div><p>我们不再需要指定 <code>index.js</code> 和 <code>--mode=development</code> 选项，因为 webpack 正在从 <code>webpack.config.js</code> 文件中加载这些选项。这更好，但为每个代码更改输入此命令仍然很乏味 - 我们将使此过程更顺畅。</p>
<p>总的来说，这可能看起来不多，但这个工作流程有一些巨大的优势。我们不再通过全局变量加载外部脚本。任何新的 JavaScript 库都将在 JavaScript 中使用 <code>require</code> 语句添加，而不是在 HTML 中添加新的 <code>&lt;script&gt;</code> 标签。拥有单个 JavaScript 捆绑包文件通常对性能更好。现在我们添加了构建步骤，我们可以将其他一些强大的功能添加到我们的开发工作流程中！</p>
<p><img loading="lazy" src="https://peterxjang.com/img/1__ee__ivxNTKgIJTjmEMC4__dg.png" alt="Dinosaur comic panels 3 and 4"  />
</p>
<h3 id="为新的语言功能转译代码-babel">为新的语言功能转译代码 （babel）</h3>
<p>转译代码意味着将一种语言的代码转换为另一种类似语言的代码。这是前端开发的一个重要部分——由于浏览器添加新功能的速度很慢，因此使用实验性功能创建了新语言，这些功能可以转换为浏览器兼容语言。</p>
<p>对于CSS，有 <a href="http://sass-lang.com/">Sass</a>，<a href="http://lesscss.org/">Less </a>和 <a href="http://stylus-lang.com/">Stylus</a>，仅举几例。对于 JavaScript，一段时间内最流行的转译器是 <a href="http://coffeescript.org/">CoffeeScript</a>（2010年左右发布），而现在大多数人使用 <a href="https://babeljs.io/">babel  </a>或 <a href="http://www.typescriptlang.org/">TypeScript</a>。CoffeeScript 是一种专注于通过显著改变语言来改进 JavaScript 的语言——可选的括号、重要的空格等。Babel 不是一门新语言，而是一种转译器，它将尚未适用于所有浏览器（<a href="https://babeljs.io/learn-es2015/">ES2015</a> 及更高版本）的下一代 JavaScript 转译为更兼容的旧 JavaScript （ES5）。Typescript 是一种与下一代  JavaScript 基本相同的语言，但也添加了可选的静态类型。许多人选择使用 babel，因为它最接近原版 JavaScript。</p>
<p>让我们看一个如何在我们现有的 webpack 构建步骤中使用 babel 的示例。首先，我们将从命令行将 babel（这是一个 npm 包）安装到项目中：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm install @babel/core @babel/preset-env babel-loader --save-dev
</span></span></code></pre></div><p>请注意，我们正在安装 3 个单独的包作为开发依赖项 — <code>@babel/core</code> 是 babel 的主要部分， <code>@babel/preset-env</code> 是定义要转译的新 JavaScript 功能的预设， <code>babel-loader</code> 是使 babel 能够使用 webpack 的包。我们可以通过编辑 <code>webpack.config.js</code> 文件将 webpack 配置为使用 <code>babel-loader</code> ，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// webpack.config.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./index.js&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;dist&#39;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>  
</span></span><span class="line"><span class="cl">      <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">          <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;babel-loader&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">          <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl">          <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">      <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="p">]</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>这种语法可能会令人困惑（幸运的是，这不是我们经常编辑的东西）。基本上，我们告诉 webpack 查找任何 .js 文件（不包括 <code>node_modules</code> 文件夹中的文件），并使用 <code>babel-loader</code> 和 <code>@babel/preset-env</code> 预设应用 babel 转译。您可以在<a href="http://webpack.github.io/docs/configuration.html">此处</a>阅读有关 webpack 配置语法的更多信息。</p>
<p>现在一切都设置好了，我们可以开始用我们的 JavaScript 编写 ES2015 功能了！下面是 <code>index.js</code> 文件中的 <a href="https://babeljs.io/learn-es2015/#ecmascript-2015-features-template-strings">ES2015 模板字符串</a>示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">moment</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;moment&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello from JavaScript!&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">moment</span><span class="p">().</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;Bob&#34;</span><span class="p">,</span> <span class="nx">time</span> <span class="o">=</span> <span class="s2">&#34;today&#34;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hello </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">, how are you </span><span class="si">${</span><span class="nx">time</span><span class="si">}</span><span class="sb">?`</span><span class="p">);</span>
</span></span></code></pre></div><p>我们还可以使用 <a href="https://babeljs.io/learn-es2015/#ecmascript-2015-features-modules">ES2015 import 语句 </a>代替 <code>require</code> 来加载模块，这就是您今天在很多代码库中看到的内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// index.js  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">moment</span> <span class="nx">from</span> <span class="s1">&#39;moment&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello from JavaScript!&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">moment</span><span class="p">().</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;Bob&#34;</span><span class="p">,</span> <span class="nx">time</span> <span class="o">=</span> <span class="s2">&#34;today&#34;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hello </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">, how are you </span><span class="si">${</span><span class="nx">time</span><span class="si">}</span><span class="sb">?`</span><span class="p">);</span>
</span></span></code></pre></div><p>在此示例中， <code>import</code> 语法与 <code>require</code> 语法没有太大区别，但 <code>import</code> 对于更高级的情况具有额外的灵活性。由于我们更改了 <code>index.js</code> ，我们需要在命令行中再次运行 webpack：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./node_modules/.bin/webpack
</span></span></code></pre></div><p>现在您可以在浏览器中刷新 <code>index.html</code> 。在撰写本文时，大多数现代浏览器都支持所有 ES2015 功能，因此很难判断 babel 是否完成了它的工作。您可以在 IE9 等较旧的浏览器中对其进行测试，也可以在 <code>main.js</code> 中搜索以查找转译的代码行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// main.js  
</span></span></span><span class="line"><span class="cl"><span class="c1">// ...  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;, how are you &#39;</span> <span class="o">+</span> <span class="nx">time</span> <span class="o">+</span> <span class="s1">&#39;?&#39;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></div><p>在这里你可以看到 babel 将 ES2015 模板字符串转换为常规的 JavaScript 字符串连接，以保持浏览器兼容性。虽然这个特殊的例子可能不太令人兴奋，但转译代码的能力是非常强大的。JavaScript 中有一些令人兴奋的语言功能，如 <a href="async/await">async/await</a>，你可以立即开始使用它们来编写更好的代码。虽然音译有时可能看起来乏味和痛苦，但它在过去几年中导致了语言的巨大改进，因为人们今天正在测试明天的功能。</p>
<p>我们几乎完成了，但我们的工作流程中仍有一些未打磨的边缘。如果我们担心性能，我们应该<a href="https://en.wikipedia.org/wiki/Minification_%28programming%29">缩小</a>捆绑文件，这应该很容易，因为我们已经合并了一个构建步骤。每次更改 JavaScript 时，我们还需要重新运行 webpack 命令，这会很快变旧。因此，接下来我们要看的是解决这些问题的一些便捷工具。</p>
<h3 id="使用任务运行程序npm-脚本">使用任务运行程序（npm 脚本）</h3>
<p>现在我们已经投资使用构建步骤来处理 JavaScript 模块，使用任务运行器是有意义的，这是一个自动执行构建过程不同部分的工具。对于前端开发，任务包括缩小代码、优化图像、运行测试等。</p>
<p>2013年，Grunt 是最受欢迎的前端任务运行者，Gulp 紧随其后。两者都依赖于包装其他命令行工具的插件。如今，最流行的选择似乎是使用 npm 包管理器本身内置的脚本功能，它不使用插件，而是直接与其他命令行工具一起使用。</p>
<p>让我们编写一些 npm 脚本，以便更轻松地使用 webpack。这涉及简单地更改 <code>package.json</code> 文件，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;modern-javascript-example&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --progress --mode=production&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;watch&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --progress --watch&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;moment&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.22.2&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@babel/core&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@babel/preset-env&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;babel-loader&#34;</span><span class="p">:</span> <span class="s2">&#34;^8.0.2&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.17.1&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack-cli&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.1.0&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>在这里，我们添加了两个新脚本， <code>build</code> 和 <code>watch</code> 。要运行构建脚本，您可以在命令行中输入：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm run build
</span></span></code></pre></div><p>这将运行 webpack（使用我们之前所做的 <code>webpack.config.js</code> 中的配置），其中 <code>--progress</code> 选项显示进度百分比， <code>--mode=production</code> 选项最小化生产代码。要运行 <code>watch</code> 脚本，请执行以下操作：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm run watch
</span></span></code></pre></div><p>它使用 <code>--watch</code> 选项代替，以便在每次任何 JavaScript 文件更改时自动重新运行 webpack，这对于开发非常有用。</p>
<p>请注意， <code>package.json</code> 中的脚本可以在不必指定完整路径 <code>./node_modules/.bin/webpack</code> 的情况下运行 webpack，因为 node.js 知道每个 npm 模块路径的位置。这很甜！我们可以通过安装 webpack-dev-server 来让事情变得更加甜蜜，这是一个单独的工具，它提供了一个简单的 Web 服务器和实时重新加载。要将其安装为开发依赖项，请输入以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm install webpack-dev-server --save-dev
</span></span></code></pre></div><p>然后将一个 npm 脚本添加到 <code>package.json</code> ：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;modern-javascript-example&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --progress -p&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;watch&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --progress --watch&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;serve&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack-dev-server --open&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;moment&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.19.1&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@babel/core&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@babel/preset-env&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.0.0&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;babel-loader&#34;</span><span class="p">:</span> <span class="s2">&#34;^8.0.2&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.7.1&#34;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;webpack-dev-server&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.1.6&#34;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>现在，您可以通过运行以下命令来启动开发服务器：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ npm run serve
</span></span></code></pre></div><p>这将在您的浏览器中自动打开地址为 <code>localhost:8080</code> 的 <code>index.html</code> 网站（默认情况下）。每当你在 <code>index.js</code> 中更改 JavaScript 时，webpack-dev-server 都会重建它自己的捆绑 JavaScript 并自动刷新浏览器。这是一个非常有用的时间节省，因为它允许您将注意力集中在代码上，而不必在代码和浏览器之间不断切换上下文以查看新的更改。</p>
<p>这只是表面，webpack 和 webpack-dev-server 还有更多选项（你可以在<a href="https://webpack.js.org/guides/development/">这里</a>阅读）。当然，你也可以制作 npm 脚本来运行其他任务，例如将 Sass 转换为 CSS、压缩图像、运行测试 — 任何具有命令行工具的东西都是公平的游戏。npm 脚本本身也有一些很棒的高级选项和技巧——<a href="https://twitter.com/k88hudson">Kate Hudson</a> 的这个演讲是一个很好的起点：</p>
<p><a href="https://youtu.be/0RYETb9YVrk">https://youtu.be/0RYETb9YVrk</a></p>
<h3 id="结论">结论</h3>
<p>简而言之，这就是现代JavaScript。我们从纯HTML和JS转向使用包管理器自动下载第三方包，使用模块捆绑器创建单个脚本文件，使用转译器使用未来的JavaScript功能，以及任务运行器来自动化构建过程的不同部分。这里肯定有很多移动的部分，特别是对于初学者。对于刚接触编程的人来说，Web 开发曾经是一个很好的切入点，正是因为它很容易启动和运行;如今，这可能非常令人生畏，特别是因为各种工具往往会迅速变化。</p>
<p>不过，它并不像看起来那么糟糕。事情正在安定下来，特别是随着节点生态系统作为与前端合作的可行方式的采用。使用 npm 作为包管理器，将节点 <code>require</code> 或 <code>import</code> 语句用于模块，使用 npm 脚本来运行任务，这很好且一致。与一两年前相比，这是一个大大简化的工作流程！</p>
<p>对于初学者和有经验的开发人员来说，更好的是，如今的框架通常带有使该过程更容易上手的工具。Ember 有 <a href="https://ember-cli.com/">ember-cli</a> ，这对 Angular 的 <a href="https://cli.angular.io/">angular-cli</a> 、React 的 <a href="https://github.com/facebookincubator/create-react-app"><code>create-react-app</code></a>、Vue 的 <a href="https://github.com/vuejs/vue-cli">vue-cli</a> 等产生了巨大的影响。所有这些工具都将设置一个包含您需要的所有项目——您需要做的就是开始编写代码。然而，这些工具并不神奇，它们只是以一种一致和工作的方式设置了所有内容——你可能经常需要对 webpack、babel 等进行一些额外的配置。因此，了解我们在本文中介绍的每个部分的作用仍然非常关键。</p>
<p>现代 JavaScript 在使用时肯定会令人沮丧，因为它继续快速变化和发展。但是，尽管有时看起来像是重新发明轮子，但JavaScript的快速发展有助于推动诸如热重载，实时linting和时间旅行调试等创新。作为一名开发人员，这是一个激动人心的时刻，我希望这些信息可以作为路线图，在您的旅程中为您提供帮助！</p>
<p><img loading="lazy" src="https://peterxjang.com/img/1__H6NN__RxZNeVyLYpCirsslg.png" alt="Dinosaur comic panel 5"  />
</p>
<p>特别感谢<a href="https://twitter.com/ryanqnorth">@ryanqnorth</a>的<a href="http://www.qwantz.com/">恐龙漫画</a>，自2003年以来（恐龙统治网络）以来，它提供了一些最好的荒诞幽默。</p>
<p>原文链接：<a href="https://peterxjang.com/blog/modern-javascript-explained-for-dinosaurs.html">https://peterxjang.com/blog/modern-javascript-explained-for-dinosaurs.html</a></p>
<blockquote>
<p>译者备注：</p>
<p>Github 上有一个关于这篇文章源代码的仓库：<a href="https://github.com/scherler/Modern-JavaScript-Explained-For-Dinosaurs">https://github.com/scherler/Modern-JavaScript-Explained-For-Dinosaurs</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
